(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{437:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"è®¡ç®—æœºåŸºç¡€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¡ç®—æœºåŸºç¡€"}},[t._v("#")]),t._v(" è®¡ç®—æœºåŸºç¡€")]),t._v(" "),a("p",[t._v("å‰è¨€")]),t._v(" "),a("blockquote",[a("p",[t._v("è¿™ç¯‡ç¬”è®°æ—¨åœ¨å°†å·¥ä½œä¸­ã€å­¦ä¹ ä¸­é‡åˆ°çš„çŸ¥è¯†ç‚¹éƒ½è¯¦ç»†çš„è®°å½•ä¸‹æ¥ã€‚æ…¢æ…¢å·©å›ºåŸºç¡€ï¼ŒæŒæ¡äº†æ‰å®çš„åŸºç¡€ï¼Œæ‰èƒ½åœ¨å·¥ä½œã€é¢è¯•ä¸­æ¸¸åˆƒæœ‰ä½™ã€‚")])]),t._v(" "),a("p",[t._v("[TOC]")]),t._v(" "),a("h2",{attrs:{id:"æ“ä½œç³»ç»Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ“ä½œç³»ç»Ÿ"}},[t._v("#")]),t._v(" æ“ä½œç³»ç»Ÿ")]),t._v(" "),a("h3",{attrs:{id:"è¿›ç¨‹-vs-çº¿ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¿›ç¨‹-vs-çº¿ç¨‹"}},[t._v("#")]),t._v(" è¿›ç¨‹ vs çº¿ç¨‹")]),t._v(" "),a("p",[t._v("ä¸åŒç‚¹ï¼š")]),t._v(" "),a("p",[t._v("ä»èŒƒå›´ä¸Šè®²ï¼Œçº¿ç¨‹æ˜¯æ¯”è¿›ç¨‹æ›´å°æ›´ç»†çš„è¿è¡Œå•ä½ã€‚ä¸€ä¸ªç¨‹åºæœ‰å¤šä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹åˆåŒ…å«äº†å¤šä¸ªçº¿ç¨‹ã€‚ä½†æ˜¯çœŸæ­£æ‰§è¡Œä½“è¿˜æ˜¯çº¿ç¨‹ã€‚")]),t._v(" "),a("p",[t._v("ä»é€šä¿¡ä¸Šè®²ï¼Œçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ï¼Œç›¸äº’é€šä¿¡ï¼Œè€Œè¿›ç¨‹ä¹‹é—´å†…å­˜ç‹¬ç«‹ã€‚")]),t._v(" "),a("p",[t._v("ä»è¿è¡Œæ—¶çš„å†…å­˜å ç”¨ä¸Šè®²ï¼Œçº¿ç¨‹ä¸ä¼šå ç”¨ç³»ç»Ÿèµ„æºï¼Œæ²¡æœ‰è‡ªå·±ç‹¬ç«‹åœ°å€ç©ºé—´ï¼Œåªéœ€è¦è¿è¡Œå †æ ˆï¼Œæ¥å­˜æ”¾ä¸´æ—¶å˜é‡å’Œç¨‹åºè®¡æ•°å™¨ç­‰ä¿¡æ¯ã€‚è€Œè¿›ç¨‹æ˜¯éœ€è¦åˆ†é…ç‹¬ç«‹å†…å­˜ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å­˜å‚¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å­˜å‚¨"}},[t._v("#")]),t._v(" å­˜å‚¨")]),t._v(" "),a("h4",{attrs:{id:"cpuç¼“å­˜æ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpuç¼“å­˜æ¨¡å‹"}},[t._v("#")]),t._v(" CPUç¼“å­˜æ¨¡å‹")]),t._v(" "),a("p",[t._v("ç°ä»£CPUä¸ºäº†æé«˜è¿è¡Œé€Ÿåº¦ï¼Œå‡å°‘ä»å†…å­˜ä¸­è¯»å–æ•°æ®çš„æ¬¡æ•°ï¼Œå¤§å¤šè®¾è®¡äº†3å±‚ç¼“å­˜æœºåˆ¶ã€‚æ•´ä½“æ¶æ„å¦‚ä¸‹ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-10-31-221627.png",alt:"image-20191101061626611"}}),t._v(" "),a("p",[t._v("CPUä¸€èˆ¬éƒ½æ˜¯å¤šæ ¸CPUï¼Œæ¯ä¸€ä¸ªCPUå†…æ ¸é‡Œéƒ½æœ‰ä¸€ä¸ªå¯„å­˜å™¨ï¼Œå¯„å­˜å™¨ä¸»è¦ç”¨æ¥å­˜æ”¾å½“å‰CPUçš„æ“ä½œç¬¦ã€è®¡ç®—ç»“æœç­‰ä¿¡æ¯ã€‚")]),t._v(" "),a("p",[t._v("å¤šä¸ªCPUå†…æ ¸é€šè¿‡æ€»çº¿æ¥ä¼ é€’ã€å…±äº«æ•°æ®ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_3çº§ç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3çº§ç¼“å­˜"}},[t._v("#")]),t._v(" 3çº§ç¼“å­˜")]),t._v(" "),a("blockquote",[a("p",[t._v("https://www.jb51.net/hardware/cpu/610074.html")])]),t._v(" "),a("p",[t._v("CPUé«˜é€Ÿç¼“å­˜çš„å‡ºç°ä¸»è¦æ˜¯ä¸ºäº†è§£å†³==CPUè¿ç®—é€Ÿåº¦==ä¸==å†…å­˜è¯»å†™é€Ÿåº¦==ä¸åŒ¹é…çš„çŸ›ç›¾ã€‚å†…å­˜çš„è¯»å–å¤ªæ…¢ï¼Œå¯¼è‡´CPUç»å¸¸éœ€è¦ç­‰å¾…ï¼Œæ— æ³•å‘æŒ¥CPUçš„é«˜é€Ÿæ•ˆæœã€‚")]),t._v(" "),a("p",[t._v("é€šå¸¸CPUéƒ½ä¼šè®¾è®¡3çº§ç¼“å­˜ï¼Œæ¯ä¸ªç¼“å­˜çš„å‘½ä¸­ç‡å¤§æ¦‚åœ¨80%å·¦å³ï¼Œå³80%çš„æ•°æ®å¯ä»¥ä»L1ç¼“å­˜ä¸­è¯»å–ï¼Œ20%çš„æ•°æ®åœ¨L2ç¼“å­˜é‡Œè¯»ï¼Œä¾æ¬¡ç±»æ¨ã€‚")]),t._v(" "),a("p",[t._v("L1çš„ç¼“å­˜å¤§å°ä¼š å°äº L2 å°äº L3ã€‚L1åˆ†2å—åŒºåŸŸï¼šL1iç”¨æ¥ç¼“å­˜æŒ‡ä»¤ï¼ŒL1dç”¨æ¥ç¼“å­˜æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("L3æ˜¯æ‰€æœ‰CPUå†…æ ¸å…±äº«çš„")]),t._v(" "),a("h4",{attrs:{id:"mesiåè®®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mesiåè®®"}},[t._v("#")]),t._v(" MESIåè®®")]),t._v(" "),a("blockquote",[a("p",[t._v("https://juejin.im/post/5da33288518825646c50f18c")])]),t._v(" "),a("p",[t._v("å¤šæ ¸cpuçš„ç¼“å­˜ä¼šå­˜åœ¨ç¼“å­˜ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œæƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯åŠ é”ï¼Œä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªcpuçš„ç¼“å­˜åœ¨è¢«è¯»å–ã€‚")]),t._v(" "),a("p",[t._v("æ—©æœŸçš„åŠ é”ç­–ç•¥æ˜¯æŠŠæ•´ä¸ªå†…å­˜æ€»çº¿é”å®šäº†èµ·æ¥ï¼Œè¿™æ ·é”å®šæœŸé—´ï¼Œæ‰€æœ‰å…¶ä»–çš„CPUæ— æ³•å»ä¿®æ”¹å†…å­˜ä¸­çš„åœ°å€ï¼Œä½†æ˜¯é€ æˆçš„é—®é¢˜å°±æ˜¯æ€§èƒ½å¾ˆæ…¢ã€‚")]),t._v(" "),a("p",[t._v("ç°åœ¨çš„æ–¹æ¡ˆéƒ½æ˜¯é€šè¿‡MESIåè®®æ¥è§£å†³ã€‚")]),t._v(" "),a("p",[t._v("MESIåè®®æ•´ä½“æ¶æ„å¦‚ä¸‹ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-10-31-225407.png",alt:"image-20191101065406793"}}),t._v(" "),a("p",[t._v("MESIå®šä¹‰äº†"),a("strong",[t._v("ç¼“å­˜è¡Œ")]),t._v("çš„4ç§ç¼“å­˜çŠ¶æ€ï¼š")]),t._v(" "),a("blockquote",[a("p",[t._v("ç¼“å­˜è¡Œï¼šç¼“å­˜çš„åŸºæœ¬æ•°æ®å•ä½ï¼Œåœ¨Intelçš„CPUä¸Šä¸€èˆ¬æ˜¯64å­—èŠ‚")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("çŠ¶æ€")]),t._v(" "),a("th",[t._v("æè¿°")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Mï¼ˆModifiedï¼‰")]),t._v(" "),a("td",[t._v("å½“å‰ç¼“å­˜æœ‰æ•ˆï¼Œä¸”å€¼è¢«ä¿®æ”¹äº†")])]),t._v(" "),a("tr",[a("td",[t._v("Eï¼ˆExculsiveï¼‰")]),t._v(" "),a("td",[t._v("å½“å‰ç¼“å­˜æœ‰æ•ˆï¼Œåªå­˜åœ¨å½“å‰CPUå†…æ ¸çš„ç¼“å­˜é‡Œ")])]),t._v(" "),a("tr",[a("td",[t._v("Sï¼ˆSharedï¼‰")]),t._v(" "),a("td",[t._v("å½“å‰ç¼“å­˜æœ‰æ•ˆï¼Œå­˜åœ¨äºå¤šä¸ªCPUçš„ç¼“å­˜ä¸­")])]),t._v(" "),a("tr",[a("td",[t._v("Iï¼ˆInvalidï¼‰")]),t._v(" "),a("td",[t._v("å½“å‰å­˜å‚¨æ— æ•ˆ")])])])]),t._v(" "),a("p",[a("strong",[t._v("è¯»å–è§„åˆ™")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("æ¯ä¸ªCPUä¸Šé¢éƒ½ç»´æŠ¤äº†æŸä¸€ä¸ªæ•°æ®çš„ç¼“å­˜çŠ¶æ€ã€‚")]),t._v(" "),a("p",[t._v("å¤„äºMçŠ¶æ€çš„ç¼“å­˜è¡Œï¼Œå¿…é¡»åœ¨å…¶ä»–CPUè¯»å– è¯¥ç¼“å­˜è¡Œå¯¹åº”çš„å†…å­˜åœ°å€ä¹‹å‰ï¼Œå°†ä¿®æ”¹çš„å€¼å†™å›ç¼“å­˜ã€‚")]),t._v(" "),a("p",[t._v("å¤„äºSçŠ¶æ€çš„ç¼“å­˜è¡Œï¼Œå¿…é¡»ç›‘å¬ç€è®©è¯¥ç¼“å­˜è¡Œæ— æ•ˆ æˆ– ç‹¬äº«è¯¥ç¼“å­˜è¡Œ çš„è¯·æ±‚ï¼Œå¦‚æœç›‘å¬åˆ°ä»¥åï¼ŒæŠŠç¼“å­˜è¡ŒçŠ¶æ€è®¾ç½®ä¸ºIã€‚")]),t._v(" "),a("p",[t._v("å¤„äºEçŠ¶æ€çš„ç¼“å­˜è¡Œï¼Œå¦‚æœç›‘å¬åˆ°å…¶ä»–è¯»å–è¯¥ç¼“å­˜è¡Œå¯¹åº”çš„å†…å­˜åœ°å€çš„æ“ä½œï¼Œéœ€è¦æŠŠè¯¥ç¼“å­˜è¡ŒçŠ¶æ€è®¾ç½®ä¸ºSã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœç¼“å­˜è¡Œçš„ç¼“å­˜çŠ¶æ€æ˜¯Iï¼Œéœ€è¦å­˜å†…å­˜ä¸­é‡æ–°è¯»å–ï¼Œç„¶åæŠŠçŠ¶æ€æ”¹ä¸ºSã€‚")]),t._v(" "),a("p",[a("strong",[t._v("çŠ¶æ€æœº")])]),t._v(" "),a("p",[t._v("MESIåè®®å®é™…ä¸Šæ˜¯ä¸€ç§æœ‰é™çŠ¶æ€æœºï¼Œç¼“å­˜çŠ¶æ€ä¼šæ ¹æ®äº‹ä»¶è¿›è¡Œç›¸åº”çŠ¶æ€çš„æ”¹å˜ã€‚äº‹ä»¶åˆ†æˆ2ç±»ï¼Œ")]),t._v(" "),a("p",[a("code",[t._v("cpuå¯¹cacheçš„è¯·æ±‚äº‹ä»¶")]),t._v("ï¼Œ"),a("code",[t._v("æ€»çº¿å¯¹cacheè¯·æ±‚äº‹ä»¶")]),t._v("ã€‚æ‰€æœ‰çš„äº‹ä»¶éƒ½è¢«"),a("code",[t._v("æ€»çº¿å—…æ¢å™¨")]),t._v("ç›‘å¬ã€‚")]),t._v(" "),a("p",[t._v("cpuå¯¹cacheçš„è¯·æ±‚äº‹ä»¶ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("PrRd: å¤„ç†å™¨è¯·æ±‚"),a("strong",[t._v("è¯»")]),t._v("ä¸€ä¸ªç¼“å­˜å—")]),t._v(" "),a("li",[t._v("PrWr: å¤„ç†å™¨è¯·æ±‚"),a("strong",[t._v("å†™")]),t._v("ä¸€ä¸ªç¼“å­˜å—")])]),t._v(" "),a("p",[t._v("æ€»çº¿å¯¹cacheçš„è¯·æ±‚äº‹ä»¶:")]),t._v(" "),a("ol",[a("li",[t._v("BusRdï¼šæ¢å™¨ç›‘å¬åˆ° è¿™å—ç¼“å­˜å—è¢«å…¶ä»–cpuè¯»äº†")]),t._v(" "),a("li",[t._v("BusRdXï¼šå—…æ¢å™¨ç›‘å¬åˆ° è¯¥ç¼“å­˜å—è¢«åˆ«çš„cpuæ”¹äº†")]),t._v(" "),a("li",[t._v("Flushï¼šå—…æ¢å™¨é€šçŸ¥ å›å†™æ•´ä¸ªç¼“å­˜åˆ°ä¸»å†…å­˜")])]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-01-144011.png",alt:"image-20191101224011364"}}),t._v(" "),a("h3",{attrs:{id:"å¯»å€ç©ºé—´"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯»å€ç©ºé—´"}},[t._v("#")]),t._v(" å¯»å€ç©ºé—´")]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://blog.csdn.net/lvyibin890/article/details/82217193",target:"_blank",rel:"noopener noreferrer"}},[t._v("è™šæ‹Ÿå†…å­˜ä¸ç‰©ç†å†…å­˜çš„è”ç³»ä¸åŒºåˆ«"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ğŸ‘†è¿™ç¯‡æ–‡ç« å¾ˆå¥½çš„è§£é‡Šäº†è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„å…³ç³»ï¼›")]),t._v(" "),a("p",[t._v("å¯»å€æ­¥éª¤ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"30%"},attrs:{src:"/Users/keyang/Library/Application Support/typora-user-images/image-20191221214204303.png",alt:"image-20191221214204303"}}),t._v(" "),a("p",[t._v("è¿™é‡Œçš„é€»è¾‘å†…å­˜æŒ‡çš„æ˜¯è™šæ‹Ÿåœ°å€!!!;ç¨‹åºæ—¶ä½¿ç”¨çš„åœ°å€ç§°ä¸º"),a("strong",[t._v("è™šæ‹Ÿåœ°å€æˆ–é€»è¾‘åœ°å€")]),t._v("ï¼›")]),t._v(" "),a("p",[t._v("è€Œè®¡ç®—æœºç‰©ç†å†…å­˜çš„è®¿é—®åœ°å€åˆ™ç§°ä¸º"),a("strong",[t._v("å®åœ°å€æˆ–ç‰©ç†åœ°å€")]),t._v("ï¼›")]),t._v(" "),a("p",[t._v("å‡è®¾ä¸€æ®µç¨‹åºä¸ºï¼š"),a("code",[t._v("int n = *p;")]),t._v(" ç¼–è¯‘ä¸ºæ±‡ç¼–æŒ‡ä»¤åä¸ºï¼š"),a("code",[t._v("mov eax,[ebx]")]),t._v("ã€‚å°†ebxåœ°å€é‡Œçš„æ•°æ®è¯»å–å‡ºæ¥ï¼Œæ”¾åˆ°eaxè¿™ä¸ªå¯„å­˜å™¨é‡Œã€‚")]),t._v(" "),a("p",[t._v("è®¡ç®—æœºå¯»å€å°±æ˜¯å»é€»è¾‘å†…å­˜ï¼ˆ"),a("strong",[t._v("è™šæ‹Ÿåœ°å€")]),t._v("ï¼‰é‡Œé¢å¯»æ‰¾"),a("strong",[t._v("ebx")]),t._v("è¿™ä¸ªåœ°å€çš„å€¼ã€‚")]),t._v(" "),a("p",[t._v("æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åˆ†é…æœ‰ä¸€ä¸ªå›ºå®šå¤§å°çš„"),a("strong",[t._v("è™šæ‹Ÿåœ°å€")]),t._v("ï¼Œè¿™ä¸ªå¤§å°å’Œæ“ä½œç³»ç»Ÿæœ‰å…³ï¼Œæ¯”å¦‚4gã€‚ä½†æ˜¯è¿™ä¸ªå¤§å°å¯¹åº”çš„ç‰©ç†å†…å­˜å¯èƒ½å¾ˆå°ã€‚")]),t._v(" "),a("p",[t._v("CPUåœ¨æ‰§è¡ŒæŒ‡ä»¤æ—¶éœ€è¦å…ˆå°†æŒ‡ä»¤çš„é€»è¾‘åœ°å€å˜æ¢ä¸ºç‰©ç†åœ°å€ï¼Œæ‰èƒ½å¯¹ç›¸åº”çš„å­˜å‚¨å•å…ƒè¿›è¡Œæ•°æ®çš„è¯»å–æˆ–è€…å†™å…¥ã€‚")]),t._v(" "),a("p",[t._v("ä½†é€»è¾‘åœ°å€çš„å€¼å¹¶ä¸ä¸€å®šä¼šå’Œç‰©ç†å†…å­˜ä¸€ä¸€å¯¹åº”ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯èƒ½ä¸å­˜åœ¨ç‰©ç†å†…å­˜é‡Œã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœä¸å­˜åœ¨ç‰©ç†å†…å­˜ä¸Šï¼Œå°±ä¼šé€šè¿‡åˆ†é¡µï¼Œå’Œåšäº¤æ¢å¤„ç†ã€‚ ï¼ˆ==è¿™ä¸€å—çš„åŸç†è¿˜ä¸æ˜¯å¾ˆç†è§£==ï¼‰")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-12-21-144509.jpg",alt:"img"}})]),t._v(" "),a("h2",{attrs:{id:"è®¡ç®—æœºç½‘ç»œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¡ç®—æœºç½‘ç»œ"}},[t._v("#")]),t._v(" è®¡ç®—æœºç½‘ç»œ")]),t._v(" "),a("p",[t._v("ç½‘ç»œ7å±‚æ¶æ„çš„ç”±æ¥")]),t._v(" "),a("h3",{attrs:{id:"tcpåè®®-æ»‘åŠ¨çª—å£æ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcpåè®®-æ»‘åŠ¨çª—å£æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" TCPåè®® - æ»‘åŠ¨çª—å£æ–¹æ¡ˆ")]),t._v(" "),a("blockquote",[a("p",[t._v("è§£å†³çš„é—®é¢˜")])]),t._v(" "),a("p",[t._v("å› ä¸ºç½‘ç»œä¼ è¾“çš„æ˜¯ä¸å¯é çš„ï¼Œä¸ºäº†é¿å…ä¸¢åŒ…ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹å‘é€çš„æ•°æ®éœ€è¦è¿›è¡Œç›¸äº’ç¡®è®¤çš„ï¼›")]),t._v(" "),a("p",[t._v("ä½†å¦‚æœæ¯æ¬¡å‘é€ä¸€ä¸ªåŒ…ï¼Œå°±å¾—ç­‰å¾…ç¡®è®¤å†å‘ä¸‹ä¸€ä¸ªåŒ…ï¼Œå°±ä¼šå‡ºç°æ•ˆç‡å¾ˆä½ã€ååé‡å¾ˆå°çš„é—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥éœ€è¦å¹¶è¡Œå‘é€ï¼Œç”±æ­¤å¼•å…¥äº†æ»‘åŠ¨çª—å£çš„æ¦‚å¿µã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("æ»‘åŠ¨çª—å£åŸºæœ¬æ¦‚å¿µ")])]),t._v(" "),a("p",[t._v("å‘é€æ–¹å’Œæ¥æ”¶æ–¹å„è‡ªç»´æŠ¤äº†è‡ªå·±çš„ç¼“å†²åŒºã€‚")]),t._v(" "),a("p",[t._v("åŒå‘ç¡®å®šäº†"),a("code",[t._v("å‘é€")]),t._v("å’Œ"),a("code",[t._v("æ¥æ”¶ack")]),t._v("çš„åè®®ï¼›")]),t._v(" "),a("p",[t._v("åŒå‘ç¡®å®šäº†åŒæ—¶å‘é€çš„æœ€å¤§æ•°é‡ï¼›")]),t._v(" "),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-12-22-052227.png",alt:"image-20191222132226882"}}),t._v(" "),a("p",[t._v("â¬†ï¸å›¾æ‰€ç¤ºï¼Œçª—å£é‡Œå§‹ç»ˆåªæœ‰7ä¸ªåŒ…çš„å¤§å°ã€‚åªæœ‰æ•°æ®åŒ…ç»è¿‡å‘é€ç¡®è®¤åï¼Œçª—å£æ‰å¯ä»¥æ»‘åŠ¨åˆ°ä¸‹ä¸€ä½ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("ä¸¢åŒ…çš„è§£å†³åŠæ³•")])]),t._v(" "),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-12-22-044751.png",alt:"image-20191222124749673"}}),t._v(" "),a("h2",{attrs:{id:"jvm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvm"}},[t._v("#")]),t._v(" JVM")]),t._v(" "),a("blockquote",[a("p",[t._v("https://www.processon.com/view/5c749debe4b0f9fba6921d15?fromnew=1")])]),t._v(" "),a("h3",{attrs:{id:"jdkã€jreã€jvmçš„åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jdkã€jreã€jvmçš„åŒºåˆ«"}},[t._v("#")]),t._v(" JDKã€JREã€JVMçš„åŒºåˆ«")]),t._v(" "),a("p",[t._v("JDKåŒ…å«JREï¼ŒJREåŒ…å«JVMã€‚")]),t._v(" "),a("p",[t._v("JDKæ˜¯Javaå¼€å‘çš„å·¥å…·åŒ…ï¼ˆJava Develop Kitï¼‰")]),t._v(" "),a("p",[t._v("JREæä¾›äº†Javaè¿è¡Œçš„ç¯å¢ƒï¼ˆJava Runtime Enviorment)")]),t._v(" "),a("p",[t._v("JVMåˆ™æ˜¯ä¸€å°è™šæ‹Ÿæœºï¼Œä»–ä»è½¯ä»¶çš„å±‚é¢ä¸Šï¼Œåœ¨è™šæ‹Ÿæœºå†…éƒ¨å¸®æˆ‘ä»¬æŠŠJDKç¼–è¯‘å‡ºæ¥çš„classæ–‡ä»¶ï¼Œè½¬æ¢ä¸ºå¯ä»¥è¢«å½“å‰æ“ä½œç³»ç»Ÿè¯†åˆ«çš„æœºå™¨ç ã€‚æ¢å¥è¯è¯´ï¼Œä»–å†…éƒ¨å¸®åŠ©æˆ‘ä»¬å±è”½äº†ä¸€äº›æ“ä½œç³»ç»Ÿå±‚é¢ä¸Šçš„åŒºåˆ«ï¼Œè®©æˆ‘ä»¬çš„ç¨‹åºèƒ½å¤Ÿ"),a("strong",[t._v("è·¨å¹³å°è¿è¡Œ")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("JVMåŒ…å«äº†3ä¸ªéƒ¨åˆ†ï¼šç±»åŠ è½½å™¨å­ç³»ç»Ÿã€è¿è¡Œæ—¶æ•°æ®åŒºã€æ‰§è¡Œå¼•æ“ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-10-26-071216.png",alt:"image-20191026151216502"}}),t._v(" "),a("h3",{attrs:{id:"jvmå†…å­˜åŒºåŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvmå†…å­˜åŒºåŸŸ"}},[t._v("#")]),t._v(" JVMå†…å­˜åŒºåŸŸ")]),t._v(" "),a("p",[t._v("è¿è¡Œæ—¶æ•°æ®åŒºæ˜¯JVMçš„æ ¸å¿ƒï¼Œæ•´ä½“çš„ç»“æ„å¦‚ä¸‹ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-06-100726.png",alt:"image-20191106180725123"}})]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-10-26-042632.png",alt:"image-20191026122631783"}}),t._v(" "),a("p",[a("strong",[t._v("Javaæ ˆ")]),t._v("ï¼ˆè™šæ‹Ÿæœºæ ˆï¼‰ï¼šJavaä¼šç»™æ¯ä¸€ä¸ªè¿è¡Œçš„çº¿ç¨‹åˆ†é…ä¸€ä¸ªæ ˆï¼Œè¿™ä¸ªæ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ ˆé’ˆ")]),t._v("ï¼šåœ¨æ ˆé‡Œé¢ï¼Œå­˜æ”¾æœ‰å¾ˆå¤šæ ˆå¸§ï¼Œæ¯ä¸ªæ–¹æ³•è¿è¡Œæ—¶éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ ˆå¸§å…¥æ ˆï¼Œä¿è¯æ¯ä¸ªæ–¹æ³•æœ‰è‡ªå·±ç‹¬ç«‹çš„ä½œç”¨åŸŸï¼›æ ˆå¸§é‡Œå¯ä»¥å­˜å‚¨äº†javaæ–¹æ³•è¿è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ï¼ˆå±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ•°æ ˆï¼ŒåŠ¨æ€é“¾æ¥ï¼Œæ–¹æ³•å‡ºå£ç­‰ï¼‰")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-10-26-063421.png",alt:"image-20191026143421183"}}),t._v(" "),a("p",[a("strong",[t._v("å±€éƒ¨å˜é‡è¡¨")]),t._v("ï¼šä¿å­˜æ–¹æ³•å†…éƒ¨çš„ä¸´æ—¶å˜é‡ï¼Œæ¯”å¦‚ï¼ša=1;b=2;c=new Math()`ç­‰")]),t._v(" "),a("p",[a("strong",[t._v("æ“ä½œæ•°æ ˆ")]),t._v("ï¼šjvmæ‰§è¡Œå¼•æ“ä¼šç”¨åˆ°ï¼Œå­˜æ”¾ä¸€äº›æ“ä½œç¬¦è¿ç®—ï¼›")]),t._v(" "),a("p",[a("strong",[t._v("æœ¬åœ°æ–¹æ³•æ ˆ")]),t._v("ï¼šå’ŒJavaæ ˆçš„æ¦‚å¿µç±»ä¼¼ï¼Œä¹Ÿæ˜¯æ¯ä¸ªçº¿ç¨‹ç§æœ‰ã€‚ä½†æ˜¯å®ƒé‡Œé¢å­˜æ”¾çš„éƒ½æ˜¯ä¸€äº›nativeçš„æ–¹æ³•ä¿¡æ¯ã€‚")]),t._v(" "),a("p",[t._v("**ç¨‹åºè®¡æ•°å™¨ï¼š**ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰ï¼Œä½œç”¨ä¸»è¦æ˜¯ä¸ºäº†è®°å½•å½“å‰çº¿ç¨‹è¿è¡Œåˆ°å“ªä¸€è¡Œä»£ç ã€‚å› ä¸ºæ¯ä¸ªçº¿ç¨‹çš„æ‰§è¡Œéƒ½ä¾èµ–äºCPUçš„è°ƒåº¦ï¼Œæ˜¯éœ€è¦æŠ¢å CPUèµ„æºçš„ï¼Œæ‰€ä»¥çº¿ç¨‹ç»å¸¸ä¼šå› ä¸ºå¤±å»CPUèµ„æºè€Œè¢«æŒ‚èµ·ã€‚å½“çº¿ç¨‹é‡å¯è·å–åˆ°è¿è¡Œèµ„æºæ—¶ï¼Œå°±è¦æ ¹æ®ç¨‹åºè®¡æ•°å™¨æ¥ç»§ç»­æ‰§è¡Œã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ–¹æ³•åŒº")]),t._v("ï¼šæ–¹æ³•åŒºé‡Œå­˜æ”¾çš„æ˜¯ç±»å…ƒä¿¡æ¯ã€é™æ€å˜é‡ã€å¸¸é‡ç­‰ã€‚")]),t._v(" "),a("p",[t._v("â€‹\té™æ€å˜é‡")]),t._v(" "),a("p",[t._v("â€‹\tå¸¸é‡ï¼š static finalçš„")]),t._v(" "),a("p",[t._v("â€‹\tç±»å…ƒä¿¡æ¯ï¼šä¸€ä¸ªç±»çš„ç»„æˆä¿¡æ¯ã€‚ï¼ˆç±»åã€ç±»ä¿®é¥°ç¬¦ã€æ–¹æ³•åç­‰ï¼‰")]),t._v(" "),a("p",[a("strong",[t._v("å †")]),t._v(": å †å†…å­˜æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œç”¨æ¥å­˜æ”¾javaè¿è¡Œæ—¶åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œå¯¹è±¡çš„â€œå†…å­˜åœ°å€â€å­˜æ”¾åœ¨æ ˆå±€éƒ¨å˜é‡è¡¨é‡Œé¢ã€‚")]),t._v(" "),a("p",[t._v("â€‹\tå †å†…å­˜ç»“æ„åŒ…æ‹¬ï¼šæ–°ç”Ÿä»£ã€formã€toã€æ°¸ä¹…ä»£ï¼›")]),t._v(" "),a("img",{staticStyle:{zoom:"60%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-10-26-084454.png",alt:"image-20191026164453593"}}),t._v(" "),a("p",[t._v("å †æº¢å‡º")]),t._v(" "),a("p",[t._v("æ ˆæº¢å‡º")]),t._v(" "),a("p",[t._v("å†…å­˜æº¢å‡ºä¸å†…å­˜æ³„éœ²çš„åŒºåˆ«")]),t._v(" "),a("h3",{attrs:{id:"gcåƒåœ¾å›æ”¶æœºåˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gcåƒåœ¾å›æ”¶æœºåˆ¶"}},[t._v("#")]),t._v(" GCåƒåœ¾å›æ”¶æœºåˆ¶")]),t._v(" "),a("p",[t._v("Javaåƒåœ¾å›æ”¶åˆ†ä¸ºminorå›æ”¶å’Œmajorå›æ”¶ï¼Œä¸¤ç§å›æ”¶çš„æœºåˆ¶ä¸åŒï¼Œå›æ”¶çš„å¯¹è±¡ä¸»ä½“åœ¨å †å†…å­˜æ¨¡å‹ä¸­ä¹Ÿä¸ä¸€æ ·ã€‚")]),t._v(" "),a("p",[t._v("ğŸ‘†Javaå †å†…å­˜æ¨¡å‹åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼š")]),t._v(" "),a("p",[t._v("æ–°ç”Ÿä»£å¤§æ¦‚å å †å†…å­˜çš„1/3ï¼Œè€å¹´ä»£å å†…å­˜çš„2/3ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ–°ç”Ÿä»£")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("ç”±Edenå’ŒSurvior Spaceç»„æˆã€‚åˆå§‹å¤§å°ç”±-Xmnå‚æ•°è®¾å®šã€‚")]),t._v(" "),a("p",[t._v("å·¥ä½œæœºåˆ¶ï¼š")]),t._v(" "),a("p",[t._v("EdenåŒºå¤§çº¦å æ–°ç”Ÿä»£å†…å­˜ç©ºé—´çš„8/10ï¼Œjava newå‡ºæ¥çš„å¯¹è±¡éƒ½ä¼šå…ˆæ”¾å…¥åˆ°EdenåŒºï¼›å½“Edenå†…å­˜ä¸å¤Ÿæ—¶ï¼Œjvmä¼šå¯åŠ¨ä¸€æ¬¡minor gcã€‚Minor GCä¼šæŠŠé‚£äº›å†…å­˜ä¸­ä¸å†æœ‰å¼•ç”¨çš„å¯¹è±¡éƒ½å›æ”¶ï¼ˆå›æ”¶ç®—æ³•ä¸‹é¢ä¼šè®²åˆ°ï¼‰ï¼Œè€Œé‚£äº›æœ‰ç”¨çš„å¯¹è±¡ä¼šè¢«å…¨éƒ¨ç§»åŠ¨åˆ°"),a("code",[t._v("S0 Space")]),t._v("ã€‚ç¬¬äºŒæ¬¡gcçš„æ—¶å€™ï¼Œä¼šæŠŠEdenåŒºå’ŒS0 Spaceé‡Œå­˜æ´»çš„å¯¹è±¡ä¸€èµ·ç§»åŠ¨åˆ°S1 Spaceã€‚")]),t._v(" "),a("p",[t._v("å¯¹è±¡åœ¨s0 spaceå’Œs1 spaceæ¥å›ç§»åŠ¨ï¼Œæ¯æ¬¡è½¬ç§»æ—¶ï¼Œè¿™äº›å¯¹è±¡éƒ½ä¼šæ›´æ–°gcçš„å¹´é¾„æ ‡å¿—ã€‚å½“gcå¹´é¾„è¾¾åˆ°15æ—¶ï¼Œä¼šå°†è¯¥å¯¹è±¡ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœs0å’Œs1çš„å†…å­˜åŒºåŸŸæ”¾ä¸ä¸‹å­˜æ´»çš„å¯¹è±¡æ—¶ï¼Œä¼šå»è€å¹´ä»£å†…å­˜ä¸­å€Ÿç”¨å†…å­˜ï¼Œç­‰ä¸‹ä¸€æ¬¡gcåå†è¿˜ç»™è€å¹´ä»£ã€‚è€Œè€å¹´ä»£ä¹Ÿä¼šä¸ºäº†ç¡®ä¿minor gcæ“ä½œèƒ½å®Œæˆï¼Œé¢„ç•™äº†ä¸€éƒ¨åˆ†å†…å­˜ä½œä¸ºä¿ç•™åŒºåŸŸã€‚è¿™ç§è¡Œä¸ºæˆä¸ºï¼š"),a("code",[t._v("æ–°ç”Ÿä»£æœé›†æ‹…ä¿")]),t._v("ã€‚å¦‚æœé¢„ç•™æ“ä½œæ— æ³•å®Œæˆï¼Œä¹Ÿä¼šè§¦å‘Major GCã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è€å¹´ä»£")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("è€å¹´ä»£åŒºåŸŸä¸­çš„å¯¹è±¡å­˜æ´»ç‡å¾ˆé«˜ï¼Œä¸€èˆ¬å›æ”¶çš„å‘¨æœŸå¾ˆé•¿ã€‚")]),t._v(" "),a("p",[t._v("Major GCå› ä¸ºè¦å¯¹æ‰€æœ‰çš„å¯¹è±¡è¿›è¡Œå›æ”¶ï¼Œå¾ˆæ¶ˆè€—æ—¶é—´ï¼Œæ‰€ä»¥è¦å°½é‡é¿å…Major GCã€‚jvmè°ƒä¼˜çš„è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œå°±æ˜¯å‡å°‘Full GCçš„æ¬¡æ•°ã€‚")]),t._v(" "),a("h3",{attrs:{id:"gcå›æ”¶åˆ¤æ–­"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gcå›æ”¶åˆ¤æ–­"}},[t._v("#")]),t._v(" GCå›æ”¶åˆ¤æ–­")]),t._v(" "),a("h4",{attrs:{id:"å¼•ç”¨è®¡æ•°æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼•ç”¨è®¡æ•°æ³•"}},[t._v("#")]),t._v(" "),a("s",[t._v("å¼•ç”¨è®¡æ•°æ³•")])]),t._v(" "),a("h4",{attrs:{id:"å¯è¾¾æ€§åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯è¾¾æ€§åˆ†æ"}},[t._v("#")]),t._v(" å¯è¾¾æ€§åˆ†æ")]),t._v(" "),a("h4",{attrs:{id:"gc-rootsæ ¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gc-rootsæ ¹"}},[t._v("#")]),t._v(" GC Rootsæ ¹")]),t._v(" "),a("p",[t._v("javaçš„åƒåœ¾å›æ”¶æœºåˆ¶ä¸­ï¼Œåˆ¤æ–­1ä¸ªå¯¹è±¡æ˜¯å¦å¯è¢«å›æ”¶ï¼Œå¹¶ä¸æ˜¯çœ‹æœ‰æ²¡æœ‰å¯¹è±¡å¯¹å…¶å¼•ç”¨ï¼Œè€Œæ˜¯é€šè¿‡"),a("code",[t._v("å¯è¾¾æ€§åˆ†æ")]),t._v("ï¼Œçœ‹è¿™ä¸ªå¯¹è±¡æœ‰æ²¡æœ‰åˆ°GC Rootçš„å¼•ç”¨é“¾ç›¸è¿ã€‚")]),t._v(" "),a("p",[t._v("æ€ä¹ˆç†è§£è¿™æ®µè¯ï¼Ÿå°±æ˜¯è¯´ï¼Œä»GC Rootsæ ¹å‘ä¸‹æ‰¾ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ°ä¸€æ¡è·¯ï¼Œè¾¾åˆ°è¿™ä¸ªå¯¹è±¡ã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œè¯´æ˜æ˜¯æœ‰å¼•ç”¨é“¾ç›¸è¿çš„ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-10-26-132038.png",alt:"Ã¨Â¿Ã©Ã¥Ã¥Â¾Ã§Ã¦Ã¨Â¿Â°"}}),t._v(" "),a("p",[t._v("å¯ä»¥ä½œä¸ºGC Rootsæ ¹çš„å¯¹è±¡ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼›ä»»æ„æ–¹æ³•é‡ŒC c = new C();")]),t._v(" "),a("li",[t._v("æ–¹æ³•åŒºä¸­é™æ€å˜é‡å¼•ç”¨çš„å¯¹è±¡ï¼›static B b = new B();")]),t._v(" "),a("li",[t._v("æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼› static final A a = new A();")]),t._v(" "),a("li",[t._v("Nativeæ–¹æ³•å¼•ç”¨çš„å¯¹è±¡ï¼›")])]),t._v(" "),a("h4",{attrs:{id:"å¼•ç”¨å…³ç³»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼•ç”¨å…³ç³»"}},[t._v("#")]),t._v(" å¼•ç”¨å…³ç³»")]),t._v(" "),a("blockquote",[a("p",[t._v("https://blog.csdn.net/luzhensmart/article/details/81431212")])]),t._v(" "),a("p",[t._v("â‘´å¼ºå¼•ç”¨ï¼ˆStrongReferenceï¼‰")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("A a = new A()\n")])])]),a("p",[t._v("å¼ºå¼•ç”¨æ˜¯ä½¿ç”¨æœ€æ™®éçš„å¼•ç”¨ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å…·æœ‰å¼ºå¼•ç”¨ï¼Œé‚£åƒåœ¾å›æ”¶å™¨ç»ä¸ä¼šå›æ”¶å®ƒã€‚å½“å†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJavaè™šæ‹Ÿæœºå®æ„¿æŠ›å‡ºOutOfMemoryErroré”™è¯¯ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("â‘µè½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SoftReference")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" sr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SoftReference")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å¦‚æœä¸€ä¸ªå¯¹è±¡åªå…·æœ‰è½¯å¼•ç”¨ï¼Œåˆ™å†…å­˜ç©ºé—´è¶³å¤Ÿï¼Œåƒåœ¾å›æ”¶å™¨å°±ä¸ä¼šå›æ”¶å®ƒï¼›å¦‚æœå†…å­˜ç©ºé—´ä¸è¶³äº†ï¼Œå°±ä¼šå›æ”¶è¿™äº›å¯¹è±¡çš„å†…å­˜ã€‚åªè¦åƒåœ¾å›æ”¶å™¨æ²¡æœ‰å›æ”¶å®ƒï¼Œè¯¥å¯¹è±¡å°±å¯ä»¥è¢«ç¨‹åºä½¿ç”¨ã€‚")]),t._v(" "),a("p",[t._v("åº”ç”¨åœºæ™¯ï¼šè½¯å¼•ç”¨å¯ç”¨æ¥æ­é…ç¼“å­˜æ¥åšï¼ŒåŒæ—¶é¿å…å†…å­˜æº¢å‡ºã€‚")]),t._v(" "),a("p",[t._v("â‘¶å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeakReference")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" sr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeakReference")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å¼±å¼•ç”¨ä¸è½¯å¼•ç”¨çš„åŒºåˆ«åœ¨äºï¼šåªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡æ‹¥æœ‰æ›´çŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨åƒåœ¾å›æ”¶å™¨çº¿ç¨‹æ‰«æå®ƒæ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°äº†åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸å¦ï¼Œéƒ½ä¼šå›æ”¶å®ƒçš„å†…å­˜ã€‚ä¸è¿‡ï¼Œç”±äºåƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ï¼Œå› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å‘ç°é‚£äº›åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚")]),t._v(" "),a("h4",{attrs:{id:"finalizeæŠ¢æ•‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#finalizeæŠ¢æ•‘"}},[t._v("#")]),t._v(" finalizeæŠ¢æ•‘")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-10-26-132358.png",alt:"img"}})]),t._v(" "),a("h4",{attrs:{id:"gc-logåˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gc-logåˆ†æ"}},[t._v("#")]),t._v(" GC logåˆ†æ")]),t._v(" "),a("p",[t._v("å…è´¹çš„GCæ—¥å¿—å›¾å½¢åˆ†æå·¥å…·æ¨èä¸‹é¢2ä¸ªï¼š")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://juejin.im/post/%5Bhttps://github.com/chewiebug/GCViewer%5D(https://github.com/chewiebug/GCViewer)",target:"_blank",rel:"noopener noreferrer"}},[t._v("GCViewer"),a("OutboundLink")],1),t._v("ï¼Œä¸‹è½½jaråŒ…ç›´æ¥è¿è¡Œ")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://gceasy.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("gceasy"),a("OutboundLink")],1),t._v("ï¼Œwebå·¥å…·ï¼Œä¸Šä¼ GCæ—¥å¿—åœ¨çº¿ä½¿ç”¨")])]),t._v(" "),a("h2",{attrs:{id:"jmm-javaå†…å­˜æ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jmm-javaå†…å­˜æ¨¡å‹"}},[t._v("#")]),t._v(" JMMâ€”â€”Javaå†…å­˜æ¨¡å‹")]),t._v(" "),a("h3",{attrs:{id:"jmmæ¶æ„è§„èŒƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jmmæ¶æ„è§„èŒƒ"}},[t._v("#")]),t._v(" JMMæ¶æ„è§„èŒƒ")]),t._v(" "),a("p",[t._v("JMMæ˜¯ä¸€ç§æ¶æ„ï¼Œä¹Ÿæ˜¯ä¸€å¥—è§„èŒƒã€‚å®ƒå±è”½äº†ä¸åŒCPUå†…æ ¸çš„æ¶æ„é—®é¢˜ï¼Œé€šè¿‡å®ç°MESIåè®®ï¼Œè§£å†³äº†ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿè§£å†³äº†å¤šå¹¶å‘ç¼–ç¨‹çš„å¯è§æ€§é—®é¢˜ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"45%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-10-31-225946.png",alt:"image-20191101065946596"}}),t._v(" "),a("p",[t._v("ä»ä¸Šå›¾é‡Œå¯ä»¥çœ‹åˆ°ï¼Œå¤šçº¿ç¨‹è¯»å†™ä¸»å†…å­˜å˜é‡ç»è¿‡äº†ä¸€ç³»åˆ—æ“ä½œã€‚è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ˜¯JMMå°è£…çš„åŸå­æ€§æŒ‡ä»¤ï¼Œä¸»è¦å°±æ˜¯ç”¨æ¥è§£å†³å†…å­˜åŒæ­¥ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è¯»æ“ä½œ")])]),t._v(" "),a("p",[t._v("readæ“ä½œï¼šä»ä¸»å†…å­˜ä¸­è¯»å–å˜é‡")]),t._v(" "),a("p",[t._v("loadæ“ä½œï¼šå°†è¯»å–çš„å€¼å¤åˆ¶å¹¶åŠ è½½åˆ°ç¼“å­˜ä¸­")]),t._v(" "),a("p",[t._v("useï¼šçº¿ç¨‹ä½¿ç”¨ç¼“å­˜ä¸­çš„å˜é‡ï¼›")]),t._v(" "),a("p",[a("strong",[t._v("å†™æ“ä½œ")])]),t._v(" "),a("p",[t._v("assignï¼šä¿®æ”¹ç¼“å­˜ä¸­å˜é‡")]),t._v(" "),a("p",[t._v("storeï¼šå°†ä¿®æ”¹çš„å€¼ä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼›")]),t._v(" "),a("p",[t._v("writeï¼šå°†ç¼“å­˜é‡Œé¢ä¿®æ”¹è¿‡çš„å€¼å†™å›ä¸»å†…å­˜é‡Œï¼›")]),t._v(" "),a("p",[a("strong",[t._v("lockå’Œunlockæ“ä½œ")])]),t._v(" "),a("p",[t._v("lockï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼Œä½œç”¨æ˜¯æŠŠä¸€ä¸ªå…±äº«å˜é‡æ ‡è¯†ä¸ºä¸€ä¸ªçº¿ç¨‹ç‹¬å çŠ¶æ€ã€‚")]),t._v(" "),a("p",[t._v("unlockï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼Œä½œç”¨æ˜¯æŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶æ€çš„å˜é‡é‡Šæ”¾ï¼Œç„¶åå¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é”å®š")]),t._v(" "),a("p",[t._v("JMMä¸­é”çš„éƒ½æ˜¯ç¼“å­˜è¡Œã€‚")]),t._v(" "),a("p",[t._v("volatileå…³é”®åº•å±‚çš„åŸç†å°±æ˜¯é€šè¿‡ä¸Šé¢çš„æŒ‡ä»¤æ¥é€šçŸ¥çº¿ç¨‹æ›´æ–°ç¼“å­˜ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å¹¶å‘çš„ä¸‰å¤§ç‰¹æ€§-åŸå­æ€§ã€å¯è§æ€§ã€ä¸€è‡´æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘çš„ä¸‰å¤§ç‰¹æ€§-åŸå­æ€§ã€å¯è§æ€§ã€ä¸€è‡´æ€§"}},[t._v("#")]),t._v(" å¹¶å‘çš„ä¸‰å¤§ç‰¹æ€§â€”â€”åŸå­æ€§ã€å¯è§æ€§ã€ä¸€è‡´æ€§")]),t._v(" "),a("h4",{attrs:{id:"æœ‰åºæ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æœ‰åºæ€§"}},[t._v("#")]),t._v(" æœ‰åºæ€§")]),t._v(" "),a("p",[t._v("åœ¨Javaå†…å­˜æ¨¡å‹ä¸­ï¼Œå…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹æŒ‡ä»¤è¿›è¡Œ"),a("strong",[t._v("é‡æ’åº")]),t._v("ï¼Œä½†æ˜¯é‡æ’åºè¿‡ç¨‹ä¸ä¼šå½±å“åˆ°å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œï¼Œå´ä¼šå½±å“åˆ°å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚")]),t._v(" "),a("h5",{attrs:{id:"é‡æ’åº"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é‡æ’åº"}},[t._v("#")]),t._v(" é‡æ’åº")]),t._v(" "),a("blockquote",[a("p",[t._v("https://blog.csdn.net/liuguangqiang/article/details/52153096")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-01-022800.png",alt:"image-20191101102800175"}})]),t._v(" "),a("p",[t._v("è™½ç„¶JMMå…è®¸ç¼–è¯‘å™¨è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯ä¹Ÿéœ€è¦éµå¾ªå¯¹åº”çš„è§„åˆ™ï¼šhappens-beforeè§„åˆ™ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("ï¼‰ç¨‹åºé¡ºåºè§„åˆ™ï¼šä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ¯ä¸ªæ“ä½œï¼Œhappens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beforeäºè¯¥çº¿ç¨‹ä¸­çš„ä»»æ„åç»­æ“ä½œã€‚\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("ï¼‰ç›‘è§†å™¨é”è§„åˆ™ï¼šå¯¹ä¸€ä¸ªé”çš„è§£é”ï¼Œhappens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beforeäºéšåå¯¹è¿™ä¸ªé”çš„åŠ é”ã€‚\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("ï¼‰"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v("å˜é‡è§„åˆ™ï¼šå¯¹ä¸€ä¸ª"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v("åŸŸçš„å†™ï¼Œhappens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beforeäºä»»æ„åç»­å¯¹è¿™ä¸ª"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v("åŸŸçš„è¯»ã€‚\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("ï¼‰ä¼ é€’æ€§ï¼šå¦‚æœ"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" happens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("before "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v("ï¼Œä¸”"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v(" happens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("before "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("C")]),t._v("ï¼Œé‚£ä¹ˆ"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" happens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("before "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("C")]),t._v("ã€‚\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("ï¼‰"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("è§„åˆ™ï¼šå¦‚æœçº¿ç¨‹"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v("æ‰§è¡Œæ“ä½œ"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ï¼ˆå¯åŠ¨çº¿ç¨‹"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v("ï¼‰ï¼Œé‚£ä¹ˆ"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v("çº¿ç¨‹çš„"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("æ“ä½œhappens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beforeäºçº¿ç¨‹"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v("ä¸­çš„ä»»æ„æ“ä½œã€‚\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("ï¼‰"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("è§„åˆ™ï¼šå¦‚æœçº¿ç¨‹"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v("æ‰§è¡Œæ“ä½œ"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("å¹¶æˆåŠŸè¿”å›ï¼Œé‚£ä¹ˆçº¿ç¨‹"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v("ä¸­çš„ä»»æ„æ“ä½œhappens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beforeäºçº¿ç¨‹"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v("ä»"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("æ“ä½œæˆåŠŸè¿”å›ã€‚"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("ï¼‰ç¨‹åºé¡ºåºè§„åˆ™ï¼šä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ¯ä¸ªæ“ä½œï¼Œhappens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beforeäºè¯¥çº¿ç¨‹ä¸­çš„ä»»æ„åç»­æ“ä½œã€‚\n\n")])])]),a("p",[t._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼š")]),t._v(" "),a("p",[t._v("1ï¼‰å¦‚æœä¸€ä¸ªæ“ä½œhappens-beforeå¦ä¸€ä¸ªæ“ä½œï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªæ“ä½œçš„æ‰§è¡Œç»“æœå°†å¯¹ç¬¬äºŒä¸ªæ“ä½œå¯è§ï¼Œè€Œä¸”ç¬¬ä¸€ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºæ’åœ¨ç¬¬äºŒä¸ªæ“ä½œä¹‹å‰ã€‚\n2ï¼‰ä¸¤ä¸ªæ“ä½œä¹‹é—´å­˜åœ¨happens-beforeå…³ç³»ï¼Œå¹¶ä¸æ„å‘³ç€Javaå¹³å°çš„å…·ä½“å®ç°å¿…é¡»è¦æŒ‰ç…§happens-beforeå…³ç³»æŒ‡å®šçš„é¡ºåºæ¥æ‰§è¡Œã€‚==å¦‚æœé‡æ’åºä¹‹åçš„æ‰§è¡Œç»“æœï¼Œä¸æŒ‰happens-beforeå…³ç³»æ¥æ‰§è¡Œçš„ç»“æœä¸€è‡´ï¼Œé‚£ä¹ˆè¿™ç§é‡æ’åºå¹¶ä¸éæ³•ã€‚==")]),t._v(" "),a("p",[t._v("æ‰€ä»¥ï¼š")]),t._v(" "),a("p",[t._v("ä»å•ä¸ªçº¿ç¨‹çš„è§’åº¦çœ‹ï¼Œæ˜¯å¯ä»¥ä¿è¯æœ‰åºçš„ã€‚ä½†æ˜¯å¦‚æœè§‚å¯Ÿå¤šçº¿ç¨‹ï¼Œæ•´ä¸ªç¨‹åºå°±æ— æ³•ä¿è¯æœ‰åºã€‚")]),t._v(" "),a("p",[a("code",[t._v("volatile")]),t._v("å…³é”®å­—å¯ä»¥ä¿è¯ä¸€å®šçš„â€œæœ‰åºæ€§â€ï¼Œå› ä¸º"),a("code",[t._v("volatile")]),t._v("å…³é”®å­—ä¼šç¦æ­¢æŒ‡ä»¤é‡æ’ã€‚")]),t._v(" "),a("p",[a("code",[t._v("synchronized")]),t._v("å’Œ"),a("code",[t._v("lock")]),t._v("å…³é”®å­—ä¿è¯åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹æ“ä½œï¼Œä»è€Œä¹Ÿä¿è¯äº†æœ‰åºæ€§ã€‚")]),t._v(" "),a("h2",{attrs:{id:"å¤šçº¿ç¨‹-æœåŠ¡çŸ¥è¯†æ€»ç»“-å¤šçº¿ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¤šçº¿ç¨‹-æœåŠ¡çŸ¥è¯†æ€»ç»“-å¤šçº¿ç¨‹"}},[t._v("#")]),t._v(" [å¤šçº¿ç¨‹](./æœåŠ¡çŸ¥è¯†æ€»ç»“ - å¤šçº¿ç¨‹)")]),t._v(" "),a("h2",{attrs:{id:"cpuå¯†é›†å‹-vs-ioå¯†é›†å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpuå¯†é›†å‹-vs-ioå¯†é›†å‹"}},[t._v("#")]),t._v(" CPUå¯†é›†å‹ vs IOå¯†é›†å‹")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å¯ä»¥æŠŠä»»åŠ¡åˆ†ä¸ºè®¡ç®—å¯†é›†å‹å’ŒIOå¯†é›†å‹ã€‚")]),t._v(" "),a("p",[t._v("è®¡ç®—å¯†é›†å‹ä»»åŠ¡çš„ç‰¹ç‚¹æ˜¯è¦è¿›è¡Œå¤§é‡çš„è®¡ç®—ï¼Œæ¶ˆè€—CPUèµ„æºï¼Œæ¯”å¦‚è®¡ç®—åœ†å‘¨ç‡ã€å¯¹è§†é¢‘è¿›è¡Œé«˜æ¸…è§£ç ç­‰ç­‰ï¼Œå…¨é CPUçš„è¿ç®—èƒ½åŠ›ã€‚è¿™ç§è®¡ç®—å¯†é›†å‹ä»»åŠ¡è™½ç„¶ä¹Ÿå¯ä»¥ç”¨å¤šä»»åŠ¡å®Œæˆï¼Œä½†æ˜¯ä»»åŠ¡è¶Šå¤šï¼ŒèŠ±åœ¨ä»»åŠ¡åˆ‡æ¢çš„æ—¶é—´å°±è¶Šå¤šï¼ŒCPUæ‰§è¡Œä»»åŠ¡çš„æ•ˆç‡å°±è¶Šä½ï¼Œæ‰€ä»¥ï¼Œè¦æœ€é«˜æ•ˆåœ°åˆ©ç”¨CPUï¼Œè®¡ç®—å¯†é›†å‹ä»»åŠ¡åŒæ—¶è¿›è¡Œçš„æ•°é‡åº”å½“ç­‰äºCPUçš„æ ¸å¿ƒæ•°ã€‚")]),t._v(" "),a("p",[t._v("è®¡ç®—å¯†é›†å‹ä»»åŠ¡ç”±äºä¸»è¦æ¶ˆè€—CPUèµ„æºï¼Œå› æ­¤ï¼Œä»£ç è¿è¡Œæ•ˆç‡è‡³å…³é‡è¦ã€‚Pythonè¿™æ ·çš„è„šæœ¬è¯­è¨€è¿è¡Œæ•ˆç‡å¾ˆä½ï¼Œå®Œå…¨ä¸é€‚åˆè®¡ç®—å¯†é›†å‹ä»»åŠ¡ã€‚å¯¹äºè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œæœ€å¥½ç”¨Cè¯­è¨€ç¼–å†™ã€‚")]),t._v(" "),a("p",[t._v("ç¬¬äºŒç§ä»»åŠ¡çš„ç±»å‹æ˜¯IOå¯†é›†å‹ï¼Œæ¶‰åŠåˆ°ç½‘ç»œã€ç£ç›˜IOçš„ä»»åŠ¡éƒ½æ˜¯IOå¯†é›†å‹ä»»åŠ¡ï¼Œè¿™ç±»ä»»åŠ¡çš„ç‰¹ç‚¹æ˜¯CPUæ¶ˆè€—å¾ˆå°‘ï¼Œä»»åŠ¡çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨ç­‰å¾…IOæ“ä½œå®Œæˆï¼ˆå› ä¸ºIOçš„é€Ÿåº¦è¿œè¿œä½äºCPUå’Œå†…å­˜çš„é€Ÿåº¦ï¼‰ã€‚å¯¹äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œä»»åŠ¡è¶Šå¤šï¼ŒCPUæ•ˆç‡è¶Šé«˜ï¼Œä½†ä¹Ÿæœ‰ä¸€ä¸ªé™åº¦ã€‚å¸¸è§çš„å¤§éƒ¨åˆ†ä»»åŠ¡éƒ½æ˜¯IOå¯†é›†å‹ä»»åŠ¡ï¼Œæ¯”å¦‚Webåº”ç”¨ã€‚")]),t._v(" "),a("h4",{attrs:{id:"cpuå¯†é›†å‹ï¼ˆcpu-boundï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpuå¯†é›†å‹ï¼ˆcpu-boundï¼‰"}},[t._v("#")]),t._v(" CPUå¯†é›†å‹ï¼ˆCPU-boundï¼‰")]),t._v(" "),a("p",[t._v("CPUå¯†é›†å‹ä¹Ÿå«è®¡ç®—å¯†é›†å‹ï¼ŒæŒ‡çš„æ˜¯ç³»ç»Ÿçš„ç¡¬ç›˜ã€å†…å­˜æ€§èƒ½ç›¸å¯¹CPUè¦å¥½å¾ˆå¤šï¼Œæ­¤æ—¶ï¼Œç³»ç»Ÿè¿ä½œå¤§éƒ¨åˆ†çš„çŠ¶å†µæ˜¯CPU Loading 100%ï¼ŒCPUè¦è¯»/å†™I/O(ç¡¬ç›˜/å†…å­˜)ï¼ŒI/Oåœ¨å¾ˆçŸ­çš„æ—¶é—´å°±å¯ä»¥å®Œæˆï¼Œè€ŒCPUè¿˜æœ‰è®¸å¤šè¿ç®—è¦å¤„ç†ï¼ŒCPU Loadingå¾ˆé«˜ã€‚")]),t._v(" "),a("p",[t._v("åœ¨å¤šé‡ç¨‹åºç³»ç»Ÿä¸­ï¼Œå¤§éƒ¨ä»½æ—¶é—´ç”¨æ¥åšè®¡ç®—ã€é€»è¾‘åˆ¤æ–­ç­‰CPUåŠ¨ä½œçš„ç¨‹åºç§°ä¹‹CPU boundã€‚ä¾‹å¦‚ä¸€ä¸ªè®¡ç®—åœ†å‘¨ç‡è‡³å°æ•°ç‚¹ä¸€åƒä½ä»¥ä¸‹çš„ç¨‹åºï¼Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹å½“ä¸­ç»å¤§éƒ¨ä»½æ—¶é—´ç”¨åœ¨ä¸‰è§’å‡½æ•°å’Œå¼€æ ¹å·çš„è®¡ç®—ï¼Œä¾¿æ˜¯å±äºCPU boundçš„ç¨‹åºã€‚")]),t._v(" "),a("p",[t._v("CPU boundçš„ç¨‹åºä¸€èˆ¬è€Œè¨€CPUå ç”¨ç‡ç›¸å½“é«˜ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºä»»åŠ¡æœ¬èº«ä¸å¤ªéœ€è¦è®¿é—®I/Oè®¾å¤‡ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºç¨‹åºæ˜¯å¤šçº¿ç¨‹å®ç°å› æ­¤å±è”½æ‰äº†ç­‰å¾…I/Oçš„æ—¶é—´ã€‚")]),t._v(" "),a("h4",{attrs:{id:"ioå¯†é›†å‹ï¼ˆi-o-boundï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ioå¯†é›†å‹ï¼ˆi-o-boundï¼‰"}},[t._v("#")]),t._v(" IOå¯†é›†å‹ï¼ˆI/O boundï¼‰")]),t._v(" "),a("p",[t._v("IOå¯†é›†å‹æŒ‡çš„æ˜¯ç³»ç»Ÿçš„CPUæ€§èƒ½ç›¸å¯¹ç¡¬ç›˜ã€å†…å­˜è¦å¥½å¾ˆå¤šï¼Œæ­¤æ—¶ï¼Œç³»ç»Ÿè¿ä½œï¼Œå¤§éƒ¨åˆ†çš„çŠ¶å†µæ˜¯CPUåœ¨ç­‰I/O (ç¡¬ç›˜/å†…å­˜) çš„è¯»/å†™æ“ä½œï¼Œæ­¤æ—¶CPU Loadingå¹¶ä¸é«˜ã€‚")]),t._v(" "),a("p",[t._v("I/O boundçš„ç¨‹åºä¸€èˆ¬åœ¨è¾¾åˆ°æ€§èƒ½æé™æ—¶ï¼ŒCPUå ç”¨ç‡ä»ç„¶è¾ƒä½ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºä»»åŠ¡æœ¬èº«éœ€è¦å¤§é‡I/Oæ“ä½œï¼Œè€Œpipelineåšå¾—ä¸æ˜¯å¾ˆå¥½ï¼Œæ²¡æœ‰å……åˆ†åˆ©ç”¨å¤„ç†å™¨èƒ½åŠ›ã€‚")]),t._v(" "),a("h1",{attrs:{id:"æ–‡ä»¶å¥æŸ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ–‡ä»¶å¥æŸ„"}},[t._v("#")]),t._v(" æ–‡ä»¶å¥æŸ„")]),t._v(" "),a("p",[t._v("ä»€ä¹ˆæ˜¯æ–‡ä»¶å¥æŸ„ï¼Ÿ")]),t._v(" "),a("h1",{attrs:{id:"æ³¨è§£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨è§£"}},[t._v("#")]),t._v(" æ³¨è§£")]),t._v(" "),a("p",[t._v("1.æ³¨è§£æ¦‚è¿°")]),t._v(" "),a("p",[t._v("2.è‡ªå®šä¹‰æ³¨è§£")]),t._v(" "),a("p",[t._v("3.ä½¿ç”¨æ³¨è§£å®ç°ORMæ¡†æ¶(å¯¹è±¡å…³ç³»æ˜ å°„)")]),t._v(" "),a("h1",{attrs:{id:"è®¾è®¡æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¾è®¡æ¨¡å¼"}},[t._v("#")]),t._v(" "),a("RouterLink",{attrs:{to:"/è®¾è®¡æ¨¡å¼.html"}},[t._v("è®¾è®¡æ¨¡å¼")])],1),t._v(" "),a("h1",{attrs:{id:"ç½‘ç»œç¼–ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç½‘ç»œç¼–ç¨‹"}},[t._v("#")]),t._v(" ç½‘ç»œç¼–ç¨‹")]),t._v(" "),a("blockquote",[a("p",[t._v("https://gitee.com/dendi.ke/thread-demo/tree/master/src/main/java/com/gs/example/udp")])]),t._v(" "),a("h2",{attrs:{id:"_1-ç½‘ç»œç¼–ç¨‹æ¦‚è¿°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç½‘ç»œç¼–ç¨‹æ¦‚è¿°"}},[t._v("#")]),t._v(" 1.ç½‘ç»œç¼–ç¨‹æ¦‚è¿°")]),t._v(" "),a("p",[t._v("ç½‘ç»œç¼–ç¨‹åº•å±‚å°±æ˜¯å­—èŠ‚çš„ä¼ è¾“")]),t._v(" "),a("h3",{attrs:{id:"åŸºç¡€æ•°æ®ç»“æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€æ•°æ®ç»“æ„"}},[t._v("#")]),t._v(" "),a("strong",[t._v("åŸºç¡€æ•°æ®ç»“æ„")])]),t._v(" "),a("p",[a("code",[t._v("byte")]),t._v("æ˜¯ç½‘ç»œä¼ è¾“ä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹")]),t._v(" "),a("p",[t._v("1byteå "),a("code",[t._v("8ä½")]),t._v("2è¿›åˆ¶æ•°ï¼Œå¤§å°èŒƒå›´æ˜¯ -127 ~ 127.  (2^7 -1)")]),t._v(" "),a("p",[t._v("charå’Œbyteå¯ä»¥ç›¸å…³è½¬æ¢")]),t._v(" "),a("p",[t._v("1short = 2byte")]),t._v(" "),a("p",[t._v("boolean=1byte")]),t._v(" "),a("p",[t._v("int = 4byte")]),t._v(" "),a("p",[t._v("long = 8byte")]),t._v(" "),a("p",[t._v("float = 4byte")]),t._v(" "),a("p",[t._v("double=8byte")]),t._v(" "),a("p",[t._v("stringå­—ç¬¦é•¿åº¦å¯å˜")]),t._v(" "),a("h3",{attrs:{id:"æºç ã€è¡¥ç ã€åç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æºç ã€è¡¥ç ã€åç "}},[t._v("#")]),t._v(" æºç ã€è¡¥ç ã€åç ")]),t._v(" "),a("blockquote",[a("p",[t._v("http://ckjava.com/2018/05/03/java-byte-0XFF/")])]),t._v(" "),a("p",[t._v("åœ¨ç½‘ç»œç¼–ç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†ä¸€äº›"),a("code",[t._v("ä½æ“ä½œ")]),t._v("ï¼Œè¿˜åŒ…æ‹¬äº†ä¸€äº›ä¸ã€æˆ–æ“ä½œï¼Œæ‰€ä»¥åœ¨è¿™é‡Œåšä¸€äº›ç¬”è®°ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_1-åŸç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-åŸç "}},[t._v("#")]),t._v(" 1. åŸç ")]),t._v(" "),a("p",[t._v("åŸç å°±æ˜¯ç¬¦å·ä½åŠ ä¸ŠçœŸå€¼çš„ç»å¯¹å€¼, å³ç”¨ç¬¬ä¸€ä½è¡¨ç¤ºç¬¦å·, å…¶ä½™ä½è¡¨ç¤ºå€¼. æ¯”å¦‚å¦‚æœæ˜¯8ä½äºŒè¿›åˆ¶:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[+1]åŸ = 0000 0001\n[-1]åŸ = 1000 0001\n")])])]),a("p",[t._v("ç¬¬ä¸€ä½æ˜¯ç¬¦å·ä½. å› ä¸ºç¬¬ä¸€ä½æ˜¯ç¬¦å·ä½, æ‰€ä»¥8ä½äºŒè¿›åˆ¶æ•°çš„å–å€¼èŒƒå›´å°±æ˜¯:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[1111 1111 , 0111 1111]\n")])])]),a("p",[t._v("å³")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[-127 , 127]\n")])])]),a("h4",{attrs:{id:"_2-åç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-åç "}},[t._v("#")]),t._v(" 2. åç ")]),t._v(" "),a("p",[t._v("åç çš„è¡¨ç¤ºæ–¹æ³•æ˜¯:")]),t._v(" "),a("p",[t._v("æ­£æ•°çš„åç æ˜¯å…¶æœ¬èº«")]),t._v(" "),a("p",[t._v("è´Ÿæ•°çš„åç æ˜¯åœ¨å…¶åŸç çš„åŸºç¡€ä¸Š, ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™å„ä¸ªä½å–å.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[+1] = [00000001]åŸ = [00000001]å\n[-1] = [10000001]åŸ = [11111110]å\n")])])]),a("p",[t._v("å¯è§å¦‚æœä¸€ä¸ªåç è¡¨ç¤ºçš„æ˜¯è´Ÿæ•°, äººè„‘æ— æ³•ç›´è§‚çš„çœ‹å‡ºæ¥å®ƒçš„æ•°å€¼. é€šå¸¸è¦å°†å…¶è½¬æ¢æˆåŸç å†è®¡ç®—.")]),t._v(" "),a("h4",{attrs:{id:"_3-è¡¥ç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-è¡¥ç "}},[t._v("#")]),t._v(" 3. è¡¥ç ")]),t._v(" "),a("p",[t._v("è¡¥ç çš„è¡¨ç¤ºæ–¹æ³•æ˜¯:")]),t._v(" "),a("p",[t._v("æ­£æ•°çš„è¡¥ç å°±æ˜¯å…¶æœ¬èº«")]),t._v(" "),a("p",[t._v("è´Ÿæ•°çš„è¡¥ç æ˜¯åœ¨å…¶åŸç çš„åŸºç¡€ä¸Š, ç¬¦å·ä½ä¸å˜, å…¶ä½™å„ä½å–å, æœ€å+1. (å³åœ¨åç çš„åŸºç¡€ä¸Š+1)")]),t._v(" "),a("p",[t._v("è¡¥ç è½¬æ¢ä¸ºåŸç ï¼šç¬¦å·ä½ä¸å˜ï¼Œæ•°å€¼ä½æŒ‰ä½å–å,æœ«ä½å†åŠ 1ã€‚(è¡¥ç çš„è¡¥ç å°±æ˜¯æºç )")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[+1] = [00000001]åŸ = [00000001]å = [00000001]è¡¥\n[-1] = [10000001]åŸ = [11111110]å = [11111111]è¡¥\n")])])]),a("p",[t._v("ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°, å¯¹äºæ­£æ•°: åŸç , åç , è¡¥ç éƒ½æ˜¯ä¸€æ ·çš„, å¯¹äºè´Ÿæ•°:åŸç , åç , è¡¥ç éƒ½ä¸ä¸€æ ·.")]),t._v(" "),a("h4",{attrs:{id:"ä¸ºä½•è¦ä½¿ç”¨åŸç -åç å’Œè¡¥ç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä½•è¦ä½¿ç”¨åŸç -åç å’Œè¡¥ç "}},[t._v("#")]),t._v(" ä¸ºä½•è¦ä½¿ç”¨åŸç , åç å’Œè¡¥ç ")]),t._v(" "),a("p",[t._v("é¦–å…ˆ, å› ä¸ºäººè„‘å¯ä»¥çŸ¥é“ç¬¬ä¸€ä½æ˜¯ç¬¦å·ä½, åœ¨è®¡ç®—çš„æ—¶å€™æˆ‘ä»¬ä¼šæ ¹æ®ç¬¦å·ä½, é€‰æ‹©å¯¹çœŸå€¼åŒºåŸŸçš„åŠ å‡.")]),t._v(" "),a("p",[t._v('ä½†æ˜¯å¯¹äºè®¡ç®—æœº, åŠ å‡ä¹˜æ•°å·²ç»æ˜¯æœ€åŸºç¡€çš„è¿ç®—, è¦è®¾è®¡çš„å°½é‡ç®€å•. è®¡ç®—æœºè¾¨åˆ«"ç¬¦å·ä½"æ˜¾ç„¶ä¼šè®©è®¡ç®—æœºçš„åŸºç¡€ç”µè·¯è®¾è®¡å˜å¾—ååˆ†å¤æ‚!')]),t._v(" "),a("p",[t._v("äºæ˜¯äººä»¬æƒ³å‡ºäº†å°†ç¬¦å·ä½ä¹Ÿå‚ä¸è¿ç®—çš„æ–¹æ³•. æˆ‘ä»¬çŸ¥é“, æ ¹æ®è¿ç®—æ³•åˆ™å‡å»ä¸€ä¸ªæ­£æ•°ç­‰äºåŠ ä¸Šä¸€ä¸ªè´Ÿæ•°, å³: 1-1 = 1 + (-1) = 0 , æ‰€ä»¥æœºå™¨å¯ä»¥åªæœ‰åŠ æ³•è€Œæ²¡æœ‰å‡æ³•, è¿™æ ·è®¡ç®—æœºè¿ç®—çš„è®¾è®¡å°±æ›´ç®€å•äº†.")]),t._v(" "),a("p",[t._v("äºæ˜¯äººä»¬å¼€å§‹æ¢ç´¢ å°†ç¬¦å·ä½å‚ä¸è¿ç®—, å¹¶ä¸”åªä¿ç•™åŠ æ³•çš„æ–¹æ³•. é¦–å…ˆæ¥çœ‹åŸç :")]),t._v(" "),a("p",[t._v("è®¡ç®—åè¿›åˆ¶çš„è¡¨è¾¾å¼: 1-1=0")]),t._v(" "),a("blockquote",[a("p",[t._v("1 - 1 = 1 + (-1) = [00000001]åŸ + [10000001]åŸ = [10000010]åŸ = -2")])]),t._v(" "),a("p",[t._v("å¦‚æœç”¨åŸç è¡¨ç¤º, è®©ç¬¦å·ä½ä¹Ÿå‚ä¸è®¡ç®—, æ˜¾ç„¶å¯¹äºå‡æ³•æ¥è¯´, ç»“æœæ˜¯ä¸æ­£ç¡®çš„.è¿™ä¹Ÿå°±æ˜¯ä¸ºä½•è®¡ç®—æœºå†…éƒ¨ä¸ä½¿ç”¨åŸç è¡¨ç¤ºä¸€ä¸ªæ•°.")]),t._v(" "),a("p",[t._v("ä¸ºäº†è§£å†³åŸç åšå‡æ³•çš„é—®é¢˜, å‡ºç°äº†åç :")]),t._v(" "),a("p",[t._v("è®¡ç®—åè¿›åˆ¶çš„è¡¨è¾¾å¼: 1-1=0")]),t._v(" "),a("blockquote",[a("p",[t._v("1 - 1 = 1 + (-1) = [0000 0001]åŸ + [1000 0001]åŸ= [0000 0001]å + [1111 1110]å = [1111 1111]å = [1000 0000]åŸ = -0")])]),t._v(" "),a("p",[t._v('å‘ç°ç”¨åç è®¡ç®—å‡æ³•, ç»“æœçš„çœŸå€¼éƒ¨åˆ†æ˜¯æ­£ç¡®çš„. è€Œå”¯ä¸€çš„é—®é¢˜å…¶å®å°±å‡ºç°åœ¨"0"è¿™ä¸ªç‰¹æ®Šçš„æ•°å€¼ä¸Š. è™½ç„¶äººä»¬ç†è§£ä¸Š+0å’Œ-0æ˜¯ä¸€æ ·çš„, ä½†æ˜¯0å¸¦ç¬¦å·æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„. è€Œä¸”ä¼šæœ‰[0000 0000]åŸå’Œ[1000 0000]åŸä¸¤ä¸ªç¼–ç è¡¨ç¤º0.')]),t._v(" "),a("p",[t._v("äºæ˜¯è¡¥ç çš„å‡ºç°, è§£å†³äº†0çš„ç¬¦å·ä»¥åŠä¸¤ä¸ªç¼–ç çš„é—®é¢˜:")]),t._v(" "),a("blockquote",[a("p",[t._v("1-1 = 1 + (-1) = [0000 0001]åŸ + [1000 0001]åŸ = [0000 0001]è¡¥ + [1111 1111]è¡¥ = [0000 0000]è¡¥=[0000 0000]åŸ")])]),t._v(" "),a("p",[t._v("è¿™æ ·0ç”¨[0000 0000]è¡¨ç¤º, è€Œä»¥å‰å‡ºç°é—®é¢˜çš„-0åˆ™ä¸å­˜åœ¨äº†.è€Œä¸”å¯ä»¥ç”¨[1000 0000]è¡¨ç¤º-128:")]),t._v(" "),a("blockquote",[a("p",[t._v("(-1) + (-127) = [1000 0001]åŸ + [1111 1111]åŸ = [1111 1111]è¡¥ + [1000 0001]è¡¥ = [1000 0000]è¡¥")])]),t._v(" "),a("p",[t._v("-1-127çš„ç»“æœåº”è¯¥æ˜¯-128, åœ¨ç”¨è¡¥ç è¿ç®—çš„ç»“æœä¸­, [1000 0000]è¡¥ å°±æ˜¯-128. ä½†æ˜¯æ³¨æ„å› ä¸ºå®é™…ä¸Šæ˜¯ä½¿ç”¨ä»¥å‰çš„-0çš„è¡¥ç æ¥è¡¨ç¤º-128, æ‰€ä»¥-128å¹¶æ²¡æœ‰åŸç å’Œåç è¡¨ç¤º.(å¯¹-128çš„è¡¥ç è¡¨ç¤º[1000 0000]è¡¥ç®—å‡ºæ¥çš„åŸç æ˜¯[0000 0000]åŸ, è¿™æ˜¯"),a("strong",[t._v("ä¸æ­£ç¡®")]),t._v("çš„)")]),t._v(" "),a("p",[t._v("ä½¿ç”¨è¡¥ç , ä¸ä»…ä»…ä¿®å¤äº†0çš„ç¬¦å·ä»¥åŠå­˜åœ¨ä¸¤ä¸ªç¼–ç çš„é—®é¢˜, è€Œä¸”è¿˜èƒ½å¤Ÿå¤šè¡¨ç¤ºä¸€ä¸ªæœ€ä½æ•°. è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ8ä½äºŒè¿›åˆ¶, ä½¿ç”¨åŸç æˆ–åç è¡¨ç¤ºçš„èŒƒå›´ä¸º[-127, +127], è€Œä½¿ç”¨è¡¥ç è¡¨ç¤ºçš„èŒƒå›´ä¸º[-128, 127].")]),t._v(" "),a("p",[t._v("å› ä¸ºæœºå™¨ä½¿ç”¨è¡¥ç , æ‰€ä»¥å¯¹äºç¼–ç¨‹ä¸­å¸¸ç”¨åˆ°çš„32ä½intç±»å‹, å¯ä»¥è¡¨ç¤ºèŒƒå›´æ˜¯: [-2^31, 2^31-1] å› ä¸ºç¬¬ä¸€ä½è¡¨ç¤ºçš„æ˜¯ç¬¦å·ä½.è€Œä½¿ç”¨è¡¥ç è¡¨ç¤ºæ—¶åˆå¯ä»¥å¤šä¿å­˜ä¸€ä¸ªæœ€å°å€¼.")]),t._v(" "),a("h3",{attrs:{id:"å…³äº-ä¸è¿ç®—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…³äº-ä¸è¿ç®—"}},[t._v("#")]),t._v(" å…³äº"),a("code",[t._v("&ä¸")]),t._v("è¿ç®—")]),t._v(" "),a("p",[a("code",[t._v("&")]),t._v("è¿ç®—æ˜¯äºŒè¿›åˆ¶æ•°æ®çš„è®¡ç®—æ–¹å¼, ä¸¤ä¸ªæ“ä½œä½éƒ½ä¸º1ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ç»“æœä¸º0.")]),t._v(" "),a("p",[a("strong",[t._v("ä¸ºä½•è¦ & 0xffï¼Ÿ")])]),t._v(" "),a("p",[t._v("å…¶æœ¬è´¨åŸå› å°±æ˜¯æƒ³ä¿æŒäºŒè¿›åˆ¶è¡¥ç çš„ä¸€è‡´æ€§ã€‚")]),t._v(" "),a("p",[t._v("åœ¨è®¡ç®—æœºä¸­ï¼Œæ•°æ®éƒ½æ˜¯ä»¥è¡¥ç çš„æ–¹å¼ä¿å­˜çš„ã€‚byteæœ‰8ä½ï¼Œè€Œintæœ‰32ä½ã€‚å½“byteè½¬æ¢ä¸ºintçš„æ—¶å€™ï¼Œè®¡ç®—æœºä¼šè‡ªåŠ¨è¿›è¡Œè¡¥ä½ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæ˜¯è´Ÿæ•°ï¼Œé«˜ä½éƒ½ä¼šè¡¥1ï¼Œå¦‚æœæ˜¯æ­£æ•°ï¼Œé«˜ä½éƒ½ä¼šè¡¥0ï¼›")]),t._v(" "),a("p",[t._v("ä¸¾ä¸ªä¾‹å­ï¼š")]),t._v(" "),a("blockquote",[a("p",[t._v("å½“å°†-127èµ‹å€¼ç»™a[0]æ—¶å€™ï¼Œa[0]ä½œä¸ºä¸€ä¸ªbyteç±»å‹ï¼Œå…¶è®¡ç®—æœºå­˜å‚¨çš„è¡¥ç æ˜¯10000001ï¼ˆ8ä½ï¼‰ã€‚")])]),t._v(" "),a("blockquote",[a("p",[t._v("å°†a[0] ä½œä¸ºintç±»å‹å‘æ§åˆ¶å°è¾“å‡ºçš„æ—¶å€™ï¼Œè®¡ç®—æœºåšäº†ä¸€ä¸ªè¡¥ä½çš„å¤„ç†ï¼Œå› ä¸ºintç±»å‹æ˜¯32ä½æ‰€ä»¥è¡¥ä½åçš„è¡¥ç å°±æ˜¯11111111 11111111 11111111 10000001ï¼ˆ32ä½ï¼‰ï¼Œè¿™ä¸ª32ä½äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºçš„ä¹Ÿæ˜¯-127.")])]),t._v(" "),a("p",[t._v("è™½ç„¶byte->intè®¡ç®—æœºèƒŒåå­˜å‚¨çš„äºŒè¿›åˆ¶è¡¥ç ç”±10000001ï¼ˆ8ä½ï¼‰è½¬åŒ–æˆäº†11111111 11111111 11111111 10000001ï¼ˆ32ä½ï¼‰å¾ˆæ˜¾ç„¶è¿™ä¸¤ä¸ªè¡¥ç è¡¨ç¤ºçš„åè¿›åˆ¶æ•°å­—ä¾ç„¶æ˜¯ç›¸åŒçš„ã€‚")]),t._v(" "),a("p",[t._v("ä½†æ˜¯è®¡ç®—æœºçš„äºŒè¿›åˆ¶ä¸ä»…ä»…åªç”¨æ¥è¡¨ç¤ºåè¿›åˆ¶æ•°ï¼Œåè¿›åˆ¶æ•°åªæ˜¯å®ƒçš„æ•°å€¼ï¼ŒäºŒè¿›åˆ¶æ‰ä»£è¡¨äº†è®¡ç®—æœºçœŸæ­£çš„æ•°æ®æ€§ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å‘ç°ï¼Œå¦‚æœbyteè½¬æ¢ä¸ºintï¼Œè®¡ç®—æœºä¼šæ”¹å˜å®ƒçš„æ•°æ®æ€§ï¼Œå¯¼è‡´æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚é‚£ä¸ºäº†ä¿è¯äº†äºŒè¿›åˆ¶æ•°æ®æ€§ï¼Œæˆ‘ä»¬éœ€è¦å°†é«˜ä½è¡¥0ï¼Œä½8ä½ä¿æŒä¸å˜ã€‚æ‰€ä»¥éœ€è¦&0xffã€‚")]),t._v(" "),a("p",[t._v("å…¶å®å¦‚æœbyteæ˜¯æ­£æ•°é‚£ä¹ˆæ˜¯å¦è¿›è¡Œ&0xffç»“æœéƒ½ä¸€æ ·ï¼›å¦‚æœæ˜¯è´Ÿæ•°å°±ä¸€å®šéœ€è¦&0xffã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœb[0]ä¸º "),a("code",[t._v("-10")]),t._v(", é‚£ä¹ˆå…¶åŸç è¡¨ç¤ºä¸º")]),t._v(" "),a("blockquote",[a("p",[t._v("00000000 00000000 00000000 10001010")])]),t._v(" "),a("p",[t._v("åç ä¸º")]),t._v(" "),a("blockquote",[a("p",[t._v("11111111 11111111 11111111 11110101")])]),t._v(" "),a("p",[t._v("è¡¥ç ä¸º ï¼ˆè®¡ç®—æœºå­˜å‚¨çš„æ•°å€¼ï¼‰")]),t._v(" "),a("blockquote",[a("p",[t._v("11111111 11111111 11111111 11110110")])]),t._v(" "),a("p",[t._v("è¿™ä¸ªæ—¶å€™å¦‚æœåšä½è¿ç®—ï¼Œæ•°æ®ä¼šé”™ä¹±ã€‚æ¯”å¦‚å³ç§»>>ï¼Œå¹³ç™½å¤šå‡ºäº†å¾ˆå¤š1.")]),t._v(" "),a("p",[a("code",[t._v("0XFF")]),t._v(" è¡¨ç¤º16è¿›åˆ¶çš„æ•°æ®255, åŸç , åç , è¡¥ç éƒ½æ˜¯ä¸€æ ·çš„, å…¶äºŒè¿›åˆ¶æ•°æ®ä¸º")]),t._v(" "),a("blockquote",[a("p",[t._v("00000000 00000000 00000000 11111111")])]),t._v(" "),a("p",[a("code",[t._v("0XFF")]),t._v(" å’Œ "),a("code",[t._v("-10")]),t._v("è¿›è¡Œ"),a("code",[t._v("&")]),t._v("è¿ç®—åç»“æœä¸ºï¼šï¼ˆè¡¥ç è¿›è¡Œè¿ç®—ï¼‰")]),t._v(" "),a("blockquote",[a("p",[t._v("11111111 11111111 11111111 11110110 & 00000000 00000000 00000000 11111111 = 00000000 00000000 00000000 11110110")])]),t._v(" "),a("p",[t._v("è¿™æ ·å°±å¯ä»¥ä¿è¯äºŒè¿›åˆ¶æ•°æ®ä¸å˜ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å…³äºä½ç§»è¿ç®—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…³äºä½ç§»è¿ç®—"}},[t._v("#")]),t._v(" å…³äºä½ç§»è¿ç®—")]),t._v(" "),a("p",[a("strong",[t._v("è®¡ç®—æœºä¸­å­˜çš„éƒ½æ˜¯æ•°çš„è¡¥ç ")]),t._v("ï¼Œæ‰€ä»¥ä½ç§»è¿ç®—éƒ½æ˜¯å¯¹è¡¥ç è€Œè¨€çš„ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("<< å·¦ç§» ä½ä½è¡¥0")])]),t._v(" "),a("p",[a("strong",[t._v(">> å³ç§» é«˜ä½è¡¥ç¬¦å·ä½ï¼Œå³ï¼šå¦‚æœç¬¦å·ä½æ˜¯1 å°±è¡¥1ï¼Œå¦‚æœç¬¦å·ä½æ˜¯0 å°±è¡¥0")])]),t._v(" "),a("p",[a("strong",[t._v(">>>æ— ç¬¦å·å³ç§» ï¼Œé«˜ä½ç»Ÿä¸€è¡¥0")])]),t._v(" "),a("h2",{attrs:{id:"_2-tcpä¸udpåŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-tcpä¸udpåŒºåˆ«"}},[t._v("#")]),t._v(" 2.TCPä¸UDPåŒºåˆ«")]),t._v(" "),a("p",[t._v("TCPåè®®æ˜¯==é¢å‘è¿æ¥==çš„é€šè®¯åè®®ï¼›å‘é€æ¶ˆæ¯æ—¶å¿…é¡»å»ºç«‹äº†è¿æ¥ï¼ˆ3æ¬¡æ¡æ‰‹ï¼‰ï¼Œé€šè®¯å®Œæˆæ—¶éœ€è¦æ–­å¼€è¿æ¥ï¼ˆ4æ¬¡æŒ¥æ‰‹ï¼‰ï¼›")]),t._v(" "),a("p",[t._v("TCPæ˜¯å¯é çš„ï¼ŒåŸºäºå­—èŠ‚æµçš„ä¼ è¾“åè®®ã€‚")]),t._v(" "),a("p",[t._v("è€ŒUDPåè®®æ˜¯é¢å‘æ— è¿æ¥çš„é€šè®¯åè®®ï¼Œæ²¡æœ‰severã€clientä¹‹åˆ†ï¼Œåªéœ€è¦çŸ¥é“å¯¹æ–¹çš„ipåœ°å€å’Œç«¯å£å·ï¼›")]),t._v(" "),a("p",[t._v("åŸºäºæ•°å­—æ•°æ®æŠ¥ä¼ è¾“ï¼›")]),t._v(" "),a("p",[t._v("UDPå¯ä»¥å®ç°å•æ’­ã€å¹¿æ’­ã€å¤šæ’­ï¼›")]),t._v(" "),a("h2",{attrs:{id:"_3-udpå‘é€æ¶ˆæ¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-udpå‘é€æ¶ˆæ¯"}},[t._v("#")]),t._v(" 3.UDPå‘é€æ¶ˆæ¯")]),t._v(" "),a("p",[t._v("UDPæ²¡æœ‰severã€clientä¹‹åˆ†ï¼Œåœ¨javaå®ç°é‡Œï¼Œé€šè¿‡"),a("code",[t._v("DatagramSocket")]),t._v("ç±»å®ç°ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å‘é€æ¶ˆæ¯çš„æ­¥éª¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‘é€æ¶ˆæ¯çš„æ­¥éª¤"}},[t._v("#")]),t._v(" å‘é€æ¶ˆæ¯çš„æ­¥éª¤")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("graph TD\na[å£°æ˜DatagramSocketå®ä¾‹]--\x3e b[å£°æ˜æ¥å—æ¶ˆæ¯DatagramPacketå®ä¾‹]\nb --\x3e c[ç­‰å¾…æ¶ˆæ¯ ä¼šé˜»å¡]\nc --\x3e d[æ¥æ”¶åˆ°æ¶ˆæ¯ æ‹¿åˆ°å¯¹æ–¹ipå’Œç«¯å£å·]\nd --\x3e e[å›æŠ¥æ¶ˆæ¯]\n\n")])])]),a("p",[t._v("ä»£ç å®ä¾‹ï¼šUdpProviderç›‘å¬åœ¨2000ç«¯å£æ¥å—æ¶ˆæ¯ï¼Œæ‰“å°æ¶ˆæ¯ï¼Œå›æŠ¥æ¶ˆæ¯ï¼›UdpSearchå‘Providerå‘é€æ¶ˆæ¯ï¼Œæ‰“å°å›æŠ¥æ¶ˆæ¯ï¼›")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @author keyang\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UdpProvider")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpProvideræœåŠ¡å¯åŠ¨æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),t._v(" datagramSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),t._v(" datagramPacket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This method blocks until a datagram is received")]),t._v("\n\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("receive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" receivedBytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("receivedBytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"utf-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpProvideræ¥å—åˆ°æ¶ˆæ¯ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", å­—èŠ‚é•¿åº¦ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ï¼Œç«¯å£å·ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å›å†™æ¶ˆæ¯ï¼›")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),t._v(" inetAddress "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" responseMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"response from udp"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),t._v(" responsePack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("responseMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" responseMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tresponsePack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inetAddress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tresponsePack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("responsePack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpProvideræœåŠ¡å…³é—­"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @author keyang\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UdpSearcher")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpSearcheræœåŠ¡å¯åŠ¨æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœç´¢æ–¹å¯ä»¥ç»‘å®šä»»æ„ç«¯å£")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),t._v(" datagramSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sendMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä½ å¥½ï¼ŒUDP"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),t._v(" sendPack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sendMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sendMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tsendPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tsendPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sendPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This method blocks until a datagram is received")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),t._v(" receiverPack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("receive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" receivedBytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("receivedBytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"utf-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpSearcheræ¥å—åˆ°æ¶ˆæ¯ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", å­—èŠ‚é•¿åº¦ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ï¼Œç«¯å£å·ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpSearcheræœåŠ¡å…³é—­"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"udpå¹¿æ’­æœç´¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#udpå¹¿æ’­æœç´¢"}},[t._v("#")]),t._v(" UDPå¹¿æ’­æœç´¢")]),t._v(" "),a("p",[t._v("udpæœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å¹¿æ’­ä¿¡æ¯ï¼Œåªéœ€è¦å‘å±€åŸŸç½‘å¯¹åº”çš„å¹¿æ’­åœ°å€ä¼ è¾“ä¿¡æ¯å³å¯ã€‚å¹¿æ’­åœ°å€ä¸€èˆ¬æ ¹æ®ç½‘æ®µåœ°å€å’Œé»˜è®¤ç½‘å…³è®¡ç®—å‡ºæ¥ï¼Œå¤§éƒ¨åˆ†çš„å¹¿æ’­åœ°å€æ˜¯"),a("code",[t._v("255.255.255.255")]),t._v(";")]),t._v(" "),a("p",[a("strong",[t._v("ä»£ç å®ä¾‹")]),t._v("ï¼šhttps://gitee.com/dendi.ke/thread-demo/blob/master/src/main/java/com/gs/example/udp/UdpProvider.java")]),t._v(" "),a("p",[t._v("udpSearchå‘å¹¿æ’­åœ°å€å‘é€2000ç«¯å£çš„æ¶ˆæ¯ï¼ŒudpProviderç›‘å¬2000ç«¯å£çš„ä¿¡æ¯ï¼Œæ¥æ”¶åˆ°æ¶ˆæ¯åå›æŠ¥ç»™udpSearchè‡ªèº«çš„ä¿¡æ¯ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UdpProvider")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpProvideræœåŠ¡å¯åŠ¨æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" UUID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomUUID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProviderThread")]),t._v(" providerThread "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProviderThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tproviderThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("in"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tproviderThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpProvideræœåŠ¡å…³é—­"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProviderThread")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProviderThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("done "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),t._v(" datagramSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\tdatagramSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),t._v(" datagramPacket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This method blocks until a datagram is received")]),t._v("\n\t\t\t\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("receive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" receivedBytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("receivedBytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"utf-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpProvideræ¥å—åˆ°æ¶ˆæ¯ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", å­—èŠ‚é•¿åº¦ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ï¼Œç«¯å£å·ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å›å†™æ¶ˆæ¯ï¼›")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),t._v(" inetAddress "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datagramPacket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parsePort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" responseMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),t._v(" responsePack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("responseMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" responseMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\tresponsePack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inetAddress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\tresponsePack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("responsePack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\te"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnsupportedEncodingException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\te"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\te"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tdone "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UdpSearcher")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" PORT "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpSearcheræœåŠ¡å¯åŠ¨æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeacherThread")]),t._v(" listener "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("search")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é˜»å¡ä¸»çº¿ç¨‹")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("in"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" sns "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSns")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç»„ç»‡è§£æ•£äº†ï¼Œç‰¹å·¥ä¸€å…±æœ‰ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tlistener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpSearcheræœåŠ¡å…³é—­"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeacherThread")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),t._v(" countDownLatch "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeacherThread")]),t._v(" seacherThread "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeacherThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("countDownLatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tseacherThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç­‰å¾…ç›‘å¬æœåŠ¡å¯åŠ¨å¥½")]),t._v("\n\t\tcountDownLatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("await")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" seacherThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("search")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœç´¢æ–¹å¯ä»¥ç»‘å®šä»»æ„ç«¯å£")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UDPSearcher sendBroadcast started."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),t._v(" datagramSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sendMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),t._v(" sendPack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sendMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sendMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tsendPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"255.255.255.255"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tsendPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sendPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UDPSearcher sendBroadcast end."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeacherThread")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" sns "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),t._v(" countDownLatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),t._v(" datagramSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeacherThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountDownLatch")]),t._v(" countDownLatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("countDownLatch "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" countDownLatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("done "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpSearcher ç›‘å¬æœåŠ¡å¯åŠ¨æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tcountDownLatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("countDown")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tdatagramSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This method blocks until a datagram is received")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),t._v(" receiverPack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DatagramPacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("receive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" receivedBytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("receivedBytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"utf-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpSearcheræ¥å—åˆ°æ¶ˆæ¯ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", å­—èŠ‚é•¿åº¦ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ï¼Œç«¯å£å·ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" receiverPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseSn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\tsns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UdpSearcher ç›‘å¬æœåŠ¡åœæ­¢"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" ignored"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tdone "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datagramSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tdatagramSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\tdatagramSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSns")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" sns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n")])])]),a("h2",{attrs:{id:"_4-tcp-ï¼ˆtransmission-control-protocolï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-tcp-ï¼ˆtransmission-control-protocolï¼‰"}},[t._v("#")]),t._v(" 4.TCP ï¼ˆTransmission Control Protocolï¼‰")]),t._v(" "),a("p",[a("strong",[t._v("æ¦‚å¿µ")]),t._v("ï¼šåŸºäºè¿æ¥çš„ã€å¯é çš„ä¼ è¾“æ§åˆ¶åè®®ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("åº”ç”¨åœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("æ¶ˆæ¯ä¼ è¾“ã€æ¨é€ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("å•äººè¯­éŸ³ã€è§†é¢‘æ¶ˆæ¯ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("ä½†å¯ä»¥å®ç°udpæ‰€æœ‰çš„åŠŸèƒ½ï¼Œä½†æ˜¯æ— æ³•è¿›è¡Œå¹¿æ’­ã€å¤šæ’­ï¼›")])])]),t._v(" "),a("h3",{attrs:{id:"ä¸‰æ¬¡æ¡æ‰‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰æ¬¡æ¡æ‰‹"}},[t._v("#")]),t._v(" ä¸‰æ¬¡æ¡æ‰‹")]),t._v(" "),a("img",{staticStyle:{zoom:"30%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-05-134119.png",alt:"image-20191105214118317"}}),t._v(" "),a("h3",{attrs:{id:"å››æ¬¡æŒ¥æ‰‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å››æ¬¡æŒ¥æ‰‹"}},[t._v("#")]),t._v(" å››æ¬¡æŒ¥æ‰‹")]),t._v(" "),a("img",{staticStyle:{zoom:"30%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-05-140334.png",alt:"image-20191105220334062"}}),t._v(" "),a("p",[t._v("ACKï¼šç¡®è®¤åºå·æœ‰æ•ˆã€‚")]),t._v(" "),a("p",[t._v("SYNï¼šå‘èµ·ä¸€ä¸ªæ–°è¿æ¥ã€‚")]),t._v(" "),a("p",[t._v("FINï¼šé‡Šæ”¾ä¸€ä¸ªè¿æ¥ã€‚")]),t._v(" "),a("h3",{attrs:{id:"tcpå‘é€æ¶ˆæ¯-ï¼ˆå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcpå‘é€æ¶ˆæ¯-ï¼ˆå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ï¼‰"}},[t._v("#")]),t._v(" TCPå‘é€æ¶ˆæ¯ ï¼ˆå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ï¼‰")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("graph TD\nsubgraph å®¢æˆ·ç«¯\n1[åˆ›å»ºsocket] --\x3e 2[ç»‘å®šæœ¬åœ°ç«¯å£]\n2 --\x3e 3[connectè¿æ¥è¿œç¨‹å¥—æ¥å­—]\n3 --\x3e 31[send å‘é€æ¶ˆæ¯]\n31 --\x3e 32[receive æ¥æ”¶å›æŠ¥æ¶ˆæ¯]\n32 --\x3e 33[close å…³é—­è¿æ¥]\nend\nsubgraph æœåŠ¡ç«¯\n3 --\x3e 6\n31 --\x3e 7\n8 --\x3e 32\n4[åˆ›å»ºæœåŠ¡socket] --\x3e 5[ç»‘å®šç›‘å¬ç«¯å£]\n5 --\x3e 6[Acceptç­‰å¾…æ¶ˆæ¯]\n6 --\x3e 7[Receiveæ¥æ”¶æ¶ˆæ¯]\n7 --\x3e 8[sendå›æŠ¥æ¶ˆæ¯]\nend\n")])])]),a("p",[t._v("TCP"),a("strong",[t._v("çš„è¿æ¥å¯é æ€§åŸç†")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("3æ¬¡æ¡æ‰‹â€”â€”ä¸ºä»€ä¹ˆæ˜¯3æ¬¡æ¡æ‰‹ï¼Ÿ")]),t._v(" "),a("p",[t._v("ä¸‰æ¬¡æ¡æ‰‹ä¸»è¦æ˜¯ä¿è¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½èƒ½ç¡®è®¤ "),a("strong",[t._v("è‡ªå·±çš„æ¶ˆæ¯èƒ½è¢«å¯¹æ–¹æ¥å—ï¼Œå¹¶ä¸”åˆ«äººçš„æ¶ˆæ¯èƒ½è¢«å¯¹æ–¹æ¥å—")]),t._v("ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("4æ¬¡æŒ¥æ‰‹â€”â€”ä¸ºä»€ä¹ˆæ˜¯4æ¬¡æŒ¥æ‰‹ï¼Ÿ")]),t._v(" "),a("p",[t._v("å››æ¬¡æŒ¥æ‰‹çš„ç¬¬äºŒæ¬¡å’Œç¬¬ä¸‰æ¬¡ä¹‹æ‰€ä»¥åˆ†å¼€ï¼Œå…¶å®æ˜¯å› ä¸ºæœ‰å¯èƒ½æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„FINè¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯æ•°æ®å¹¶æ²¡æœ‰å‘é€å®Œï¼Œæˆ–è€…è¯´ä¸èƒ½é©¬ä¸Šå‘é€æœªå®Œæˆçš„æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™å¹¶ä¸èƒ½ä¿è¯æœåŠ¡ç«¯èƒ½ç«‹é©¬å›å¤å®¢æˆ·ç«¯çš„FINä¿¡å·ï¼Œå› æ­¤æ¥æ”¶æ–¹çš„"),a("code",[t._v("ACKæ¶ˆæ¯")]),t._v("å’Œ"),a("code",[t._v("FINæ¶ˆæ¯")]),t._v("ä¸€èˆ¬åˆ†å¼€å‘é€ï¼Œæ‰€ä»¥æ˜¯4æ¬¡æŒ¥æ‰‹ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("2019.12.1 æ—¥è¡¥å……ï¼š")])]),t._v(" "),a("p",[t._v("TCPæ˜¯å…¨åŒå·¥æ¨¡å¼ï¼Œæ„å‘³ç€å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å‘é€ã€æ¥æ”¶æ˜¯åˆ†å¼€çš„ï¼Œå› æ­¤æ¯ä¸ªæ–¹å‘çš„è¿æ¥éƒ½å¿…é¡»å•ç‹¬è¿›è¡Œå…³é—­ã€‚å®¢æˆ·ç«¯å‘èµ·ä¸»åŠ¨å…³é—­åï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯ä¸å†æœ‰æ•°æ®éœ€è¦å‘é€ï¼Œä½†æ˜¯å®¢æˆ·ç«¯ä»ç„¶å¯ä»¥æ¥æ”¶æœåŠ¡ç«¯çš„æ¶ˆæ¯ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("ä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)æ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€ï¼Ÿ")]),t._v(" "),a("p",[t._v("ç­”ï¼šå› ä¸ºClientæœ€åçš„ACKå¯èƒ½ä¼šè¢«ä¸¢å¤±ï¼ŒServerå¦‚æœæ²¡æœ‰æ”¶åˆ°ACKï¼Œå°†ä¸æ–­é‡å¤å‘é€FINç‰‡æ®µã€‚æ‰€ä»¥Clientä¸èƒ½ç«‹å³å…³é—­ï¼Œå®ƒå¿…é¡»ç¡®è®¤Serveræ¥æ”¶åˆ°äº†è¯¥ACKã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥TIME_WAITçŠ¶æ€å°±æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚")]),t._v(" "),a("p",[t._v("Clientä¼šè®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œç­‰å¾…2MSLçš„æ—¶é—´ã€‚å¦‚æœåœ¨è¯¥æ—¶é—´å†…å†æ¬¡æ”¶åˆ°FINï¼Œé‚£ä¹ˆClientä¼šé‡å‘ACKå¹¶å†æ¬¡ç­‰å¾…2MSLã€‚æ‰€è°“çš„2MSLæ˜¯ä¸¤å€çš„MSL(Maximum Segment Lifetime)ã€‚MSLæŒ‡ä¸€ä¸ªç‰‡æ®µåœ¨ç½‘ç»œä¸­æœ€å¤§çš„å­˜æ´»æ—¶é—´ï¼Œ2MSLå°±æ˜¯ä¸€ä¸ªå‘é€å’Œä¸€ä¸ªå›å¤æ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚å¦‚æœç›´åˆ°2MSLï¼ŒClientéƒ½æ²¡æœ‰å†æ¬¡æ”¶åˆ°FINï¼Œé‚£ä¹ˆClientæ¨æ–­ACKå·²ç»è¢«æˆåŠŸæ¥æ”¶ï¼Œåˆ™ç»“æŸTCPè¿æ¥ã€‚")])])]),t._v(" "),a("p",[t._v("TCP"),a("strong",[t._v("çš„ä¼ è¾“å¯é æ€§åŸç†")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("æ’åºã€é¡ºåºå‘é€ã€é¡ºåºç»„è£…")]),t._v(" "),a("p",[t._v("æ•°æ®åŒ…ä¼šè¢«åˆ†ç‰‡ï¼Œæ¥æ”¶æ–¹æ¥å—çš„é¡ºåºå¯èƒ½å’Œå‘é€é¡ºåºä¸åŒï¼Œæ‰€ä»¥æ¥å—ç«¯ä¼šå¯¹æ¥å—åˆ°çš„æ¶ˆæ¯é‡æ–°æ’åºï¼›")])]),t._v(" "),a("li",[a("p",[t._v("ä¸¢å¼ƒã€è¶…æ—¶")]),t._v(" "),a("p",[t._v("å½“æ•°æ®åŒ…å‡ºç°äº†ä¸¢åŒ…ï¼Œæˆ–è€…è¿æ¥è¢«æ–­å¼€çš„æƒ…å†µï¼Œtcpä¼šç»è¿‡ä¸€å®šçš„æ—¶é—´è¿›è¡Œé‡å‘ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("å®šæ—¶é‡å‘")]),t._v(" "),a("p",[t._v("linuxçš„åˆ¤æ–­æ—¶é—´30sï¼Œå¦‚æœè¶…è¿‡30sæ²¡æœ‰å¾—åˆ°å›åº”ï¼Œå‘é€ç«¯ä¼šè®¤ä¸ºæ•°æ®ä¸¢å¤±äº†ï¼Œé‡æ–°å‘é€ï¼›")])])]),t._v(" "),a("p",[a("strong",[t._v("ä½¿ç”¨ByteBufferæ¥å‘é€å„ç§ç±»å‹çš„æ¶ˆæ¯")])]),t._v(" "),a("p",[a("strong",[t._v("TCPæ¡ˆä¾‹")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// server")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MySocketServer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" PORT "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnknownHostException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocket")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initSocketServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetSocketAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯å¯åŠ¨å°±ç»ªï¼Œç­‰å¾…è¿æ¥"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Socket")]),t._v(" client "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("accept")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientHandleThread")]),t._v(" clientHandleThread "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientHandleThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\tclientHandleThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\te"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initSocketServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocket")]),t._v(" server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSoTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setReuseAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bufferSize: é»˜è®¤æ˜¯8kbyte = 8*1024")]),t._v("\n\t\t\tserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setReceiveBufferSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientHandleThread")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Socket")]),t._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientHandleThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Socket")]),t._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InputStream")]),t._v(" inputStream "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tinputStream "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInputStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" size "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" inputStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" byteBuffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‰é¡ºåºè·å–æ•°æ®")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),t._v(" byteMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" charMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getChar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("short")]),t._v(" shortMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getShort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" intMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" longMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" stringMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("position")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("position")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯æ¥æ”¶åˆ°ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" byteMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯æ¥æ”¶åˆ°ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" charMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯æ¥æ”¶åˆ°ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" shortMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯æ¥æ”¶åˆ°ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" intMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯æ¥æ”¶åˆ°ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" longMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯æ¥æ”¶åˆ°ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" stringMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\te"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inputStream "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\tinputStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\te"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯è¿æ¥æ–­å¼€"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// client")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MySocketClient")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" CLIENT_PORT "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Socket")]),t._v(" socket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Socket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initClientSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tsocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetSocketAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MySocketServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾èµ„æº")]),t._v("\n\t\t\tsocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯å·²é€€å‡ºï½"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\te"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯å¼‚å¸¸é€€å‡ºï½"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Socket")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘æœåŠ¡å™¨å‘é€æ•°æ®")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OutputStream")]),t._v(" outputStream "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOutputStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ByteBuffer")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" byteBuffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),t._v(" byteMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("125")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" charMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("short")]),t._v(" shortMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4343")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" intMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("34343243")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" longMsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3234827524L")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tbyteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("byteMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tbyteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("putChar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("charMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tbyteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("putShort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shortMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tbyteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("putInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("intMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tbyteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("putLong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("longMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä½ å¥½ï¼ŒæœåŠ¡ç«¯"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tbyteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\toutputStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("position")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¥æ”¶æœåŠ¡å™¨è¿”å›")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InputStream")]),t._v(" inputStream "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInputStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" read "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" inputStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ”¶åˆ°æ•°é‡ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tinputStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\toutputStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initClientSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Socket")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tsocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setKeepAlive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tsocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSoTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//\t\tsocket.setSendBufferSize(64*1024*1024);")]),t._v("\n\t\tsocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetSocketAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CLIENT_PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_5-udpè¾…åŠ©tcpè¿›è¡ŒæœåŠ¡å‘ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-udpè¾…åŠ©tcpè¿›è¡ŒæœåŠ¡å‘ç°"}},[t._v("#")]),t._v(" 5.UDPè¾…åŠ©TCPè¿›è¡ŒæœåŠ¡å‘ç°")]),t._v(" "),a("p",[a("strong",[t._v("å®ç°æ–¹æ¡ˆ")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("é¦–å…ˆï¼ŒæœåŠ¡ç«¯å®šä¹‰ç»Ÿä¸€çš„æœåŠ¡å‘ç°ç«¯å£ï¼š"),a("code",[t._v("PROVIDER_PORT")]),t._v(". æ¯”å¦‚è¯´æ˜¯ 30010ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("æœåŠ¡ç«¯å¯åŠ¨server-socketæœåŠ¡ã€‚ç„¶åå¯åŠ¨UDP-DatagramSocketï¼Œç›‘å¬åœ¨"),a("code",[t._v("PROVIDER_PORT")]),t._v("ç«¯å£ä¸Š, å½“ç›‘å¬åˆ°å®¢æˆ·ç«¯å‘è¿™ä¸ªç«¯å£å¹¿æ’­çš„æ¶ˆæ¯ï¼Œå›é€æœåŠ¡ç«¯server-socketåœ°å€ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("å®¢æˆ·ç«¯searcheré€šè¿‡udpå¹¿æ’­æ¥æœç´¢æœåŠ¡ã€‚å®ƒå‘å½“å‰å±€åŸŸç½‘å¹¿æ’­åœ°å€çš„30010ç«¯å£ä¸Šå¹¿æ’­æ¶ˆæ¯ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("æœåŠ¡ç«¯æ¥å—åˆ°å¹¿æ’­æ¶ˆæ¯åï¼Œè§£ææ¶ˆæ¯ä½“ã€‚å¦‚æœæ˜¯ä¹‹å‰çº¦å®šå¥½çš„æ¶ˆæ¯æ ¼å¼ï¼Œé‚£ä¹ˆå°±é€šè¿‡udpåè®®ï¼Œå‘å‘é€è€…å›é€ä¸€æ¡æ¶ˆæ¯ï¼Œä¼ é€è‡ªå·±çš„tcpæœåŠ¡åœ°å€å’Œç«¯å£ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("æœåŠ¡Searcheræ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œè§£æå‡ºæœåŠ¡åœ°å€å’Œç«¯å£ï¼Œé€šè¿‡æœ¬åœ°tcpå®¢æˆ·ç«¯å»è¿›è¡Œè¿æ¥ï¼Œä¿æŒé€šä¿¡ï¼›")])])]),t._v(" "),a("p",[a("strong",[t._v("ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("https://gitee.com/dendi.ke/thread-demo/tree/2795f1429ab5431f5b05c88268b41c033a58450b/src/main/java/com/gs/example/servicefind")]),t._v(" "),a("p",[a("strong",[t._v("æ€»ç»“")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("â€‹\tudpçš„DatagramSocketè¯»å–å’Œå‘é€éƒ½æ˜¯é€šè¿‡DatagramPacketçš„å¯¹è±¡æ¥è¿›è¡Œï¼ŒPacketå¾—åˆ°çš„æ•°æ®éƒ½æ˜¯byte[], å¯ä»¥ç”¨ByteBufferåŒ…è£…ä¸€å±‚ã€‚")]),t._v(" "),a("p",[t._v("â€‹\tsocketçš„æ•°æ®è¯»å–å¯ä»¥é€šè¿‡BufferReaderæ¥åŒ…è£…socketçš„outputStreamï¼›")]),t._v(" "),a("p",[t._v("â€‹\tsocketçš„æ•°æ®å‘é€ï¼Œå¯ä»¥é€šè¿‡PrintStreamæ¥åŒ…è£…socketçš„inputStream;")]),t._v(" "),a("ul",[a("li",[a("h4",{attrs:{id:"ä¼˜åŒ–æ”¹è¿›ï¼šä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ¥åŒæ—¶å¤„ç†æœåŠ¡ç«¯çš„å‘é€å’Œä¿¡æ¯è¯»å–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–æ”¹è¿›ï¼šä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ¥åŒæ—¶å¤„ç†æœåŠ¡ç«¯çš„å‘é€å’Œä¿¡æ¯è¯»å–"}},[t._v("#")]),t._v(" ä¼˜åŒ–æ”¹è¿›ï¼šä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ¥åŒæ—¶å¤„ç†æœåŠ¡ç«¯çš„å‘é€å’Œä¿¡æ¯è¯»å–")])])]),t._v(" "),a("p",[t._v("å®ç°æ–¹æ¡ˆï¼š")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("graph TD\n1[æœåŠ¡ç«¯å¯åŠ¨socketSeverå&nbspä¸»çº¿ç¨‹é˜»å¡ç­‰å¾…å‘½ä»¤è¡Œè¾“å…¥] --\x3e 2[å¯åŠ¨ç›‘å¬çº¿ç¨‹&nbspç›‘å¬å®¢æˆ·ç«¯è¿æ¥]\n2 --\x3e 3[å®¢æˆ·ç«¯æ¥å…¥&nbspåˆ›å»ºclientHandler]\nsubgraph ReadThread\n3 --\x3e 4[clientHandlerå¯åŠ¨readThread]\n4 --\x3e 4.1[è¯»å–ä¿¡æ¯å¹¶æ‰“å°æ¶ˆæ¯]\n4.1 --\x3e 6{readlineæ˜¯å¦ä¸ºnull}\n6 --\x3e|æ˜¯|8[è‡ªå·±é€€å‡º]\n6 --\x3e|å¦|4.1\nend\nsubgraph WriteThread é€šè¿‡çº¿ç¨‹æ± æ¥è¾“å‡º\n3 --\x3e 5[clientHandlerå¯åŠ¨writeThread&nbspå‘é€å‘½ä»¤è¡Œè¾“å…¥æ¶ˆæ¯]\n5 --\x3e 7{æ¶ˆæ¯æ˜¯å¦ä¸ºexit}\n7 --\x3e|å¦|7.1[OutputStreamå‘é€æ¶ˆæ¯]\n7 --\x3e|æ˜¯|7.2[é€€å‡º]\nend\n\n")])])]),a("p",[a("strong",[t._v("ä»£ç è·¯å¾„")]),t._v("ï¼šhttps://gitee.com/dendi.ke/thread-demo/commit/1c8b87ab45b6ce38956d27bd3e32738023b11228")]),t._v(" "),a("h2",{attrs:{id:"_6-bioä¸nio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-bioä¸nio"}},[t._v("#")]),t._v(" 6.BIOä¸NIO")]),t._v(" "),a("blockquote",[a("p",[t._v("èƒŒæ™¯ï¼šæœåŠ¡ç«¯å½±å“æ€§èƒ½çš„æœ€å¤§ç“¶é¢ˆåœ¨äºIOçš„å¤„ç†ã€‚å•çº¯çš„ä½¿ç”¨çº¿ç¨‹å¹¶å‘å¤„ç†ï¼Œå½“å®¢æˆ·ç«¯è¿æ¥è¿‡å¤šæ—¶ï¼Œåˆ›å»ºçš„çº¿ç¨‹æ•°é‡è¿‡å¤šï¼Œå¯¼è‡´cpué¢‘ç¹è°ƒåº¦çº¿ç¨‹ï¼ŒåŒæ ·ä¼šå½±å“æ€§èƒ½ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ç½‘ç»œæ¨¡å‹ï¼šbio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç½‘ç»œæ¨¡å‹ï¼šbio"}},[t._v("#")]),t._v(" "),a("strong",[t._v("ç½‘ç»œæ¨¡å‹")]),t._v("ï¼š"),a("strong",[t._v("BIO")])]),t._v(" "),a("p",[t._v("åŸºäºæµçš„ä¼ è¾“")]),t._v(" "),a("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-10-120806.png",alt:"image-20191110200805834"}}),t._v(" "),a("p",[t._v("1.æœåŠ¡ç«¯å¯åŠ¨ç›‘å¬çº¿ç¨‹ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ï¼›")]),t._v(" "),a("p",[t._v("2.å®¢æˆ·ç«¯å‘é€è¿æ¥è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("3.å®¢æˆ·ç«¯é€šè¿‡åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼Œå¤„ç†å®¢æˆ·ç«¯çš„è¯»ã€å†™æ“ä½œï¼›")]),t._v(" "),a("p",[t._v("4.æœåŠ¡ç«¯çº¿ç¨‹ä¸æ–­ç­‰å¾…å®¢æˆ·ç«¯çš„æ¶ˆæ¯ï¼›")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-10-120843.png",alt:"image-20191110200842632"}}),t._v(" "),a("p",[a("strong",[t._v("ç¼ºç‚¹")]),t._v("ï¼šBIOæœ€å¤§çš„é—®é¢˜åœ¨äºï¼Œå½“å®¢æˆ·ç«¯è¿æ¥è¿‡å¤šæ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå»ºç«‹è¿‡å¤šçš„çº¿ç¨‹ï¼Œå¯¼è‡´æœåŠ¡å™¨ç«¯æ— æ³•æ‰¿å—å‹åŠ›è€Œå´©æºƒã€‚ï¼›")]),t._v(" "),a("h3",{attrs:{id:"ç½‘ç»œæ¨¡å‹ï¼šnio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç½‘ç»œæ¨¡å‹ï¼šnio"}},[t._v("#")]),t._v(" "),a("strong",[t._v("ç½‘ç»œæ¨¡å‹ï¼šNIO")])]),t._v(" "),a("p",[t._v("NIOæ˜¯é¢å‘bufferçš„ä¼ è¾“ï¼›")]),t._v(" "),a("p",[t._v("NIOæ ¸å¿ƒæ€æƒ³ï¼šNIOæä¾›å•çº¿ç¨‹çš„selectorï¼Œå¤šè·¯å¤ç”¨ï¼Œç”¨æ¥æ³¨å†Œäº‹ä»¶å’Œç›‘å¬äº‹ä»¶ï¼›selectorå¾ªç¯æ£€æµ‹ï¼Œå½“æ³¨å†Œçš„channelçŠ¶æ€å˜åŒ–æ—¶ï¼Œå†é€šçŸ¥å„ä¸ªchannelè¿›è¡Œå¯¹åº”å¤„ç†ï¼›")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-10-123127.png",alt:"image-20191110203126332"}}),t._v(" "),a("p",[t._v("1.é¦–å…ˆåœ¨selectorä¸Šæ³¨å†Œç›‘å¬å®¢æˆ·ç«¯è¿æ¥äº‹ä»¶ï¼›")]),t._v(" "),a("p",[t._v("2.å®¢æˆ·ç«¯å‘é€è¿æ¥è¯·æ±‚ï¼›")]),t._v(" "),a("p",[t._v("3.selectoré€šçŸ¥å¯åŠ¨çº¿ç¨‹ï¼Œå¤„ç†å®¢æˆ·ç«¯è¿æ¥ï¼Œå¹¶ä¸”å»ºç«‹ä¸å®¢æˆ·ç«¯çš„è¿æ¥ï¼›")]),t._v(" "),a("p",[t._v("4.åŒæ—¶å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯è¿æ¥çš„socketå‘selectoræ³¨å†Œç›‘å¬â€œsocketå¯è¯»â€äº‹ä»¶")]),t._v(" "),a("p",[t._v("5.å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œselectoré€šçŸ¥äº‹ä»¶ï¼Œå¯åŠ¨çº¿ç¨‹ï¼ˆæ¯”å¦‚æ˜¯çº¿ç¨‹æ± ï¼‰ï¼Œå¤„ç†å®¢æˆ·ç«¯çš„è¯»å†™æ“ä½œï¼Œå“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼›")]),t._v(" "),a("p",[t._v("6.æœ€åï¼Œè¿™ä¸ªçº¿ç¨‹ä¹Ÿä¼šå‘selectoræ³¨å†Œâ€œsokcetå¯å†™â€äº‹ä»¶ï¼›")]),t._v(" "),a("p",[a("strong",[t._v("NIOçš„ä¼˜ç‚¹")]),t._v("ï¼šæ‰€æœ‰çš„é˜»å¡æ“ä½œéƒ½æ˜¯é›†ä¸­åœ¨selectorä¸Šã€‚å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„å¤„ç†çº¿ç¨‹éƒ½å‡ ä¹æ˜¯éé˜»å¡çš„ï¼Œä¸éœ€è¦å»ç­‰å¾…è¿æ¥ï¼Œç­‰å¾…è¯»å–ã€‚å¤§å¤§å‡å°‘äº†æœåŠ¡ç«¯çš„çº¿ç¨‹æ•°é‡ï¼›")]),t._v(" "),a("h3",{attrs:{id:"nioçš„ç›¸å…³æ¦‚å¿µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nioçš„ç›¸å…³æ¦‚å¿µ"}},[t._v("#")]),t._v(" NIOçš„ç›¸å…³æ¦‚å¿µ")]),t._v(" "),a("h4",{attrs:{id:"selector"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selector"}},[t._v("#")]),t._v(" Selector")]),t._v(" "),a("blockquote",[a("p",[t._v("Selectoræ˜¯Java NIOæ ¸å¿ƒç»„ä»¶ä¸­çš„ä¸€ä¸ªï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªNIO Channelçš„çŠ¶æ€æ˜¯å¦å¤„äºå¯è¯»ã€å¯å†™ï¼›")])]),t._v(" "),a("p",[a("strong",[t._v("SelectionKey")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Connect, è¿æ¥äº‹ä»¶(TCP è¿æ¥), å¯¹åº”äºSelectionKey.OP_CONNECT")])]),t._v(" "),a("li",[a("p",[t._v("Accept, ç¡®è®¤äº‹ä»¶, å¯¹åº”äºSelectionKey.OP_ACCEPT")])]),t._v(" "),a("li",[a("p",[t._v("Read, è¯»äº‹ä»¶, å¯¹åº”äºSelectionKey.OP_READã€‚")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å½“ä¸€ä¸ª"),a("code",[t._v("channel")]),a("strong",[t._v("å‡†å¤‡")]),t._v("å¥½å¯ä»¥è¢«è¯»å–(æ¯”å¦‚socketå·²ç»è¯»åˆ°äº†æ–°çš„å­—èŠ‚ï¼Œå…¶Read Bufferæœ‰å°šæœªè¢«åº”ç”¨è¯»å–çš„æ•°æ®ï¼Œå¯é€šçŸ¥åº”ç”¨ç¨‹åºä»è¯»å–ç¼“å†²åŒºè¿›è¡Œè¯»å–ï¼‰ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("å·²ç»åˆ°è¾¾æ•°æ®æµçš„ç»“å°¾")])]),t._v(" "),a("li",[a("p",[t._v("è¿œç¨‹å¦ä¸€ç«¯å·²ç»å…³é—­æˆ–è€…å‘ç”Ÿé”™è¯¯æ—¶ï¼Œéƒ½ä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°è¯¥"),a("code",[t._v("key")]),t._v("çš„"),a("code",[t._v("ready set")]),t._v("ä¸­ï¼Œå¹¶å°†è¯¥"),a("code",[t._v("key")]),t._v("åŠ å…¥åˆ°"),a("code",[t._v("selected-key set")]),t._v("ä¸­ã€‚")])])])]),t._v(" "),a("li",[a("p",[t._v("Write, å†™äº‹ä»¶, å¯¹åº”äºSelectionKey.OP_WRITEã€‚")]),t._v(" "),a("ul",[a("li",[t._v("å½“ä¸€ä¸ª"),a("code",[t._v("channel")]),t._v(" "),a("strong",[t._v("å‡†å¤‡")]),t._v("å¥½è¿›è¡Œå†™å…¥æ“ä½œï¼ˆæ¯”å¦‚åŸå…ˆsocketå†™å…¥ç¼“å†²å·²æ»¡ï¼Œç°åœ¨å·²ç»å‘é€äº†éƒ¨åˆ†æ•°æ®ï¼Œå†™å…¥ç¼“å†²è…¾å‡ºäº†ä¸€äº›ç©ºé—´ï¼Œå°±ä¼šé€šçŸ¥åº”ç”¨ç¨‹åºè¿›è¡Œå†™å…¥ï¼‰")]),t._v(" "),a("li",[t._v("è¿œç¨‹å¦ä¸€ç«¯å·²ç»å…³é—­æˆ–è€…å‘ç”Ÿé”™è¯¯æ—¶ï¼Œéƒ½ä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°è¯¥"),a("code",[t._v("key")]),t._v("çš„"),a("code",[t._v("ready set")]),t._v("ä¸­ï¼Œå¹¶å°†è¯¥"),a("code",[t._v("key")]),t._v("åŠ å…¥åˆ°"),a("code",[t._v("selected-key set")]),t._v("ä¸­ã€‚")])])])]),t._v(" "),a("p",[a("strong",[t._v("ç›¸å…³æ“ä½œ")])]),t._v(" "),a("p",[t._v("openï¼š åˆ›å»ºä¸€ä¸ªselectorï¼Œselectorç”±ç³»ç»Ÿå±‚é¢çš„æ–¹æ³•è°ƒç”¨ï¼›")]),t._v(" "),a("p",[t._v("wakeup: å¯ä»¥ä»éselectè°ƒç”¨çš„çº¿ç¨‹å»å”¤é†’é˜»å¡åœ¨selectè°ƒç”¨ä¸Šçš„çº¿ç¨‹")]),t._v(" "),a("p",[t._v("selectï¼šå½“æ³¨å†Œçš„äº‹ä»¶åˆ°è¾¾æ—¶ï¼Œè¿”å›ã€‚å¦åˆ™ï¼Œä¼šä¸€ç›´é˜»å¡ï¼›")]),t._v(" "),a("h4",{attrs:{id:"selectionkey"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selectionkey"}},[t._v("#")]),t._v(" SelectionKey")]),t._v(" "),a("p",[a("code",[t._v("interesté›†åˆ")]),t._v(": keyå…³è”çš„channelæ‰€é€‰æ‹©çš„æ„Ÿå…´è¶£çš„äº‹ä»¶é›†åˆã€‚å¯ä»¥é€šè¿‡SelectionKeyè¯»å†™interesté›†åˆã€‚")]),t._v(" "),a("p",[a("code",[t._v("readyé›†åˆ")]),t._v("ï¼šé€šé“å·²ç»å‡†å¤‡å°±ç»ªçš„æ“ä½œçš„é›†åˆã€‚åœ¨ä¸€æ¬¡é€‰æ‹©(Selection)ä¹‹åï¼Œä½ ä¼šé¦–å…ˆè®¿é—®è¿™ä¸ªready setã€‚")]),t._v(" "),a("h4",{attrs:{id:"channel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#channel"}},[t._v("#")]),t._v(" Channel")]),t._v(" "),a("p",[t._v("ServerSocketChannel: æœåŠ¡ç«¯socket channelã€‚ä¸€èˆ¬åªæ³¨å†ŒAcceptäº‹ä»¶ï¼›")]),t._v(" "),a("p",[t._v("SocketChannelï¼šå®¢æˆ·ç«¯socket channelã€‚ä¸€èˆ¬è¿æ¥åï¼Œæ³¨å†Œconnectäº‹ä»¶ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ³¨æ„")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("æ³¨å†Œäº‹ä»¶åªæ˜¯å‘Šè¯‰"),a("code",[t._v("selector")]),t._v("åœ¨æ£€æµ‹åˆ°å„ç§äº‹ä»¶å‡†å¤‡å¥½å¯ä»¥æ‰§è¡Œæ—¶å‘Šè¯‰åº”ç”¨ï¼Œåº”ç”¨å¯ä»¥æ‰§è¡Œç›¸åº”çš„äº‹ä»¶ï¼Œä½†æ˜¯æ³¨å†Œæ„Ÿå…´è¶£çš„äº‹ä»¶"),a("strong",[t._v("å¹¶ä¸æ˜¯å¿…é¡»çš„")]),t._v("ï¼ï¼æ²¡æœ‰æ³¨å†Œäº‹ä»¶ä¾ç„¶å¯ä»¥è¿›è¡Œè¯»å–ã€å†™å…¥æ“ä½œã€‚")]),t._v(" "),a("p",[t._v("æ¯”å¦‚è¯»å–æ“ä½œï¼Œå¦‚æœä¸æ³¨å†Œ"),a("code",[t._v("OP_READ")]),t._v("äº‹ä»¶ï¼Œåº”ç”¨ç¨‹åºä¾ç„¶å¯ä»¥éšæ—¶å°è¯•ä»"),a("code",[t._v("channel")]),t._v("ä¸­è¯»å–æ•°æ®ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯è¯»å–æˆåŠŸï¼Œå› ä¸ºå¯èƒ½"),a("code",[t._v("socket")]),t._v("è¯»å–ç¼“å†²åŒºä¸­å¯èƒ½å¹¶ä¸å­˜åœ¨æ•°æ®ã€‚ä½†æ˜¯å¦‚æœæ³¨å†Œäº†"),a("code",[t._v("OP_READ")]),t._v("äº‹ä»¶ï¼Œåœ¨"),a("code",[t._v("selector")]),t._v("æ£€æµ‹åˆ°è¯¥äº‹ä»¶å‡†å¤‡å¥½äº†å†å»è¯»å–ï¼Œåˆ™å¯ä»¥æœ€å¤§ç¨‹åº¦ä¸Šçš„ä¿è¯å¯ä»¥è¯»åˆ°æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("å†™å…¥ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œä¸æ³¨å†Œ"),a("code",[t._v("OP_WRITE")]),t._v("åº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥éšæ—¶è¿›è¡Œå†™å…¥ï¼Œåªæ˜¯å¯èƒ½å› ä¸ºç¼“å†²åŒºæ»¡è€Œå†™å…¥å¤±è´¥ã€‚æ³¨å†Œ"),a("code",[t._v("OP_WRITE")]),t._v("äº‹ä»¶ï¼Œåœ¨"),a("code",[t._v("selector")]),t._v("æ£€æµ‹åˆ°è¯¥äº‹ä»¶æ—¶å†è¿›è¡Œå†™å…¥ï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦ä¸Šä¿è¯å†™å…¥æˆåŠŸã€‚")]),t._v(" "),a("h4",{attrs:{id:"buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buffer"}},[t._v("#")]),t._v(" Buffer")]),t._v(" "),a("blockquote",[a("p",[t._v("Bufferæ˜¯å”¯ä¸€æ“ä½œchannelçš„æ–¹å¼ï¼Œæ˜¯ç”¨æˆ·æ•°æ®å¤„ç†çš„åŸºç¡€å•å…ƒã€‚")]),t._v(" "),a("p",[t._v("http://blog.ztgreat.cn/article/43")])]),t._v(" "),a("p",[t._v("4ä¸ªå…³é”®å±æ€§ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("capacity å®¹é‡")]),t._v(" "),a("li",[t._v("position å½“å‰ä½ç½®")]),t._v(" "),a("li",[t._v("limit é™åˆ¶")]),t._v(" "),a("li",[t._v("mark æ ‡è®°ä½ç½®")])]),t._v(" "),a("p",[t._v("è¯»å†™åˆ‡æ¢æ—¶ï¼špositionä¼šé‡ç½®ä¸º0ï¼Œlimitä¼šåˆ‡æ¢ä¸ºå†™çš„ä½ç½®ï¼›")]),t._v(" "),a("p",[t._v("è¯»æ¨¡å¼ï¼šæ¯æ¬¡getåï¼Œpositionéƒ½ä¼šåç§»ä¸€ä½ï¼›")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-13-131220.png",alt:"image-20191113211219895"}}),t._v(" "),a("p",[t._v("å†™æ¨¡å¼ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-13-131233.png",alt:"image-20191113211233163"}}),t._v(" "),a("p",[t._v("flipæ“ä½œï¼šflipä¼šè¿›è¡Œç¿»è½¬ï¼ŒæŠŠlimitè®¾ç½®ä¸ºå½“å‰positionä½ç½®ï¼ŒæŠŠpositionå˜ä¸º0ï¼Œå¯ä»¥ä»åˆå§‹ä½ç½®å¼€å§‹è¿›è¡Œè¯»æ“ä½œï¼›")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-13-131422.png",alt:"image-20191113211421721"}}),t._v(" "),a("p",[t._v("resetæ“ä½œï¼šå¯ä»¥ç”¨markæ–¹æ³•å¯ä»¥å½“å‰æ ‡è®°ä½ç½®ï¼Œresetåå›åˆ°æ ‡è®°ä½ç½®ï¼›")]),t._v(" "),a("h4",{attrs:{id:"zero-copy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zero-copy"}},[t._v("#")]),t._v(" Zero-Copy")]),t._v(" "),a("blockquote",[a("p",[t._v("https://mp.weixin.qq.com/s?__biz=MzU0MzQ5MDA0Mw==&mid=2247483913&idx=1&sn=2da53737b8e8908cf3efdae9621c9698&chksm=fb0be89dcc7c618b0d5a1ba8ac654295454cfc2fa81fbae5a6de49bf0a91a305ca707e9864fc&scene=21#wechat_redirect")])]),t._v(" "),a("p",[t._v("æ¦‚è¿°ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-11-232613.png",alt:"image-20191112072612350"}}),t._v(" "),a("p",[t._v("ä¼ ç»Ÿçš„IOè¯»å†™ä¸­ï¼Œç³»ç»Ÿè¯»å†™æ–‡ä»¶æ—¶ï¼Œç»å†äº†ä»¥ä¸‹æ­¥éª¤ï¼š")]),t._v(" "),a("p",[t._v("1.ä»IOè®¾å¤‡æ‹·è´åˆ°kernel spaceã€‚")]),t._v(" "),a("p",[t._v("2.ä»kernel space copy åˆ° user space")]),t._v(" "),a("p",[t._v("3.æ¥ä¸‹æ¥ï¼Œå¦‚æœç³»ç»Ÿéœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œwriteæ“ä½œï¼Œç³»ç»Ÿä¼šå†æŠŠuser spaceçš„å†…å®¹æ‹·è´åˆ°kernel spaceä¸­ï¼Œæœ€åå†å¾€å¯¹æ–¹çš„sockå‘é€è¿™äº›æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("æ•´ä¸ªè¿‡ç¨‹æ€»å…±å‘ç”Ÿäº†å››æ¬¡æ‹·è´ã€‚å¹¶ä¸”å‘ç”Ÿäº†å››æ¬¡çš„ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ‡æ¢ã€‚")]),t._v(" "),a("p",[t._v("ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å‘ç°ä¸€ä¸ªé—®é¢˜")]),t._v(" "),a("p",[a("em",[t._v("ä¸ºä»€ä¹ˆIOéœ€è¦å°†æ•°æ®ä»kernelï¼ˆç³»ç»Ÿå†…æ ¸æ€ï¼‰æ‹·è´åˆ°userï¼ˆç”¨æˆ·æ€ï¼‰ï¼Œå†æ‹·è´å›kernelæ€ï¼Ÿ")])]),t._v(" "),a("p",[t._v("å¸¦ç€è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æå‡ºä»¥ä¸‹æ”¹è¿›")]),t._v(" "),a("p",[t._v("æ”¹è¿›1ï¼šå¯ä»¥å¾ˆå®¹æ˜“çš„å‘ç°ï¼Œ2ï¼Œ3çš„copyæ“ä½œå®é™…ä¸Šæ˜¯æµªè´¹èµ„æºï¼Œå¯ä»¥çœç•¥ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-11-233840.png",alt:"image-20191112073839594"}}),t._v(" "),a("ol",[a("li",[t._v("é¦–å…ˆï¼ˆé€šè¿‡DMAï¼‰å°†æ•°æ®ä»ç£ç›˜è¯»å–åˆ°kernel bufferä¸­ï¼›")]),t._v(" "),a("li",[t._v("ç„¶åå°†kernel bufferæ‹·è´åˆ°socket bufferä¸­ï¼›")]),t._v(" "),a("li",[t._v("æœ€åå°†socket bufferä¸­çš„æ•°æ®copyåˆ°ç½‘å¡è®¾å¤‡ï¼ˆprotocol engineï¼‰ä¸­å‘é€")])]),t._v(" "),a("p",[t._v("ä½†è¿™å¹¶ä¸æ˜¯"),a("code",[t._v("zero-copy")]),t._v("ï¼Œå› ä¸ºç¬¬2æ­¥çš„copyå…¶å®ä¹Ÿæ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚")]),t._v(" "),a("p",[t._v("æ”¹è¿›2ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-11-234408.png",alt:"image-20191112074407565"}}),t._v(" "),a("ol",[a("li",[t._v("å°†æ–‡ä»¶æ‹·è´åˆ°kernel bufferä¸­ï¼›")]),t._v(" "),a("li",[t._v("å‘socket bufferä¸­è¿½åŠ å½“å‰è¦å‘ç”Ÿçš„æ•°æ®åœ¨kernel bufferä¸­çš„ä½ç½®å’Œåç§»é‡ï¼›")]),t._v(" "),a("li",[t._v("æ ¹æ®socket bufferä¸­çš„ä½ç½®å’Œåç§»é‡ç›´æ¥å°†kernel bufferçš„æ•°æ®copyåˆ°ç½‘å¡è®¾å¤‡ï¼ˆprotocol engineï¼‰ä¸­ï¼›")])]),t._v(" "),a("p",[t._v("å®é™…ä¸Šï¼Œä¸Šé¢çš„æ“ä½œå°±æ˜¯çœŸæ­£çš„NIOåŸç†")]),t._v(" "),a("h3",{attrs:{id:"nioçš„ç›¸å…³æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nioçš„ç›¸å…³æ“ä½œ"}},[t._v("#")]),t._v(" NIOçš„ç›¸å…³æ“ä½œ")]),t._v(" "),a("h4",{attrs:{id:"_1-è¯»å–socketchannel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-è¯»å–socketchannel"}},[t._v("#")]),t._v(" 1.è¯»å–SocketChannel")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" buf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" bytesRead "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" socketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ol",[a("li",[t._v("åˆ†é…bufferï¼Œç”¨æ¥ä¿å­˜socketchannelè¯»å–åˆ°çš„æ•°æ®")]),t._v(" "),a("li",[t._v("è°ƒç”¨readæ–¹æ³•ï¼Œå°† "),a("code",[t._v("SocketChannel")]),t._v("çš„æ•°æ®è¯»å–åˆ° "),a("code",[t._v("Buffer")]),t._v("ã€‚è¿”å›çš„"),a("code",[t._v("int")]),t._v("å€¼å‘Šè¯‰æˆ‘ä»¬æœ‰å¤šå°‘å­—èŠ‚å†™åˆ°äº†Bufferé‡Œï¼Œå¦‚æœè¿”å›äº†-1ï¼Œè¡¨ç¤ºå·²ç»è¿æ¥å·²å…³é—­ï¼Œåˆ°äº†æ•°æ®æµç»“å°¾")])]),t._v(" "),a("h4",{attrs:{id:"_2-å†™å…¥socketchannel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-å†™å…¥socketchannel"}},[t._v("#")]),t._v(" 2. å†™å…¥SocketChannel")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" newData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"New String to write to file..."')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" buf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nbuf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasRemaining")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    channel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æ³¨æ„ "),a("code",[t._v("SocketChannel.write()")]),t._v(" æ–¹æ³•æ˜¯åœ¨å¾ªç¯é‡Œè¢«è°ƒç”¨çš„ã€‚ç”±äºæ— æ³•ä¿è¯æ¯æ¬¡æœ‰å¤šå°‘æ•°æ®è¢«è¯»å–åˆ°äº†SocketChannelé‡Œï¼Œå› æ­¤éœ€è¦é‡å¤è°ƒç”¨write()æ–¹æ³•ç›´åˆ°"),a("code",[t._v("Buffer")]),t._v("é‡Œä¸å†æœ‰å­—èŠ‚è¾“å‡ºã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è¸©å‘è®°å½•")]),t._v("1ï¼š")]),t._v(" "),a("p",[t._v("åˆå­¦çš„æ—¶å€™ï¼Œç»å¸¸å‚»ä¹ä¹çš„åœ¨å»ºç«‹è¿æ¥åé©¬ä¸Šæ³¨å†ŒWriteç­‰äº‹ä»¶ï¼ŒæœŸå¾…ç­‰å†™äº‹ä»¶é€šçŸ¥åˆ°å†å»å‘é€æ•°æ®ã€‚å®é™…ä¸Šå¯¹è¿™äº›ç‰¹åˆ«ä¸ç†è§£ï¼›")]),t._v(" "),a("p",[t._v("å†™æ“ä½œçš„å°±ç»ªæ¡ä»¶ä¸ºåº•å±‚ç¼“å†²åŒºæœ‰ç©ºé—²ç©ºé—´ï¼Œè€Œå†™ç¼“å†²åŒºç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯æœ‰ç©ºé—²ç©ºé—´çš„ï¼Œæ‰€ä»¥å½“ä½ æ³¨å†Œå†™äº‹ä»¶åï¼Œå†™æ“ä½œä¸€ç›´æ˜¯å°±ç»ªçš„ï¼Œé€‰æ‹©å¤„ç†çº¿ç¨‹å…¨å ç”¨æ•´ä¸ªCPUèµ„æºã€‚")]),t._v(" "),a("p",[t._v("æœ€å¥½çš„æ–¹æ³•æ˜¯ï¼Œå½“ä½ ç¡®å®æœ‰æ•°æ®è¦å†™æ—¶ï¼Œå†æ³¨å†Œå†™æ“ä½œï¼Œå¹¶åœ¨å†™å®Œä»¥åé©¬ä¸Šå–æ¶ˆæ³¨å†Œã€‚")]),t._v(" "),a("p",[t._v("æˆ–è€…"),a("strong",[t._v("ä¸å»æ³¨å†Œå†™äº‹ä»¶")]),t._v("ï¼Œæœ‰è¦å†™çš„æ•°æ®åˆ™ç›´æ¥å†™æ•°æ®è‡³"),a("code",[t._v("Channel")]),t._v("å³å¯ï¼Œå†™å…¥å¤±è´¥åˆ™è¡¨ç¤º"),a("code",[t._v("Channel")]),t._v("æš‚æ—¶æ²¡æœ‰å‡†å¤‡å¥½è¢«å†™å…¥ï¼Œæ­¤æ—¶åº”ç”¨å¯ä»¥å‘"),a("code",[t._v("Channel")]),t._v("æ³¨å†Œå†™äº‹ä»¶ï¼Œè®©"),a("code",[t._v("Channel")]),t._v("åœ¨å‡†å¤‡å¥½æ¥æ”¶å†™äº‹ä»¶æ—¶å‘Šè¯‰åº”ç”¨ï¼Œä½†æ˜¯ä¸€æ—¦åº”ç”¨å†™å®Œæ‰€æœ‰çš„æ•°æ®ï¼Œåˆ™ä¸€èˆ¬ä¼šå–æ¶ˆæ³¨å†Œçš„å†™äº‹ä»¶ï¼Œå› ä¸ºå¦‚æœæ•°æ®å†™å®Œäº†ï¼Œä½†æ˜¯æ²¡æœ‰å–æ¶ˆæ³¨å†Œçš„å†™äº‹ä»¶ï¼Œ"),a("code",[t._v("Selector.select")]),t._v("æ–¹æ³•å¯èƒ½ä¼šç»å¸¸å› ä¸ºæœ‰å†™äº‹ä»¶å‡†å¤‡å®Œæ¯•è€Œè¿”å›ï¼Œä½†æ˜¯åº”ç”¨å´æ— æ•°æ®éœ€è¦å†™ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è¸©å‘è®°å½•")]),t._v("2ï¼š")]),t._v(" "),a("p",[t._v("èµ·åˆå¯¹"),a("code",[t._v("OP_CONNECT")]),t._v("äº‹ä»¶è¿˜æœ‰"),a("code",[t._v("finishConnect")]),t._v("ä¸ç†è§£ï¼Œ"),a("code",[t._v("OP_CONNECT")]),t._v("äº‹ä»¶ä½•æ—¶è§¦å‘ï¼Œç‰¹åˆ«æ˜¯ä¸ºä»€ä¹ˆè¦åœ¨"),a("code",[t._v("key.isConnectable()")]),t._v("åˆ†æ”¯é‡Œè°ƒç”¨"),a("code",[t._v("finishConnect")]),t._v("æ–¹æ³•åæ‰èƒ½è¿›è¡Œè¯»å†™æ“ä½œã€‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆï¼Œåœ¨"),a("code",[t._v("non-blocking")]),t._v("æ¨¡å¼ä¸‹è°ƒç”¨"),a("code",[t._v('socketChannel.connect(new InetSocketAddress("127.0.0.1",8080));')]),t._v("è¿æ¥è¿œç¨‹ä¸»æœºï¼Œå¦‚æœè¿æ¥èƒ½ç«‹å³å»ºç«‹å°±åƒæœ¬åœ°è¿æ¥ä¸€æ ·ï¼Œè¯¥æ–¹æ³•ä¼šç«‹å³è¿”å›"),a("code",[t._v("true")]),t._v("ï¼Œå¦åˆ™è¯¥æ–¹æ³•ä¼šç«‹å³è¿”å›"),a("code",[t._v("false")]),t._v(",ç„¶åç³»ç»Ÿåº•å±‚è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ã€‚è¿æ¥æœ‰ä¸¤ç§ç»“æœï¼Œä¸€ç§æ˜¯æˆåŠŸè¿æ¥ï¼Œç¬¬äºŒç§æ˜¯å¼‚å¸¸ï¼Œä½†æ˜¯"),a("code",[t._v("connect")]),t._v("æ–¹æ³•å·²ç»è¿”å›ï¼Œæ— æ³•é€šè¿‡è¯¥æ–¹æ³•çš„è¿”å›å€¼æˆ–è€…æ˜¯å¼‚å¸¸æ¥é€šçŸ¥ç”¨æˆ·ç¨‹åºå»ºç«‹è¿æ¥çš„æƒ…å†µï¼Œæ‰€ä»¥ç”±"),a("code",[t._v("OP_CONNECT")]),t._v("äº‹ä»¶å’Œ"),a("code",[t._v("finishConnect")]),t._v("æ–¹æ³•æ¥é€šçŸ¥ç”¨æˆ·ç¨‹åºã€‚ä¸ç®¡ç³»ç»Ÿåº•å±‚ä¸‰æ¬¡è¿æ¥æ˜¯å¦æˆåŠŸï¼Œ"),a("code",[t._v("selector")]),t._v("éƒ½ä¼šè¢«å”¤é†’ç»§è€Œè§¦å‘"),a("code",[t._v("OP_CONNECT")]),t._v("äº‹ä»¶ï¼Œå¦‚æœæ¡æ‰‹æˆåŠŸï¼Œå¹¶ä¸”è¯¥è¿æ¥æœªè¢«å…¶ä»–çº¿ç¨‹å…³é—­ï¼Œ"),a("code",[t._v("finishConnect")]),t._v("ä¼šè¿”å›"),a("code",[t._v("true")]),t._v("ï¼Œç„¶åå°±å¯ä»¥é¡ºåˆ©çš„è¿›è¡Œ"),a("code",[t._v("channle")]),t._v("è¯»å†™ã€‚å¦‚æœç½‘ç»œæ•…éšœï¼Œæˆ–è€…è¿œç¨‹ä¸»æœºæ•…éšœï¼Œæ¡æ‰‹ä¸æˆåŠŸï¼Œç”¨æˆ·ç¨‹åºå¯ä»¥é€šè¿‡"),a("code",[t._v("finishConnect")]),t._v("æ–¹æ³•è·å¾—åº•å±‚çš„å¼‚å¸¸é€šçŸ¥ï¼Œè¿›è€Œå¤„ç†å¼‚å¸¸ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è¸©å‘è®°å½•3ï¼šå¤„ç†OP_WRITE")]),t._v("\nOP_WRITEå¤„ç†ä¸å½“å¾ˆå®¹æ˜“å¯¼è‡´CPU 100%\n"),a("strong",[t._v("OP_WRITEè§¦å‘æ¡ä»¶")]),t._v("ï¼š\nå‰æ: interestäº†OP_WRITE\n"),a("strong",[t._v("è§¦å‘æ¡ä»¶")]),t._v(":")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("socketå‘é€ç¼“å†²åŒºå¯å†™")])]),t._v(" "),a("li",[a("p",[t._v("è¿œç«¯å…³é—­")])]),t._v(" "),a("li",[a("p",[t._v("æœ‰é”™è¯¯å‘ç”Ÿ")])])]),t._v(" "),a("p",[a("strong",[t._v("æ­£ç¡®çš„å¤„ç†æ–¹å¼")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä»…åœ¨å·²ç»è¿æ¥çš„channelä¸Šæ³¨å†Œ")]),t._v(" "),a("li",[t._v("ä»…åœ¨æœ‰æ•°æ®å¯å†™çš„æ—¶å€™æ‰æ³¨å†Œ")]),t._v(" "),a("li",[t._v("è§¦å‘ä¹‹åç«‹å³å–æ¶ˆæ³¨å†Œï¼Œå¦åˆ™ä¼šç»§ç»­è§¦å‘å¯¼è‡´å¾ªç¯")]),t._v(" "),a("li",[t._v("å¤„ç†å®Œæˆåè§†æƒ…å†µå†³å®šæ˜¯å¦ç»§ç»­æ³¨å†Œï¼Œ\nå¦‚æœæ²¡æœ‰å®Œå…¨å†™å…¥ï¼Œç»§ç»­æ³¨å†Œ\nå¦‚æœå…¨éƒ¨å†™å…¥ï¼Œæ— éœ€æ³¨å†Œ")])]),t._v(" "),a("p",[t._v("eg: æœ‰å†™æ•°æ®éœ€æ±‚æ—¶è®¢é˜…OP_WRITEäº‹ä»¶,æ•°æ®å‘é€å®Œæˆå–æ¶ˆè®¢é˜….")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://tech.fenxiangz.com/topic/77/nio-%E5%90%84%E7%A7%8D%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E7%82%B9",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://tech.fenxiangz.com/topic/77/nio-%E5%90%84%E7%A7%8D%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E7%82%B9"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_7-nioå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-nioå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯"}},[t._v("#")]),t._v(" 7.NIOå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯")]),t._v(" "),a("h3",{attrs:{id:"nioå®ç°csæ¨¡å‹çš„æµç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nioå®ç°csæ¨¡å‹çš„æµç¨‹"}},[t._v("#")]),t._v(" NIOå®ç°CSæ¨¡å‹çš„æµç¨‹")]),t._v(" "),a("h4",{attrs:{id:"æœåŠ¡ç«¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡ç«¯"}},[t._v("#")]),t._v(" æœåŠ¡ç«¯")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-19-221145.png",alt:"image-20191120061144474"}}),t._v(" "),a("h4",{attrs:{id:"å®¢æˆ·ç«¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®¢æˆ·ç«¯"}},[t._v("#")]),t._v(" å®¢æˆ·ç«¯")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-19-221910.png",alt:"image-20191120061909011"}}),t._v(" "),a("h4",{attrs:{id:"ä»£ç å®ä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç å®ä¾‹"}},[t._v("#")]),t._v(" ä»£ç å®ä¾‹")]),t._v(" "),a("p",[t._v("ç›‘å¬å®¢æˆ·ç«¯çš„åˆ°è¾¾ï¼›")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),t._v(" selector "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),t._v(" serverChannel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserverChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureBlocking")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserverChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetSocketAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›‘å¬")]),t._v("\nserverChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OP_ACCEPT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯åœ°å€:"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" serverChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" selectionKeys "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectedKeys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" selectionKeyIterator "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selectionKeys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectionKeyIterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),t._v(" selectionKey "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selectionKeyIterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç§»é™¤key")]),t._v("\n      selectionKeyIterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAcceptable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),t._v(" serverSocketChannel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" selectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("channel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€å®šå¯ä»¥æ‹¿åˆ°å®¢æˆ·ç«¯")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" clientChannel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" serverSocketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("accept")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        clientChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureBlocking")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clientChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æ¥å—å®¢æˆ·ç«¯æ•°æ®ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("readSelector "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\tsocketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("readSelector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OP_READ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" readCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" readSelector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("readCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" selectionKeys "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" readSelector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectedKeys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" selectionKeyIterator "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selectionKeys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectionKeyIterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),t._v(" selectionKey "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selectionKeyIterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç§»é™¤key")]),t._v("\n\t\t\t\t\t\t\tselectionKeyIterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReadable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" socketChannel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" selectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("channel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" byteBuffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\tsocketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" receiveData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("position")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//\t\t\t\t\t\t\tString receiveData= Charset.forName("UTF-8").decode(byteBuffer).toString();')]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯æ¥æ”¶åˆ°æ•°æ®ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" receiveData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å›é€å®¢æˆ·ç«¯æ•°æ®")]),t._v("\n                writeBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\twriteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡ç«¯æ¥æ”¶åˆ°æ•°æ®ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" receiveData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\twriteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writeBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasRemaining")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" len "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" socketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writeBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("len "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å†™å…¥æ•°æ®:"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" len"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯å·²æ— æ³•å‘é€æ•°æ®ï¼"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å®¢æˆ·ç«¯ç›‘å¬è¿æ¥æˆåŠŸï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),t._v(" selector "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" socketChannel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tsocketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureBlocking")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" connected "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" socketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetSocketAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connected"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tsocketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OP_READ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" req "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä½ å¥½ï¼ŒnioæœåŠ¡ç«¯342"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä¸ºå­—èŠ‚ç¼“å†²åŒºåˆ†é…æŒ‡å®šå­—èŠ‚å¤§å°çš„å®¹é‡")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" writeBuffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å°†å†…å®¹å†™å…¥ç¼“å†²åŒº")]),t._v("\n\t\t\t\twriteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åè½¬ç¼“å†²åŒº")]),t._v("\n\t\t\t\twriteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¾“å‡ºæ‰“å°ç¼“å†²åŒºçš„å¯è¯»å¤§å°")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writeBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remaining")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å°†å†…å®¹å†™å…¥ç®¡é“ä¸­")]),t._v("\n\t\t\t\tsocketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writeBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("writeBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasRemaining")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Send 2 server succeed."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tsocketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OP_CONNECT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯å¯åŠ¨æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡å™¨ä¿¡æ¯ï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" socketChannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRemoteAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‹¿åˆ°å®¢æˆ·ç«¯æ•°æ®")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" selectionKeys "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectedKeys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" selectionKeyIterator "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selectionKeys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectionKeyIterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),t._v(" selectionKey "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selectionKeyIterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\tselectionKeyIterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isConnectable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" channel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" selectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("channel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("channel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("finishConnect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t\tchannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OP_READ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" byteBuffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\tbyteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\tbyteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä½ å¥½ï¼ŒnioæœåŠ¡ç«¯23432"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\tbyteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasRemaining")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" len "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" channel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("byteBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("len "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å†™å…¥æ•°æ®:"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" len"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯å·²æ— æ³•å‘é€æ•°æ®ï¼"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReadable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\tselectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("interestOps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("interestOps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OP_READ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" channel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" selectionKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("channel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\tbuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\tchannel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\tbuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Charset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"utf-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("decode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯æ¥æ”¶åˆ°è¿”å›æ•°æ®["')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"æ¶ˆæ¯åˆ°è¾¾é‡å¤è§¦å‘äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆæ¯åˆ°è¾¾é‡å¤è§¦å‘äº‹ä»¶"}},[t._v("#")]),t._v(" æ¶ˆæ¯åˆ°è¾¾é‡å¤è§¦å‘äº‹ä»¶")]),t._v(" "),a("p",[t._v("selecotrç›‘å¬åˆ°readäº‹ä»¶åï¼Œéœ€è¦å–æ¶ˆç»§ç»­å¯¹keyOpsçš„ç›‘å¬ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-19-232613.png",alt:"image-20191120072613024"}})]),t._v(" "),a("p",[t._v("å¦åˆ™ï¼Œselectorä¸‹æ¬¡selectçš„æ—¶å€™ï¼Œä¾ç„¶èƒ½å¤ŸæŸ¥è¯¢åˆ°æœ‰selection-key")]),t._v(" "),a("h2",{attrs:{id:"_8-ç²˜åŒ…ä¸æ‹†åŒ…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-ç²˜åŒ…ä¸æ‹†åŒ…"}},[t._v("#")]),t._v(" 8.ç²˜åŒ…ä¸æ‹†åŒ…")]),t._v(" "),a("h3",{attrs:{id:"_8-1åŸºæœ¬æ¦‚å¿µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1åŸºæœ¬æ¦‚å¿µ"}},[t._v("#")]),t._v(" 8.1åŸºæœ¬æ¦‚å¿µ")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-16-131559.jpg",alt:"img"}}),t._v(" "),a("p",[t._v("tcpæ˜¯é¢å‘è¿æ¥ã€ä¾é å­—èŠ‚æµä¼ è¾“çš„åè®®ã€‚")]),t._v(" "),a("p",[t._v("tcpæœ¬èº«åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ˜¯æœ‰åºçš„ä¸”å¯é çš„ã€‚")]),t._v(" "),a("p",[t._v("tcpåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸å­˜åœ¨ç²˜åŒ…æˆ–æ‹†åŒ…çš„è¯´æ³•ã€‚ç²˜åŒ…å’Œæ‹†åˆ†ä¸»è¦æ˜¯ç«™åœ¨ä¸Šå±‚ï¼ˆåº”ç”¨åœºæ™¯ã€ä¸šåŠ¡é€»è¾‘ï¼‰çš„è§’åº¦æ¥è¯´çš„ã€‚")]),t._v(" "),a("p",[t._v("ä¸¾ä¸ªä¾‹å­ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-16-131714.jpg",alt:"img"}}),t._v(" "),a("p",[t._v("å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ä¼ è¾“2ä¸ªæ•°æ®åŒ…ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒæœåŠ¡ç«¯æ¥å—åˆ°çš„ä¹Ÿæ˜¯2ä¸ªæ•°æ®åŒ…ã€‚")]),t._v(" "),a("p",[t._v("ä½†æ˜¯å®¢æˆ·ç«¯åœ¨å‘é€è¿‡ç¨‹ä¸­ï¼Œç”±äºç¼“å­˜çš„åŸå› ï¼Œä¸¤ä¸ªæ•°æ®åŒ…åŒæ—¶åˆ°è¾¾ã€‚é‚£ä¹ˆæœåŠ¡ç«¯æ¥å—çš„æƒ…å†µå°±å˜æˆäº†ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"53%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-16-131849.jpg",alt:"img"}}),t._v(" "),a("p",[t._v("è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œç”±äºæœåŠ¡ç«¯çš„æ¥æ”¶ç¼“å­˜æ¯”è¾ƒå°ï¼Œè™½ç„¶å®¢æˆ·ç«¯å‘é€äº†1ä¸ªæ•°æ®åŒ…ï¼Œä½†æ˜¯æœåŠ¡ç«¯å¿…é¡»é€šè¿‡ä¸¤æ¬¡æ¥æ¥æ”¶ï¼Œè¿™æ ·å°±å¿…é¡»æ‹†åŒ…ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-16-132611.png",alt:"image-20191116212610271"}}),t._v(" "),a("h3",{attrs:{id:"_8-2è§£å†³æ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" 8.2è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("ç”±äºç²˜åŒ…å’Œæ‹†åŒ…çš„ç°è±¡äº§ç”Ÿï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„æ•°æ®ä¼ è¾“ä¼šå‡ºç°ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š")]),t._v(" "),a("p",[t._v("a.ä¼ è¾“å­—ç¬¦ä¸²æ—¶ï¼Œå­—ç¬¦ä¸²è‡ªåŠ¨æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œé€ æˆè§£æé”™è¯¯ï¼›ï¼ˆç²˜åŒ…é—®é¢˜ï¼‰")]),t._v(" "),a("p",[t._v("b.ä¼ é€’é•¿å­—ç¬¦ä¸²æ—¶ï¼Œè‡ªåŠ¨æ‹†åˆ†æˆäº†å¤šä¸ªå°çš„å­—ç¬¦ä¸²ï¼Œç”šè‡³è¿˜ä¼šè‡ªåŠ¨ä¸¢å¼ƒä¸­é—´çš„å­—ç¬¦ä¸²ã€‚ï¼ˆæ‹†åŒ…é—®é¢˜ï¼‰")]),t._v(" "),a("p",[t._v("ä¸€èˆ¬è§£å†³æ–¹æ¡ˆæœ‰ä»¥ä¸‹å‡ ç§ï¼š")]),t._v(" "),a("p",[t._v("a.åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ ‡è®°å¼€å§‹å’Œç»“æŸä½ç½®ï¼Œæ¯”å¦‚é€šè¿‡æ¢è¡Œç¬¦æ¥åˆ¤æ–­æ˜¯å¦ç»“æŸï¼›")]),t._v(" "),a("img",{staticStyle:{zoom:"15%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-20-131030.png",alt:"image-20191120211029655"}}),t._v(" "),a("p",[t._v("b.æ•°æ®ä¼ è¾“æ—¶ï¼Œä½¿ç”¨å›ºå®šçš„å¤´éƒ¨ï¼Œåœ¨æ¶ˆæ¯å¤´ä¸­æŒ‡æ˜æ¶ˆæ¯çš„é•¿åº¦ï¼›")]),t._v(" "),a("img",{staticStyle:{zoom:"15%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-20-131100.png",alt:"image-20191120211100306"}}),t._v(" "),a("p",[t._v("c.æ··åˆæ¨¡å¼ï¼šé€šè¿‡å›ºå®šå¤´éƒ¨ä¿¡æ¯ï¼Œå¹¶ä¸”åŠ ä¸Šæ•°æ®æè¿°ï¼Œæœ€åå¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼›")]),t._v(" "),a("h3",{attrs:{id:"_8-3ä»£ç å®ä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3ä»£ç å®ä¾‹"}},[t._v("#")]),t._v(" 8.3ä»£ç å®ä¾‹")]),t._v(" "),a("p",[t._v("é¦–å…ˆæ¥çœ‹ä¸€ä¸‹å¼‚å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„æ¶ˆæ¯æ˜¯æ€ä¹ˆæ ·çš„ä¸€ä¸ªå½¢å¼ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("ç²˜åŒ…æƒ…å†µ")])]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å…ˆè¿ç»­å‘é€å¤šä¸ªæ¶ˆæ¯")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-20-125648.png",alt:"image-20191120205648416"}}),t._v(" "),a("p",[t._v("ç»“æœæ§åˆ¶å°æ‰“å°çš„æ¶ˆæ¯ä¸ºï¼šæœåŠ¡ç«¯æ¥æ”¶åˆ°æ•°æ®:test1test2test3test4")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("æ‹†åŒ…æƒ…å†µ")])])]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å°†è¯»å–çš„bufferè®¾ç½®ä¸º4ï¼Œç„¶åçœ‹æœåŠ¡ç«¯æ¥æ”¶çš„æƒ…å†µã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-20-125855.png",alt:"image-20191120205854860"}}),t._v(" "),a("p",[t._v("å¯ä»¥çœ‹å‡ºï¼ŒæœåŠ¡ç«¯æ¥å—åˆ°çš„æ•°æ®æ—¶æ‹†åˆ†å¼€çš„ï¼Œå¯¼è‡´æ•°æ®é”™ä¹±äº†ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("æ–¹æ¡ˆä»‹ç»")])]),t._v(" "),a("p",[t._v("é‚£ä¹ˆå¦‚ä½•å¯¹æ•°æ®è¿›è¡Œå°åŒ…å’Œæ‹†åŒ…å‘¢ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("1")]),t._v(".é¦–å…ˆå®šä¹‰ä¸€ä¸ªpacketçš„è§„åˆ™")]),t._v(" "),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-12-17-023554.png",alt:"image-20191217103552727"}}),t._v(" "),a("p",[t._v("packetåˆ†ä¸º2ç§æƒ…å†µã€‚å¦‚æœæ˜¯é¦–åŒ…ï¼Œæˆ‘ä»¬ä¼šç”¨å‰é¢4ä½æ¥å­˜å‚¨è¿™æ¬¡packetçš„å¤§å°ä¿¡æ¯ï¼Œåé¢æ‰€æœ‰çš„éƒ½ç”¨æ¥å­˜æ”¾åŒ…ä½“ä¿¡æ¯ï¼Œç›´åˆ°æ¶ˆæ¯å‘é€å®Œæˆï¼›")]),t._v(" "),a("p",[a("strong",[t._v("2")]),t._v(".å®šä¹‰packetç±»ã€‚è¿™é‡Œå…ˆå®šä¹‰"),a("code",[t._v("StringSendPacket")]),t._v("å’Œ"),a("code",[t._v("StringReceivePacket")]),t._v("çš„ç»“æ„ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringReceivePacket")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReceivePacket")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteArrayOutputStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * æ„é€ æ–¹æ³•\n\t * @param len æ¥æ”¶çš„packeté•¿åº¦ï¼Œæ ¹æ®packetçš„å¤´éƒ¨ä¿¡æ¯è·å–\n\t */")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringReceivePacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" len"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" len"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteArrayOutputStream")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteArrayOutputStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("closeStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteArrayOutputStream")]),t._v(" stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("closeStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("string "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toByteArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­—ç¬¦ä¸²å‘é€Packet")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringSendPacket")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SendPacket")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteArrayInputStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€çš„å­—ç¬¦ä¸² - å­—èŠ‚æ•°ç»„")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringSendPacket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteArrayInputStream")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteArrayInputStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("3")]),t._v(".å®ç°æœåŠ¡ç«¯æ¥æ”¶packetã€ä»¥åŠå®¢æˆ·ç«¯å‘é€packetçš„é€»è¾‘")]),t._v(" "),a("p",[t._v("ç±»å›¾")]),t._v(" "),a("p",[t._v("https://www.processon.com/diagraming/5dcbff07e4b0754822a4b47b")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-12-17-084541.png",alt:"image-20191217164541349"}}),t._v(" "),a("p",[t._v("å‘é€é€»è¾‘")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-12-17-040612.png",alt:"image-20191217120611730"}})]),t._v(" "),a("p",[t._v("å…ˆå°†stringè½¬åŒ–ä¸ºInputStreamï¼Œé€šè¿‡ReadableByteChannelä¼ è¾“åˆ°bufferï¼Œæœ€åé€šè¿‡socketChannelå†™å‡ºå»ã€‚")]),t._v(" "),a("p",[t._v("æ˜ å°„åˆ°ä»£ç ä¸Šé¢ï¼š")]),t._v(" "),a("p",[t._v("i. TCPClientå‘é€ä¸€ä¸ªå­—ç¬¦ä¸²")]),t._v(" "),a("p",[t._v("ii. é€šè¿‡SendPacketæ„é€ æ–¹æ³•åŒ…è£…æˆpacketï¼Œç„¶åè°ƒç”¨senderDispatcheræ¥å‘é€")]),t._v(" "),a("p",[t._v("iii. ç¬¬ä¸‰æ­¥æ¯”è¾ƒå¤æ‚ï¼Œdispatcherçš„"),a("code",[t._v("send(SendPacket packet)")]),t._v("æ–¹æ³•å®é™…ä¸Šæ˜¯å°†packetåŠ å…¥åˆ°å‘é€é˜Ÿåˆ—é‡Œé¢ï¼Œ")]),t._v(" "),a("p",[t._v("ç„¶åå¯åŠ¨å‘é€çº¿ç¨‹ã€‚å‘é€çº¿ç¨‹ä¸æ–­çš„å–å‡ºpacketï¼Œå¹¶ä¸”åˆ¤æ–­packetæ˜¯å¦ä¸ºnullï¼Œå­˜å…¥ä¸´æ—¶å˜é‡ä¸­ï¼Œç­‰å¾…è¢«socketChannelè¯»å–ã€‚")]),t._v(" "),a("p",[t._v("ç„¶åè°ƒç”¨senderçš„sendAsyncæ–¹æ³•ã€‚")]),t._v(" "),a("p",[t._v("iv.  senderçš„sendAsyncæ–¹æ³•å…¶å®å°±æ˜¯å‘socketChannelæ³¨å†Œä¸€ä¸ªsocket writeableäº‹ä»¶ã€‚è¿™ä¸ªè¿‡ç¨‹é€šè¿‡IoProviderçš„registOutputæ–¹æ³•æ¥å®ç°ã€‚å½“äº‹ä»¶è§¦å‘åï¼Œæ‰§è¡Œå›è°ƒBaseHandleOutputCallbackæ–¹æ³•ã€‚")]),t._v(" "),a("p",[t._v("vi. åœ¨callbackæ–¹æ³•é‡Œï¼Œé€šè¿‡"),a("code",[t._v("IOArgsProcessor")]),t._v("çš„"),a("code",[t._v("provideIoArgs")]),t._v("æ¥å¾—åˆ°"),a("code",[t._v("ioargs")]),t._v("å®ä¾‹ã€‚ "),a("code",[t._v("provideIoArgs")]),t._v(" çš„å®ç°æ–¹æ³•ä¸–çºªä¸Šä¹Ÿæ˜¯åœ¨åœ¨"),a("code",[t._v("AsyncSendDispatcher")]),t._v("é‡Œã€‚å®ƒå®é™…ä¸Šï¼Œæ˜¯æ‹¿åˆ°å‘é€çº¿ç¨‹å–å‡ºçš„packetï¼Œå°†packetè¯»å–åˆ°ioArgsçš„bufferé‡Œï¼Œç„¶åå°†ioArgsçš„bufferå†™å…¥åˆ°socketChannelé‡Œï¼Œå®Œæˆå‘é€æµç¨‹ã€‚")]),t._v(" "),a("p",[t._v("æ¥æ”¶é€»è¾‘")]),t._v(" "),a("p",[t._v("å’Œå‘é€é€»è¾‘ç›¸å")]),t._v(" "),a("p",[a("strong",[t._v("ä»£ç åœ°å€")])]),t._v(" "),a("blockquote",[a("p",[t._v("https://gitee.com/dendi.ke/thread-demo/tree/master/socket-packet")])]),t._v(" "),a("h2",{attrs:{id:"_9-åˆ†ç‰‡æ•°æ®å‘é€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-åˆ†ç‰‡æ•°æ®å‘é€"}},[t._v("#")]),t._v(" 9.åˆ†ç‰‡æ•°æ®å‘é€")]),t._v(" "),a("p",[t._v("ä¹‹å‰å‘é€æ•°æ®æ—¶ï¼Œæ— è®ºæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ˜¯æ–‡ä»¶ï¼Œéƒ½æ˜¯å…ˆè¯»å–åˆ°å†…å­˜ä¸­ï¼Œä»¥byte[]æ•°ç»„çš„å½¢å¼å­˜å‚¨ã€‚å½“éœ€è¦å‘é€æ—¶ï¼Œå†å°†byte[]å†™å…¥ByteBufferé‡Œï¼Œäº¤ç»™channelå‘é€å‡ºå»ã€‚")]),t._v(" "),a("p",[t._v("ä½†æ˜¯å¦‚æœå‘é€çš„æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ–‡ä»¶ï¼Œè¯»å–åˆ°å†…å­˜ä¸­å»å°±ä¼šå ç”¨å¤ªå¤šå†…å­˜ï¼Œå¾ˆå¯èƒ½é€ æˆå†…å­˜æº¢å‡ºã€‚æ‰€ä»¥éœ€è¦é‡‡å–æ–‡ä»¶åˆ†ç‰‡å‘é€çš„æ–¹æ¡ˆï¼Œå°†ä¸€ä¸ªæ–‡ä»¶åˆ†æˆå¤šä¸ªæ•°æ®åŒ…åˆ†å¼€å‘é€ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_9-1-åŸºæœ¬æ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-åŸºæœ¬æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" 9.1 åŸºæœ¬æ–¹æ¡ˆ")]),t._v(" "),a("blockquote",[a("p",[t._v("å®šä¹‰åŸºæœ¬Frameç±»å‹")])]),t._v(" "),a("p",[t._v("å’ŒPacketç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹Ÿå®šä¹‰äº†Frameçš„è§„åˆ™ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-12-17-122721.png",alt:"image-20191217202720359"}}),t._v(" "),a("blockquote",[a("p",[t._v("é¦–å¸§é€»è¾‘")])]),t._v(" "),a("p",[t._v("ä½†æ˜¯å’ŒPacketä¸åŒçš„æ˜¯ï¼Œframeçš„å‘é€åˆ†ä¸º"),a("code",[t._v("é¦–å¸§")]),t._v("å’Œ"),a("code",[t._v("bodyå¸§")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("é¦–å¸§å¸§å¤´é‡Œçš„ä¿¡æ¯åŒ…å«ï¼š")]),t._v(" "),a("p",[t._v("æ•´ä¸ªéœ€è¦å‘é€æ–‡ä»¶çš„å¤§å°ï¼Œå‘é€ç±»å‹ï¼Œå”¯ä¸€æ ‡è¯†ï¼Œæ ‡å‡†ï¼Œå…¶ä»–ä¿¡æ¯ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-12-17-121947.png",alt:"image-20191217201947178"}}),t._v(" "),a("p",[t._v("é¦–å¸§çš„å¸§ä½“é‡Œå­˜æ”¾çš„ä¿¡æ¯å…¶å®å°±æ˜¯packetçš„ä¿¡æ¯ï¼Œè¿™é‡Œæˆ‘ä»¬ä¿®æ”¹äº†ä¸€ä¸‹packetçš„è§„åˆ™ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-12-17-122958.png",alt:"image-20191217202958133"}}),t._v(" "),a("p",[t._v("å¦‚æœæ˜¯é¦–åŒ…çš„è¯ï¼Œæˆ‘ä»¬ç”¨å‰é¢5ä½ç”¨æ¥è®°å½•åŒ…ä½“çš„å¤§å°ï¼Œç¬¬6ä½è®°å½•åŒ…çš„ç±»å‹ï¼Œæ˜¯æ–‡ä»¶è¿˜æ˜¯å­—ç¬¦ä¸²æˆ–è€…å…¶ä»–çš„ã€‚ä»ç¬¬7ä½å¼€å§‹éƒ½æ˜¯å®é™…çš„åŒ…ä½“ä¿¡æ¯ã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥å¤´å¸§çš„å¸§ä½“å¤§å°æ˜¯ä¸€èˆ¬æ˜¯å›ºå®šçš„6ä½ï¼Œåªéœ€è¦å‘Šè¯‰ä¸€ä¸‹å‘é€çš„packetçš„æ•´ä¸ªå¤§å°å’Œç±»å‹å³å¯ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("å¸§é€»è¾‘")])]),t._v(" "),a("h2",{attrs:{id:"_10-socketå¹¶å‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-socketå¹¶å‘"}},[t._v("#")]),t._v(" 10.Socketå¹¶å‘")]),t._v(" "),a("h3",{attrs:{id:"å®¢æˆ·ç«¯æœåŠ¡å™¨è¿æ¥æ•°é‡é™åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®¢æˆ·ç«¯æœåŠ¡å™¨è¿æ¥æ•°é‡é™åˆ¶"}},[t._v("#")]),t._v(" å®¢æˆ·ç«¯æœåŠ¡å™¨è¿æ¥æ•°é‡é™åˆ¶")]),t._v(" "),a("p",[t._v("49152 ~ 65535 ç«¯å£å·æ˜¯ä¸å…è®¸è¢«å ç”¨çš„ï¼Œæ˜¯åŠ¨æ€åˆ†é…çš„ã€‚")]),t._v(" "),a("p",[t._v("ç³»ç»Ÿå•è¿›ç¨‹â€œ"),a("strong",[a("a",{attrs:{href:"#%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84"}},[t._v("æ–‡ä»¶å¥æŸ„")])]),t._v("â€æœ€å¤§é™åˆ¶")]),t._v(" "),a("h3",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),a("h2",{attrs:{id:"http"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http"}},[t._v("#")]),t._v(" HTTP")]),t._v(" "),a("p",[t._v("httpæ˜¯å¦‚æœè¯†åˆ«è¯·æ±‚çš„ï¼Ÿ")]),t._v(" "),a("p",[t._v("httpæ˜¯å¦‚æœæ¥å—æ•°æ®åŒ…çš„ï¼Ÿ")]),t._v(" "),a("p",[t._v("httpæ˜¯å¦‚ä½•åˆ¤æ–­è¯·æ±‚æ•°æ®æ¥æ”¶åˆ°åº•çš„ï¼Ÿ")]),t._v(" "),a("p",[t._v("1.xå’Œ2.xçš„åŒºåˆ«")]),t._v(" "),a("h1",{attrs:{id:"nettyæ¡†æ¶-æ¸¸æˆæœåŠ¡å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nettyæ¡†æ¶-æ¸¸æˆæœåŠ¡å™¨"}},[t._v("#")]),t._v(" Nettyæ¡†æ¶ (æ¸¸æˆæœåŠ¡å™¨)")]),t._v(" "),a("p",[t._v("NetttyæœåŠ¡ç«¯")]),t._v(" "),a("p",[t._v("Nettyå®¢æˆ·ç«¯")]),t._v(" "),a("p",[t._v("é•¿è¿æ¥ä¸çŸ­è¿æ¥åŒºåˆ«")]),t._v(" "),a("p",[t._v("æ¶ˆæ¯åºåˆ—åŒ–")]),t._v(" "),a("h2",{attrs:{id:"æ•°æ®åº“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“"}},[t._v("#")]),t._v(" æ•°æ®åº“")]),t._v(" "),a("p",[t._v("mysqlå®‰è£…")]),t._v(" "),a("blockquote",[a("p",[t._v("https://www.jianshu.com/p/4fc53d7d7620")])]),t._v(" "),a("p",[t._v("mysqlæ¦‚è¿°")]),t._v(" "),a("p",[t._v("mysqlä¼˜åŒ–æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("æ•°æ®åº“ä¸‰å¤§èŒƒå¼")]),t._v(" "),a("p",[t._v("åˆ†åº“åˆ†è¡¨")]),t._v(" "),a("p",[t._v("æ°´å¹³åˆ†å‰²å–æ¨¡ç®—æ³•")]),t._v(" "),a("p",[t._v("ç´¢å¼•æ¦‚è¿°")]),t._v(" "),a("p",[t._v("ç´¢å¼•åº•å±‚å®ç°åŸç†")]),t._v(" "),a("p",[t._v("æ™®é€šç´¢å¼•&å”¯ä¸€ç´¢å¼•åŒºåˆ«")]),t._v(" "),a("p",[t._v("sqlè¯­å¥ä¼˜åŒ–")]),t._v(" "),a("p",[t._v("mysqlé«˜å¯ç”¨")]),t._v(" "),a("p",[t._v("mysqlä¸»ä»å¤åˆ¶åŸç†")]),t._v(" "),a("p",[t._v("mysqlè¯»å†™åˆ†ç¦»æ¦‚è¿°")]),t._v(" "),a("p",[t._v("mycatè¯»å†™åˆ†ç¦»")]),t._v(" "),a("h2",{attrs:{id:"äº‹ç‰©"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äº‹ç‰©"}},[t._v("#")]),t._v(" äº‹ç‰©")]),t._v(" "),a("p",[t._v("äº‹ç‰©æ¦‚è¿°")]),t._v(" "),a("p",[t._v("äº‹ç‰©åº•å±‚åŸç†")]),t._v(" "),a("p",[t._v("äº‹ç‰©ä¼ æ’­è¡Œä¸º")]),t._v(" "),a("p",[t._v("åˆ†å¸ƒå¼äº‹ç‰©")]),t._v(" "),a("h1",{attrs:{id:"redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[t._v("#")]),t._v(" Redis")]),t._v(" "),a("h2",{attrs:{id:"redis-desktop-managerå®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis-desktop-managerå®‰è£…"}},[t._v("#")]),t._v(" Redis-Desktop-Managerå®‰è£…")]),t._v(" "),a("blockquote",[a("p",[t._v("https://github.com/qishibo/AnotherRedisDesktopManager")])]),t._v(" "),a("h3",{attrs:{id:"redis5ç§åŸºæœ¬ç±»å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis5ç§åŸºæœ¬ç±»å‹"}},[t._v("#")]),t._v(" Redis5ç§åŸºæœ¬ç±»å‹")]),t._v(" "),a("blockquote",[a("p",[t._v("String, Hash, List, Set,  ZSet")])]),t._v(" "),a("h4",{attrs:{id:"string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[t._v("#")]),t._v(" String")]),t._v(" "),a("p",[t._v("é‡è¦ç”¨æ³•1ï¼š"),a("strong",[a("code",[t._v("Expire Key")])])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("åº”ç”¨åœºæ™¯")])])]),t._v(" "),a("p",[t._v("1ã€é™æ—¶çš„ä¼˜æƒ æ´»åŠ¨ä¿¡æ¯")]),t._v(" "),a("p",[t._v("2ã€ç½‘ç«™æ•°æ®ç¼“å­˜ï¼ˆå¯¹äºä¸€äº›éœ€è¦å®šæ—¶æ›´æ–°çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼šç§¯åˆ†æ’è¡Œæ¦œï¼‰")]),t._v(" "),a("p",[t._v("3ã€æ‰‹æœºéªŒè¯ç ")]),t._v(" "),a("p",[t._v("4ã€é™åˆ¶ç½‘ç«™è®¿å®¢è®¿é—®é¢‘ç‡ï¼ˆä¾‹å¦‚ï¼š1åˆ†é’Ÿæœ€å¤šè®¿é—®10æ¬¡ï¼‰")]),t._v(" "),a("p",[t._v("é‡è¦ç”¨æ³•2ï¼š**"),a("code",[t._v("SETNX key value")]),t._v(" **")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("åº”ç”¨åœºæ™¯")])])]),t._v(" "),a("p",[t._v("1ã€åˆ†å¸ƒå¼é”")]),t._v(" "),a("p",[t._v("é‡è¦ç”¨æ³•3ï¼š"),a("strong",[a("code",[t._v("INCR KEY_Name")])])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("åº”ç”¨åœºæ™¯")])])]),t._v(" "),a("p",[t._v("1.è®¡æ•°å™¨")]),t._v(" "),a("p",[t._v("å‡å¦‚ï¼Œåœ¨æŸç§åœºæ™¯ä¸‹æœ‰3ä¸ªå®¢æˆ·ç«¯åŒæ—¶è¯»å–äº†mynumçš„å€¼ï¼ˆå€¼ä¸º2ï¼‰ï¼Œç„¶åå¯¹å…¶åŒæ—¶è¿›è¡Œäº†åŠ 1çš„æ“ä½œï¼Œé‚£ä¹ˆï¼Œæœ€åmynumçš„å€¼ä¸€å®šæ˜¯5ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("Keyçš„å‘½åå»ºè®®")])]),t._v(" "),a("blockquote",[a("p",[t._v("rediså•ä¸ªkey å­˜å…¥512Må¤§å°")])]),t._v(" "),a("p",[t._v("1.keyä¸è¦å¤ªé•¿ï¼Œå°½é‡ä¸è¦è¶…è¿‡1024å­—èŠ‚ï¼Œè¿™ä¸ä»…æ¶ˆè€—å†…å­˜ï¼Œè€Œä¸”ä¼šé™ä½æŸ¥æ‰¾çš„æ•ˆç‡ï¼›")]),t._v(" "),a("p",[t._v("2.keyä¹Ÿä¸è¦å¤ªçŸ­ï¼Œå¤ªçŸ­çš„è¯ï¼Œkeyçš„å¯è¯»æ€§ä¼šé™ä½ï¼›")]),t._v(" "),a("p",[t._v("3.åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œkeyæœ€å¥½ä½¿ç”¨ç»Ÿä¸€çš„å‘½åæ¨¡å¼ï¼Œä¾‹å¦‚user:123:password;")]),t._v(" "),a("p",[t._v("4.keyåç§°åŒºåˆ†å¤§å°å†™")]),t._v(" "),a("h4",{attrs:{id:"hash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[t._v("#")]),t._v(" Hash")]),t._v(" "),a("blockquote",[a("p",[t._v("åº”ç”¨åœºæ™¯")])]),t._v(" "),a("p",[t._v("1ã€å­˜å‚¨ä¸€ä¸ªå¯¹è±¡")]),t._v(" "),a("p",[t._v("hashå­˜å‚¨å¯¹è±¡å’Œstringå­˜å‚¨çš„åŒºåˆ«")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("stirngå­˜å‚¨ä¸»è¦æœ‰2ç§æ–¹æ¡ˆï¼šä¸€ç§æ˜¯ç”¨å¯¹è±¡çš„idä½œä¸ºkeyï¼Œç”¨å¯¹è±¡çš„jsonåºåˆ—åŒ–ä½œä¸ºvalueã€‚è¿˜æœ‰ä¸€ç§æ˜¯ç”¨å¯¹è±¡çš„id+å±æ€§åä½œä¸ºkeyï¼Œç”¨å¯¹è±¡å±æ€§å€¼ä½œä¸ºvalueã€‚")]),t._v(" "),a("p",[t._v("ç¬¬ä¸€ç§çš„ç¼ºç‚¹æ˜¯æ¯æ¬¡ä¿®æ”¹å±æ€§ä¸æ–¹ä¾¿ï¼Œå¿…é¡»å°†å¯¹è±¡ååºåˆ—åŒ–å‡ºæ¥å†æ’å…¥è¿›å»ã€‚è€Œä¸”éœ€è¦è€ƒè™‘å¹¶å‘é—®é¢˜ï¼›")]),t._v(" "),a("p",[t._v("ç¬¬äºŒç§ç¡®å®šæ˜¯keyå¤ªå¤šï¼Œé€ æˆå­˜å‚¨ç©ºé—´è¿‡å¤§ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("Redisæä¾›çš„Hashå¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒRedisçš„Hashå®é™…æ˜¯å†…éƒ¨å­˜å‚¨çš„Valueä¸ºä¸€ä¸ªHashMapï¼Œå¹¶æä¾›äº†ç›´æ¥å­˜å–è¿™ä¸ªMapæˆå‘˜çš„æ¥å£")])])]),t._v(" "),a("h4",{attrs:{id:"list"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[t._v("#")]),t._v(" List")]),t._v(" "),a("blockquote",[a("p",[t._v("åº”ç”¨åœºæ™¯")])]),t._v(" "),a("p",[t._v("1ã€å®ç°é˜Ÿåˆ— lpush rpop")]),t._v(" "),a("p",[t._v("2ã€å®ç°å †æ ˆ lpush lpop")]),t._v(" "),a("p",[t._v("3ã€å®ç°åˆ†é¡µ lrange start stop")]),t._v(" "),a("p",[t._v("â€‹\t\tå¤§æ•°æ®é‡çš„åˆ†é¡µ")]),t._v(" "),a("p",[t._v("4ã€å¯¹å¤§æ•°æ®è¿›è¡Œåˆ å‡ã€æ˜¾ç¤º")]),t._v(" "),a("p",[t._v("â€‹\t\tå¦‚ï¼šå…³æ³¨åˆ—è¡¨ã€ç²‰ä¸åˆ—è¡¨ã€ç•™è¨€è¯„ä»·ç­‰;")]),t._v(" "),a("p",[t._v("5ã€ä»»åŠ¡é˜Ÿåˆ—")]),t._v(" "),a("h4",{attrs:{id:"set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[t._v("#")]),t._v(" Set")]),t._v(" "),a("blockquote",[a("p",[t._v("åº”ç”¨åœºæ™¯")])]),t._v(" "),a("p",[t._v("1ã€å¸¸ç”¨äºå¯¹ä¸¤ä¸ªé›†åˆé—´çš„æ•°æ®åšäº¤é›†ã€å¹¶é›†ã€å·®é›†è¿ç®—ï¼š")]),t._v(" "),a("p",[t._v("â€‹\tæ¯”å¦‚å¾®ä¿¡æŸ¥çœ‹2ä¸ªäººçš„å…±åŒå¥½å‹ï¼›")]),t._v(" "),a("p",[t._v("â€‹\tæ¯”å¦‚å¾®åšæŸ¥çœ‹å…±åŒå…³æ³¨çš„äººï¼›")]),t._v(" "),a("p",[t._v("â€‹\tå†é«˜çº§ä¸€ç‚¹ï¼Œæ¨èä½ å…³æ³¨çš„äººå…³æ³¨äº†è°ï¼›")]),t._v(" "),a("p",[t._v("2ã€åˆ©ç”¨å”¯ä¸€æ€§ï¼Œç»Ÿè®¡ç½‘ç«™çš„è®¿é—®IPï¼›")]),t._v(" "),a("h4",{attrs:{id:"zset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zset"}},[t._v("#")]),t._v(" ZSet")]),t._v(" "),a("blockquote",[a("p",[t._v("åº”ç”¨åœºæ™¯")])]),t._v(" "),a("p",[t._v("1ã€æ’è¡Œæ¦œï¼Œå¦‚æŸ¥çœ‹æ’åå‰10çš„äººï¼Œæˆ–è€…æŸ¥çœ‹æ‰€æœ‰äººçš„æ’åï¼Œæˆ–è€…æŸ¥çœ‹æŸä¸€ä¸ªåˆ†æ•°æ®µçš„äººï¼›")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"       å…¨éƒ¨ç©å®¶æ’è¡Œæ¦œ                    "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZSetOperations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypedTuple")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" allPlayerList "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" redisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForZSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reverseRangeWithScores")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZSetOperations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypedTuple")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" iterator "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" allPlayerList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZSetOperations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypedTuple")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" item "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" iterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç©å®¶IDï¼š"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ï¼Œ ç©å®¶å¾—åˆ†:"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("valueOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getScore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("intValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reverseRangeWithScores")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reverseRangeByScoreWithScores")]),t._v("\n")])])]),a("h3",{attrs:{id:"rediså®ç°åˆ†å¸ƒå¼é”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rediså®ç°åˆ†å¸ƒå¼é”"}},[t._v("#")]),t._v(" Rediså®ç°åˆ†å¸ƒå¼é”")]),t._v(" "),a("p",[t._v("æ–¹æ¡ˆ1ï¼šé€šè¿‡setnxè¿™ä¸ªå‘½ä»¤ï¼Œåœ¨æ¯æ¬¡è¦æ‰§è¡Œredisæ“ä½œæ—¶åŠ ä¸€ä¸ªé”ï¼›å¦‚æœèƒ½æ‹¿åˆ°è¿™ä¸ªé”ï¼Œå°±ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™ç­‰å¾…ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" lockKey "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"product_100_stock"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" stockStr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stringRedisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stock"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ç°å…³é”®æ˜¯ç”¨åˆ°äº†setnxè¿™ä¸ªå‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stringRedisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIfAbsent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lockKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"locked"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" stock "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stockStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stock "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  stock"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  stringRedisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stock"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("valueOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nstringRedisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lockKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å¸¸è§çš„å‘ï¼š")]),t._v(" "),a("p",[t._v("1.å¦‚æœç¨‹åºè¿è¡Œä¸­æ­»æœºäº†æ€ä¹ˆå¤„ç†ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("åœ¨ä»£ç å—ä¸­åŠ try finallyï¼Œåˆ é™¤é”")]),t._v(" "),a("li",[t._v("å¢åŠ é”çš„è¶…æ—¶æ—¶é—´ï¼Œé¿å…ç¨‹åºå¼‚å¸¸æ— æ³•é‡Šæ”¾é”ï¼›")])]),t._v(" "),a("p",[t._v("2.è¶…æ—¶æ—¶é—´æ€ä¹ˆå»å®šæ¯”è¾ƒåˆç†ï¼Ÿä¸ä¼šæå‰æ¸…é™¤é”ï¼Œä»è€Œé€ æˆ"),a("code",[t._v("åˆ†å¸ƒå¼é”")]),t._v("é‡Šæ”¾é”™è¯¯ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("è€ƒè™‘åœ¨ä¸»çº¿ç¨‹é‡Œï¼Œå¼€å¯ä¸€ä¸ªå­çº¿ç¨‹ï¼Œå»ä¸æ–­çš„å®šæ—¶è½®è¯¢å»¶è¿Ÿé”çš„æ—¶é—´ã€‚ä¸»çº¿ç¨‹ç»“æŸåï¼Œç»“æŸå­çº¿ç¨‹ï¼›")])]),t._v(" "),a("p",[t._v("3.å¦‚ä½•é¿å…è¯¯åˆ é”ï¼Ÿå¤šä¸ªçº¿ç¨‹å¤„ç†ï¼Œå¾ˆæœ‰å¯èƒ½ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†å¦ä¸€ä¸ªçº¿ç¨‹çš„é”ï¼›")]),t._v(" "),a("p",[t._v("â€‹\tline4:åœ¨è®¾ç½®é”çš„valueçš„æ—¶å€™ï¼Œè®¾ç½®ä¸€ä¸ªéšæœºå€¼ï¼Œä¿è¯ä¸åŒçš„æœºå™¨å¤„ç†çš„é”åä¸ç›¸åŒï¼›")]),t._v(" "),a("p",[t._v("â€‹\tåˆ é™¤é”æ—¶ï¼Œå…ˆæ¯”è¾ƒå€¼ï¼Œå†å»åˆ é™¤é”ï¼›")]),t._v(" "),a("p",[t._v("æ–¹æ¡ˆ2ï¼šredissionæ¡†æ¶äº†æä¾›äº†ä¸€ä¸ªåˆ†å¸ƒå¼é”çš„è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("RLock rLock = redisson.getLock(lockKey);\n")])])]),a("p",[t._v("1.å¦‚æœæ˜¯master-slaveræ¨¡å¼çš„redisæ¶æ„ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("redissionå†™æ˜¯ç”¨masterï¼Œè¯»æ˜¯ç”¨slaverã€‚å¦‚æœå†™çš„æ—¶å€™ï¼ŒmasteræŒ‚æ‰ï¼Œè¯»å–çš„slaverä¾ç„¶å¯ä»¥ç”¨ï¼Œä¼šå¯¼è‡´é”ä¸€ç›´æ— æ³•é‡Šæ”¾ï¼Œä»è€Œå¯¼è‡´æ­»é”ã€‚")])]),t._v(" "),a("p",[t._v("2.redisåˆ†å¸ƒå¼é”æ€ä¹ˆæ”¯æŒé«˜å¹¶å‘ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Redlockç®—æ³•ï¼š")])]),t._v(" "),a("p",[t._v("å‡è®¾æœ‰Nä¸ªç›¸åŒçš„redisèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„redisæ¨¡å¼ä¸€æ ·ï¼Œä½†æ˜¯äº’ä¸å…³è”ã€‚")]),t._v(" "),a("p",[t._v("1.è®°å½•æ—¶é—´æˆ³ï¼›")]),t._v(" "),a("p",[t._v("2.ä¸ºæ¯ä¸ªredisèŠ‚ç‚¹è®¾ç½®çš„è¶…æ—¶æ—¶é—´ï¼Œä»¥åŠé”è¿‡æœŸæ—¶é—´ã€‚ é¿å…æœåŠ¡å™¨æŒ‚æ‰åï¼Œå®¢æˆ·ç«¯ä»ç„¶å»ç­‰å¾…æœåŠ¡å™¨å“åº”ï¼›(æ¯”å¦‚5ms)")]),t._v(" "),a("p",[t._v("3.å½“è®¾ç½®é”æ—¶ï¼Œå‘æ¯ä¸ªredisèŠ‚ç‚¹ä¸Šéƒ½è®¾ç½®ä¸€æ¬¡ï¼›")]),t._v(" "),a("p",[t._v("4.è®°å½•æˆåŠŸçš„èŠ‚ç‚¹æ•°ï¼Œä»¥åŠç´¯è®¡çš„ç”¨æ—¶æ—¶é—´ï¼›")]),t._v(" "),a("p",[t._v("5.å¦‚æœç´¯è®¡æ—¶é—´ä¸è¶…è¿‡é”è¿‡æœŸæ—¶é—´ï¼Œå¹¶ä¸”æˆåŠŸèŠ‚ç‚¹æ•°å¤§äºæ€»ç»“ç‚¹æ•°çš„ä¸€åŠæ•°é‡ï¼›")]),t._v(" "),a("p",[t._v("6.å¦‚æœç´¯è®¡æ—¶é—´è¶…è¿‡äº†é”çš„è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆé”å¯èƒ½å·²ç»å¤±æ•ˆäº†ã€‚æˆ–è€…è·å–äº†å°äº3ä¸ªé”ï¼Œå¿…é¡»é‡Šæ”¾ï¼Œå¦åˆ™å½±å“å…¶ä»–clientè·å–é”ã€‚")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("graph TD\nA(è®°å½•å¼€å§‹æ—¶é—´)--\x3eB(ä¾æ¬¡è®¾ç½®redisèŠ‚ç‚¹é”Næ¬¡)\nB--\x3eC(è®°å½•è®¾ç½®æ—¶é—´)\nB--\x3eD(è®°å½•æˆåŠŸè®¾ç½®redisé”çš„èŠ‚ç‚¹æ•° R)\nD--\x3eE{R > N/2+1?}\nC--\x3eF{é”æœ‰æ•ˆæœŸ > è®¾ç½®æ—¶é—´}\nF--\x3e|æ˜¯|H\nF--\x3e|å¦|G\nE--\x3e|æ˜¯|H(è·å–é”æˆåŠŸ)\nE--\x3e|å¦|G(è·å–é”å¤±è´¥ )\n\n")])])]),a("h3",{attrs:{id:"redisäº‹ç‰©"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redisäº‹ç‰©"}},[t._v("#")]),t._v(" Redisäº‹ç‰©")]),t._v(" "),a("h4",{attrs:{id:"ä¸¤ç±»é”™è¯¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¤ç±»é”™è¯¯"}},[t._v("#")]),t._v(" ä¸¤ç±»é”™è¯¯")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("è¯­æ³•é”™è¯¯")]),t._v(" "),a("p",[t._v("å›æ»šæ“ä½œâ€”â€”discard")])]),t._v(" "),a("li",[a("p",[t._v("æ‰§è¡Œé”™è¯¯")]),t._v(" "),a("p",[t._v("è·³è¿‡é”™è¯¯ç»§ç»­æ‰§è¡Œ")])])]),t._v(" "),a("p",[t._v("redisTemplateæ‰§è¡Œ")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SessionCallback")]),t._v(" sessionCallback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SessionCallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisOperations")]),t._v(" redisOperations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataAccessException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    redisOperations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("multi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    redisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    redisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    redisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    redisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("opsForValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" redisOperations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nredisTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sessionCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"redisç¼“å­˜ä¸€è‡´æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redisç¼“å­˜ä¸€è‡´æ€§"}},[t._v("#")]),t._v(" Redisç¼“å­˜ä¸€è‡´æ€§")]),t._v(" "),a("p",[t._v("1.å¼ºä¸€è‡´æ€§â€”â€”å®æ—¶åŒæ­¥")]),t._v(" "),a("p",[t._v("æŸ¥è¯¢ç¼“å­˜ï¼Œç¼“å­˜ä¸å­˜åœ¨æŸ¥è¯¢DBï¼Œä¿å­˜åˆ°ç¼“å­˜ã€‚")]),t._v(" "),a("p",[t._v("æ›´æ–°ç¼“å­˜æ—¶ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†å°†ç¼“å­˜çš„æ•°æ®è®¾ç½®ä¸ºè¿‡æœŸï¼›")]),t._v(" "),a("p",[t._v("æ³¨æ„ç‚¹ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("ç¼“å­˜ç©¿é€")])]),t._v(" "),a("blockquote",[a("p",[t._v("æ¯æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œæ•°æ®åº“éƒ½è¿”å›ç©ºï¼Œæ¯æ¬¡éƒ½æ²¡ç¼“å­˜æ•°æ®ï¼Œç»“æœæ¯æ¬¡éƒ½ä»æ•°æ®åº“ä¸­æŸ¥è¯¢")])]),t._v(" "),a("p",[t._v("è§£å†³æ–¹æ¡ˆ\nä»ç¼“å­˜å–ä¸åˆ°çš„æ•°æ®ï¼Œåœ¨æ•°æ®åº“ä¸­ä¹Ÿæ²¡æœ‰å–åˆ°ï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥å°†key-valueå¯¹å†™ä¸ºkey-nullï¼Œç¼“å­˜æœ‰æ•ˆæ—¶é—´å¯ä»¥è®¾ç½®çŸ­ç‚¹ï¼Œå¦‚30ç§’ï¼ˆè®¾ç½®å¤ªé•¿ä¼šå¯¼è‡´æ­£å¸¸æƒ…å†µä¹Ÿæ²¡æ³•ä½¿ç”¨ï¼‰ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢æ”»å‡»ç”¨æˆ·åå¤ç”¨åŒä¸€ä¸ªidæš´åŠ›æ”»å‡»")]),t._v(" "),a("p",[a("strong",[t._v("ç¼“å­˜å‡»ç©¿")])]),t._v(" "),a("blockquote",[a("p",[t._v("æŸä¸€ä¸ªçƒ­ç‚¹Keyï¼Œåœ¨æŸä¸€ä¸ªæ—¶é—´é‡Œï¼Œç¼“å­˜å¤±æ•ˆäº†ã€‚è¿™æ—¶ç”±äºå¹¶å‘ç”¨æˆ·ç‰¹åˆ«å¤šï¼ŒåŒæ—¶è¯»ç¼“å­˜æ²¡è¯»åˆ°æ•°æ®ï¼ŒåˆåŒæ—¶å»æ•°æ®åº“å»å–æ•°æ®ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›ç¬é—´å¢å¤§ï¼Œé€ æˆè¿‡å¤§å‹åŠ›")])]),t._v(" "),a("p",[t._v("è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("ol",[a("li",[t._v("è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸è¿œä¸è¿‡æœŸï¼›")]),t._v(" "),a("li",[t._v("åŠ äº’æ–¥é”ï¼Œåªæœ‰1ä¸ªå»æ•°æ®åº“æŸ¥è¯¢ï¼›")])]),t._v(" "),a("p",[a("strong",[t._v("ç¼“å­˜é›ªå´©")])]),t._v(" "),a("blockquote",[a("p",[t._v("ç¼“å­˜ä¸­æ•°æ®å¤§æ‰¹é‡åˆ°è¿‡æœŸæ—¶é—´ï¼Œè€ŒæŸ¥è¯¢æ•°æ®é‡å·¨å¤§ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›è¿‡å¤§ç”šè‡³downæœºã€‚å’Œç¼“å­˜å‡»ç©¿ä¸åŒçš„æ˜¯ï¼Œç¼“å­˜å‡»ç©¿æŒ‡å¹¶å‘æŸ¥åŒä¸€æ¡æ•°æ®ï¼Œç¼“å­˜é›ªå´©æ˜¯ä¸åŒæ•°æ®éƒ½è¿‡æœŸäº†ï¼Œå¾ˆå¤šæ•°æ®éƒ½æŸ¥ä¸åˆ°ä»è€ŒæŸ¥æ•°æ®åº“ã€‚")])]),t._v(" "),a("p",[t._v("è§£å†³æ–¹æ¡ˆï¼š")]),t._v(" "),a("p",[t._v("1.è®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼›")]),t._v(" "),a("p",[t._v("2.çƒ­ç‚¹è®¾ç½®ä¸è¿‡æœŸ")]),t._v(" "),a("h3",{attrs:{id:"redisä¸»ä»å¤åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redisä¸»ä»å¤åˆ¶"}},[t._v("#")]),t._v(" Redisä¸»ä»å¤åˆ¶")]),t._v(" "),a("p",[t._v("masterä¸»èŠ‚ç‚¹ç”¨æ¥å†™å…¥æ•°æ®ï¼Œslaverå­èŠ‚ç‚¹ç”¨æ¥è¯»å–æ•°æ®ï¼Œ"),a("code",[t._v("ä¸»èŠ‚ç‚¹")]),t._v("å®šæœŸæŠŠæ•°æ®åŒæ­¥åˆ°"),a("code",[t._v("ä»èŠ‚ç‚¹")]),t._v("æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚")]),t._v(" "),a("h4",{attrs:{id:"ä¸»ä»å¤åˆ¶æ¶æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶æ¶æ„"}},[t._v("#")]),t._v(" ä¸»ä»å¤åˆ¶æ¶æ„")]),t._v(" "),a("p",[a("strong",[t._v("a)  ä¸€ä¸»ä¸€ä»")]),t._v("ï¼šå½“"),a("code",[t._v("ä¸»èŠ‚ç‚¹")]),t._v("çš„â€œå†™â€å‘½ä»¤å¹¶å‘é«˜ä¸”éœ€è¦æŒä¹…åŒ–æ—¶ï¼Œå¯ä»¥åªåœ¨"),a("code",[t._v("ä»èŠ‚ç‚¹")]),t._v("å¼€å¯AOFï¼ˆä¸»èŠ‚ç‚¹ä¸éœ€è¦ï¼‰ã€‚")]),t._v(" "),a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-09-26-031252.png",width:"150",align:"center"}}),t._v(" "),a("p",[a("strong",[t._v("b) ä¸€ä¸»å¤šä»")]),t._v('ï¼šå½“å¯¹"è¯»"çš„è¦æ±‚æ¯”è¾ƒå¤§æ—¶ï¼Œè¿™ç§ç»“æ„æ¯”è¾ƒåˆé€‚ã€‚ä¸»èŠ‚ç‚¹åªè´Ÿè´£å†™å…¥ï¼Œç„¶ååŒæ­¥åˆ°ä»èŠ‚ç‚¹ã€‚ä½†æ˜¯å¯¹ä¸»èŠ‚ç‚¹çš„å½±å“æ¯”è¾ƒå¤§ï¼Œå› ä¸º'),a("code",[t._v("ä¸»èŠ‚ç‚¹")]),t._v("ä¼šåŒæ­¥åˆ°å¤šä¸ª"),a("code",[t._v("ä»èŠ‚ç‚¹")]),t._v("ï¼Œä¼šæ¶ˆè€—å¸¦å®½å’Œå†…å­˜ã€‚")]),t._v(" "),a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-09-26-032919.png",width:"450"}}),t._v(" "),a("p",[t._v("c) "),a("strong",[t._v("æ ‘å½¢ç»“æ„")]),t._v("ï¼šå¯ä»¥è§£å†³ä¸Šé¢ä¸€ä¸»å¤šä»ï¼Œä¸»èŠ‚ç‚¹å‹åŠ›è¿‡å¤§çš„é—®é¢˜ï¼›")]),t._v(" "),a("h4",{attrs:{id:"æ•°æ®åŒæ­¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åŒæ­¥"}},[t._v("#")]),t._v(" æ•°æ®åŒæ­¥")]),t._v(" "),a("p",[t._v("a) å…¨é‡å¤åˆ¶ï¼šä¸€èˆ¬ç”¨äºåˆæ¬¡å¤åˆ¶åœºæ™¯ï¼ˆç¬¬ä¸€æ¬¡å»ºç«‹SLAVEåå…¨é‡ï¼‰\nb) éƒ¨åˆ†å¤åˆ¶ï¼šç½‘ç»œå‡ºç°é—®é¢˜ï¼Œä»èŠ‚ç‚¹å†æ¬¡è¿æ¥ä¸»èŠ‚ç‚¹æ—¶ï¼Œä¸»èŠ‚ç‚¹è¡¥å‘ç¼ºå°‘çš„æ•°æ®ï¼Œæ¯æ¬¡æ•°æ®å¢é‡åŒæ­¥\nc) å¿ƒè·³ï¼šä¸»ä»æœ‰é•¿è¿æ¥å¿ƒè·³ï¼Œä¸»èŠ‚ç‚¹é»˜è®¤æ¯10Så‘ä»èŠ‚ç‚¹å‘pingå‘½ä»¤ï¼Œrepl-ping-slave-periodæ§åˆ¶å‘é€é¢‘ç‡")]),t._v(" "),a("h4",{attrs:{id:"ä¸»ä»çš„ç¼ºç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»çš„ç¼ºç‚¹"}},[t._v("#")]),t._v(" ä¸»ä»çš„ç¼ºç‚¹")]),t._v(" "),a("p",[a("strong",[t._v("a)")]),t._v(" è‹¥ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜ï¼Œåˆ™ä¸èƒ½æä¾›æœåŠ¡ï¼Œéœ€è¦äººå·¥ä¿®æ”¹é…ç½®å°†ä»å˜ä¸»ã€‚\n"),a("strong",[t._v("b)")]),t._v(" "),a("code",[t._v("ä¸»èŠ‚ç‚¹")]),t._v("çš„å†™èƒ½åŠ›å•æœºï¼Œèƒ½åŠ›æœ‰é™\n"),a("strong",[t._v("c)")]),t._v(" å•æœºèŠ‚ç‚¹çš„å­˜å‚¨èƒ½åŠ›ä¹Ÿæœ‰é™")]),t._v(" "),a("h3",{attrs:{id:"å“¨å…µæœºåˆ¶-sentinel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å“¨å…µæœºåˆ¶-sentinel"}},[t._v("#")]),t._v(" å“¨å…µæœºåˆ¶(Sentinel)")]),t._v(" "),a("blockquote",[a("p",[t._v("ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ä¸»ä»å¤åˆ¶çš„ç¼ºç‚¹ï¼Œè‡ªåŠ¨å¯¹èŠ‚ç‚¹è¿›è¡Œç›‘æ§ã€‚å½“ä¸»èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œè‡ªåŠ¨å°†ä¸»èŠ‚ç‚¹çš„å­èŠ‚ç‚¹è½¬æ¢ä¸ºä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”é€šçŸ¥å®¢æˆ·ç«¯ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"_1-é«˜å¯ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-é«˜å¯ç”¨"}},[t._v("#")]),t._v(" 1."),a("strong",[t._v("é«˜å¯ç”¨")])]),t._v(" "),a("p",[t._v("å½“ä¸»èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶ï¼Œç”±sentinelè‡ªåŠ¨å®Œæˆæ•…éšœå‘ç°å’Œè½¬ç§»ï¼Œå¹¶ä¸”é€šçŸ¥åº”ç”¨ã€‚")]),t._v(" "),a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-09-26-065139.png",width:"300"}}),t._v(" "),a("p",[a("strong",[t._v("ç›‘æ§åŸç†")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("1ï¼šæ¯10sé’Ÿï¼Œå“¨å…µå‘masterèŠ‚ç‚¹è·å–ä¸€ä¸‹ä¿¡æ¯ï¼Œæ¥ç¡®è®¤ä¸»ä»èŠ‚ç‚¹çš„æ‹“æ‰‘å…³ç³»ï¼›")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-09-26-081111.png",alt:"1227483-20180201113518031-1426392070"}})]),t._v(" "),a("p",[t._v("2ï¼šæ¯2sé’Ÿï¼Œæ¯ä¸ªå“¨å…µä¼šå‘masterèŠ‚ç‚¹çš„å›ºå®šé¢‘é“ä¸Šå‘é€ä¸»æ¨æ¶ˆæ¯(å“¨å…µå¯¹masterèŠ‚ç‚¹çš„åˆ¤æ–­ã€å“¨å…µè·å–åˆ°çš„èŠ‚ç‚¹ä¿¡æ¯)ã€‚åŒæ—¶ï¼Œæ¯ä¸ªå“¨å…µä¹Ÿä¼šå»è®¢é˜…è¿™ä¸ªå›ºå®šé¢‘é“ï¼Œäº†è§£å…¶ä»–å“¨å…µå¯¹è¿™ä¸ªèŠ‚ç‚¹çš„åˆ¤æ–­ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-09-26-081103.png",alt:"1227483-20180201113623921-1930278582"}})]),t._v(" "),a("p",[t._v("3ï¼šæ¯sé’Ÿï¼Œæ¯ä¸ªå“¨å…µä¹Ÿä¼šå‘å…¶ä»–å“¨å…µä»¥åŠä¸»ã€ä»èŠ‚ç‚¹å‘é€pingå‘½ä»¤ï¼›ç”¨æ¥ç¡®å®šèŠ‚ç‚¹æ˜¯å¦æ­£å¸¸ï¼›")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-09-26-081055.png",alt:"1227483-20180201115230609-828804435"}})]),t._v(" "),a("p",[a("strong",[t._v("ä¸‹çº¿çŠ¶æ€")])]),t._v(" "),a("p",[t._v("1.ä¸»è§‚ä¸‹çº¿ï¼š")]),t._v(" "),a("p",[t._v("å“¨å…µæ¯éš”1så‘å…¶ä»–èŠ‚ç‚¹å‘é€pingå‘½ä»¤ï¼Œåœ¨down-after-millisecondsæœ‰æ•ˆæœŸå†…ï¼Œå¦‚æœæ²¡æœ‰å“åº”ï¼Œå°±ä¼šä¸»è§‚çš„å°†è¿™ä¸ªèŠ‚ç‚¹ä¸‹çº¿ï¼›å¹¶ä¸”å‘å…¶ä»–èŠ‚ç‚¹ç¡®è®¤æ˜¯å¦éƒ½æ˜¯ä¸»è§‚ä¸‹çº¿çš„ã€‚"),a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-09-26-102223.png",alt:"1227483-20180201121656031-220411144"}})]),t._v(" "),a("p",[t._v("2.å®¢è§‚ä¸‹çº¿ï¼š")]),t._v(" "),a("p",[t._v("å½“ä¸»è§‚ä¸‹çº¿çš„å®¢æˆ·æ•°é‡è¶…è¿‡quorumï¼ˆquorum = (èŠ‚ç‚¹æ•°é‡/2) + 1ï¼‰æ—¶ï¼Œåˆ™è®¤ä¸ºèŠ‚ç‚¹æ˜¯å®¢è§‚ä¸‹çº¿çŠ¶æ€ã€‚")]),t._v(" "),a("p",[t._v("å½“èŠ‚ç‚¹è¢«å“¨å…µå®¢è§‚ä¸‹çº¿ä»¥åï¼Œå“¨å…µä¼šé€šè¿‡é€‰ä¸¾ç®—æ³•ï¼Œé€‰å‡ºä¸€ä¸ªå“¨å…µæ¥è´Ÿè´£è¿›è¡Œæ•…éšœè½¬ç§»ã€‚ æ¯ä¸ªå‘ç°èŠ‚ç‚¹å®¢è§‚ä¸‹çº¿çš„å“¨å…µéƒ½æœ‰æƒé™ç”³è¯·æˆä¸ºæ•…éšœè½¬ç§»çš„å“¨å…µï¼›é€‰ä¸¾å…ˆåˆ°å…ˆå¾—ï¼Œæˆä¸ºæ•…éšœè½¬ç§»çš„å“¨å…µä¼šé€‰æ‹©ä¸€ä¸ªä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ä½œä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼›")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-09-26-102151.png",alt:"1227483-20180201115626875-1938202974"}})]),t._v(" "),a("p",[a("strong",[t._v("æ•…éšœè½¬ç§»æµç¨‹")])]),t._v(" "),a("p",[t._v("1.é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("graph TD\nA(ç½‘ç»œè¿æ¥æ­£å¸¸)--\x3eB(5ç§’å†…å›å¤è¿‡INFOå‘½ä»¤)\nB --\x3e C(10*down-after-millsecondså†…æœ‰è¿æ¥è¿‡ä¸»æœº)\nC --\x3e D(æœåŠ¡å™¨ä¼˜å…ˆçº§)\nD --\x3e E(å¤åˆ¶åç§»é‡å¤§çš„)\nE --\x3e F(è¿è¡Œidè¾ƒå°)\nF --\x3e G(æ–°çš„master)\n\n")])])]),a("p",[t._v("2.å°†å…¶ä»–èŠ‚ç‚¹è®¾ç½®ä¸º"),a("code",[t._v("æ–°ä¸»èŠ‚ç‚¹")]),t._v("çš„ä»èŠ‚ç‚¹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-09-26-102239.png",alt:"1227483-20180201121911671-2038984859"}})]),t._v(" "),a("p",[t._v("3ã€é€šçŸ¥å®¢æˆ·ç«¯ï¼Œæ–°çš„ä¸»èŠ‚ç‚¹çš„ipã€portç­‰ä¿¡æ¯ï¼›")]),t._v(" "),a("h3",{attrs:{id:"redisæŒä¹…åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redisæŒä¹…åŒ–"}},[t._v("#")]),t._v(" RedisæŒä¹…åŒ–")]),t._v(" "),a("h4",{attrs:{id:"rdbå­˜å‚¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rdbå­˜å‚¨"}},[t._v("#")]),t._v(" RDBå­˜å‚¨")]),t._v(" "),a("blockquote",[a("p",[t._v("é»˜è®¤æŒä¹…åŒ–æœºåˆ¶")])]),t._v(" "),a("p",[t._v("rdbç›¸å½“äºå¿«ç…§ï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®ä»¥å¿«ç…§çš„æ–¹å¼ä¿å­˜åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ–‡ä»¶åä¸ºdump.rdb;")]),t._v(" "),a("p",[t._v("ä¼˜ç‚¹ï¼š")]),t._v(" "),a("p",[t._v("â€‹\tä¿å­˜å¿«ï¼Œè¯»å–æ¢å¤å¿«ï¼›")]),t._v(" "),a("p",[t._v("ç¼ºç‚¹ï¼š")]),t._v(" "),a("p",[t._v("â€‹\tåšå¿«ç…§çš„æ—¶å€™ï¼Œå ç”¨å†…å­˜é«˜ï¼›")]),t._v(" "),a("h4",{attrs:{id:"aof"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aof"}},[t._v("#")]),t._v(" AOF")]),t._v(" "),a("blockquote",[a("p",[t._v("Append of fileï¼Œå°†redisçš„"),a("strong",[t._v("å†™å…¥å‘½ä»¤")]),t._v("è¿½åŠ åˆ°æ–‡ä»¶ä¸­ï¼›")])]),t._v(" "),a("p",[t._v("ä¸‰ç§aofæ–¹å¼ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("â€‹\tæ¯æ¬¡å†™å…¥è¿½åŠ æ–‡ä»¶ appendfsync always")])]),t._v(" "),a("p",[t._v("ç¼ºç‚¹ï¼šæœ‰æ—¶æˆ‘ä»¬åªå…³æ³¨ç»“æœï¼Œå¹¶ä¸æƒ³å…³æ³¨æ¯æ¬¡å†™å…¥çš„è¿‡ç¨‹ï¼›")]),t._v(" "),a("ul",[a("li",[t._v("â€‹\tæ¯ç§’é’Ÿè¿½åŠ æ–‡ä»¶ appendfsync everysec")])]),t._v(" "),a("p",[t._v("ç¼ºç‚¹ï¼šé¢‘ç‡å¤ªé«˜ï¼Œå®¹æ˜“å ç”¨ç£ç›˜å¤ªå¤šï¼›")]),t._v(" "),a("ul",[a("li",[t._v("â€‹\tæ°¸è¿œä¸è¿½åŠ  appendfsync no")])]),t._v(" "),a("p",[t._v("ç¼ºç‚¹: å®¹æ˜“ä¸¢å¤±ï¼›")]),t._v(" "),a("h2",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("manage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("om"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("broker"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("risk"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("sms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pre\\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gsoms\\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æ ¹æ®regex(æ­£åˆ™è¡¨è¾¾å¼)æ¥åŒ¹é…å†…å®¹è·³è½¬åˆ°replacement")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_host")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$domain")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rewrite")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("https")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$domain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å°†æ‰€æœ‰è¯·æ±‚éƒ½é‡å®šå‘åˆ°https")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("nginxå®‰å…¨ä½“ç³»æ¶æ„")]),t._v(" "),a("p",[t._v("nginxæ­å»ºé›†ç¾¤")]),t._v(" "),a("p",[t._v("nginxè´Ÿè½½å‡è¡¡ç­–ç•¥")]),t._v(" "),a("p",[t._v("æœåŠ¡å™¨å®•æœºå®¹é”™æœºåˆ¶")]),t._v(" "),a("p",[t._v("nginxæ­å»ºä¼ä¸šAPIæ¥å£")]),t._v(" "),a("p",[t._v("åˆ†å¸ƒå¼ä¸é›†ç¾¤çš„åŒºåˆ«")]),t._v(" "),a("p",[t._v("Keepalivedé«˜å¯ç”¨æ¦‚å¿µ")]),t._v(" "),a("p",[t._v("nginx+keepalivedé«˜å¯ç”¨")]),t._v(" "),a("p",[t._v("sessionå…±äº«è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("é«˜å¹¶å‘è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("h1",{attrs:{id:"mqæ¶ˆæ¯ä¸­é—´ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mqæ¶ˆæ¯ä¸­é—´ä»¶"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"./MQ%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6"}},[t._v("MQæ¶ˆæ¯ä¸­é—´ä»¶")])]),t._v(" "),a("h2",{attrs:{id:"ä»»åŠ¡è°ƒåº¦"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»»åŠ¡è°ƒåº¦"}},[t._v("#")]),t._v(" ä»»åŠ¡è°ƒåº¦")]),t._v(" "),a("p",[t._v("ä»»åŠ¡è°ƒåº¦æ¦‚è¿°")]),t._v(" "),a("p",[t._v("ä½¿ç”¨Quartzå®ç°")]),t._v(" "),a("p",[t._v('åˆ†å¸ƒå¼ä»»åŠ¡å¦‚ä½•è§£å†³"å¹‚ç­‰æ€§"')]),t._v(" "),a("p",[t._v("XX-JOBç¯å¢ƒ")]),t._v(" "),a("p",[t._v("åˆ†å¸ƒå¼ä»»åŠ¡å¹³å°æ‰§è¡ŒåŸç†")]),t._v(" "),a("p",[t._v("ä»»åŠ¡è°ƒåº¦å¹³å°æ‰§è¡Œå™¨è¿è¡Œ")]),t._v(" "),a("p",[t._v("ä»»åŠ¡è°ƒåº¦å¹³å°è·¯ç”±ç­–ç•¥")]),t._v(" "),a("h2",{attrs:{id:"åˆ†å¸ƒå¼äº‹ç‰©"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼äº‹ç‰©"}},[t._v("#")]),t._v(" åˆ†å¸ƒå¼äº‹ç‰©")]),t._v(" "),a("p",[t._v("åˆ†å¸ƒå¼äº‹ç‰©äº§ç”ŸåŸå› ")]),t._v(" "),a("p",[t._v("åˆ†å¸ƒå¼äº‹ç‰©è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("CPAä¸Baseç†è®º")]),t._v(" "),a("p",[t._v("2PC-ä¸¤æ®µæäº¤åè®®")]),t._v(" "),a("p",[t._v("ä½¿ç”¨MQè§£å†³åˆ†å¸ƒå¼äº‹ç‰©")]),t._v(" "),a("p",[t._v("LCNæ¡†æ¶æ¦‚è¿°")]),t._v(" "),a("p",[t._v("LCNæ¡†æ¶åŸç†")]),t._v(" "),a("p",[t._v("LCNæ¡†æ¶æµç¨‹")]),t._v(" "),a("p",[t._v("å¯åŠ¨tx-mananger")]),t._v(" "),a("p",[t._v("æ¼”ç¤ºåˆ†å¸ƒå¼äº‹ç‰©äº§æ™¯")]),t._v(" "),a("p",[t._v("ä½¿ç”¨LCNæ¡†æ¶è§£å†³åˆ†å¸ƒå¼äº‹ç‰©")]),t._v(" "),a("h2",{attrs:{id:"åˆ†å¸ƒå¼æ¡†æ¶1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼æ¡†æ¶1"}},[t._v("#")]),t._v(" åˆ†å¸ƒå¼æ¡†æ¶1")]),t._v(" "),a("p",[t._v("SpringCloudæ¦‚è¿°")]),t._v(" "),a("p",[t._v("æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°")]),t._v(" "),a("p",[t._v("æ­å»ºEurekaæ³¨å†Œä¸­å¿ƒ(æœåŠ¡å‘ç°)")]),t._v(" "),a("p",[t._v("å‘å¸ƒæœåŠ¡ä¼šå‘˜æä¾›è€…")]),t._v(" "),a("p",[t._v("æ¶ˆè´¹ä¼šå‘˜æœåŠ¡")]),t._v(" "),a("p",[t._v("springcloudè°ƒç”¨æœåŠ¡åŸç†")]),t._v(" "),a("p",[t._v("springcloudæœåŠ¡è´Ÿè½½å‡è¡¡å®ç°åŸç†")]),t._v(" "),a("p",[t._v("ä½¿ç”¨Ribbonæ­å»ºå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å™¨")]),t._v(" "),a("p",[t._v("ä»€ä¹ˆæ˜¯æ¥å£ç½‘å…³")]),t._v(" "),a("p",[t._v("ä½¿ç”¨Zuulæ­å»ºæœåŠ¡æ¥å£ç½‘å…³ (æ™ºèƒ½è·¯ç”±)")]),t._v(" "),a("p",[t._v("ä½¿ç”¨Zuulç½‘å…³æ‹¦æˆªå‚æ•°")]),t._v(" "),a("p",[t._v("åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒæ¦‚è¿°")]),t._v(" "),a("p",[t._v("ä½¿ç”¨feginå®¢æˆ·ç«¯")]),t._v(" "),a("p",[t._v("æœåŠ¡é›ªå´©æ•ˆåº”äº§ç”ŸåŸå› ")]),t._v(" "),a("p",[t._v("é›ªå´©æ•ˆåº”è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("ä½¿ç”¨hystrixå®ç°æœåŠ¡é™çº§")]),t._v(" "),a("p",[t._v("ä½¿ç”¨hystrixè§£å†³æœåŠ¡é›ªå´©åŸå› ")]),t._v(" "),a("h2",{attrs:{id:"åˆ†å¸ƒå¼æ¡†æ¶2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼æ¡†æ¶2"}},[t._v("#")]),t._v(" åˆ†å¸ƒå¼æ¡†æ¶2")]),t._v(" "),a("p",[t._v("Dubboæ¶æ„åŸç†")]),t._v(" "),a("p",[t._v("Dubboåº”ç”¨åœºæ™¯")]),t._v(" "),a("p",[t._v("Dubboåˆ›å»ºé¡¹ç›®æ¶æ„æ¨¡å¼")]),t._v(" "),a("p",[t._v("å‘å¸ƒä¼šå‘˜æœåŠ¡")]),t._v(" "),a("p",[t._v("è®¢å•æ¶ˆè´¹æœåŠ¡")]),t._v(" "),a("p",[t._v("Dubbo-Admin")]),t._v(" "),a("p",[t._v("Dubboå®ç°è´Ÿè½½å‡è¡¡ã€å®¹é”™")]),t._v(" "),a("p",[t._v("Dubbxä½¿ç”¨")]),t._v(" "),a("h2",{attrs:{id:"zookeeper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper"}},[t._v("#")]),t._v(" Zookeeper")]),t._v(" "),a("p",[t._v("Zookeeperæ¦‚è¿°")]),t._v(" "),a("p",[t._v("Zookeeperåº”ç”¨åœºæ™¯")]),t._v(" "),a("p",[t._v("Zookeeperä¸´æ—¶èŠ‚ç‚¹")]),t._v(" "),a("p",[t._v("Watcheräº‹ä»¶é€šçŸ¥")]),t._v(" "),a("p",[t._v("Zookeeperå®ç°åˆ†å¸ƒå¼é”")]),t._v(" "),a("p",[t._v("è§£å†³ç”Ÿäº§è®¢å•å·çº¿ç¨‹å®‰å…¨é—®é¢˜")]),t._v(" "),a("p",[t._v("Zookeeperå®ç°åˆ†å¸ƒå¼é”è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("Zookeeperå®ç°è´Ÿè½½å‡è¡¡åŸç†")]),t._v(" "),a("p",[t._v("å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡ç­–ç•¥")]),t._v(" "),a("p",[t._v("å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡è½®è®­ç®—æ³•")]),t._v(" "),a("p",[t._v("å¦‚ä½•ä½¿ç”¨Zookeeperå®ç°é€‰ä¸¾ç­–ç•¥")]),t._v(" "),a("h1",{attrs:{id:"ç§»åŠ¨ç«¯è§£å†³æ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç§»åŠ¨ç«¯è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" ç§»åŠ¨ç«¯è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("ç§»åŠ¨APPç™»å½•")]),t._v(" "),a("p",[t._v("ä½¿ç”¨Tokenç™»å½•")]),t._v(" "),a("p",[t._v("ä½¿ç”¨tokenæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯")]),t._v(" "),a("p",[t._v("ç§»åŠ¨ç«¯æ¸²æŸ“")]),t._v(" "),a("p",[t._v("å‡å°‘CPUã€GPUçš„è®¡ç®—æ—¶é—´ã€‚")]),t._v(" "),a("p",[t._v("å‡å°‘é‡ç»˜æ—¶é—´ã€æ¸²æŸ“æ¬¡æ•°")]),t._v(" "),a("p",[t._v("è¾ƒå°‘IOä¼ è¾“æ—¶é—´ï¼Œå¢åŠ ç¼“å­˜å†…å­˜ï¼›")]),t._v(" "),a("h1",{attrs:{id:"umlç±»å›¾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#umlç±»å›¾"}},[t._v("#")]),t._v(" UMLç±»å›¾")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://ipic-coda.oss-cn-beijing.aliyuncs.com/2019-11-02-001939.png",alt:"image-20191102081938225"}}),t._v(" "),a("p",[a("strong",[t._v("å…³è”å…³ç³»")]),t._v("æè¿°çš„æ˜¯"),a("strong",[t._v("ä¸åŒç±»çš„å¯¹è±¡")]),t._v("ä¹‹é—´çš„"),a("strong",[t._v("ç»“æ„")]),t._v("å…³ç³»ã€‚è¿™ç§å…³ç³»æ˜¯ä¸€ç§==å¼ºå…³è”==å…³ç³»ï¼Œæ¯”å¦‚ "),a("code",[t._v("ä¹˜å®¢ - è½¦ç¥¨")]),t._v("ä¹‹é—´çš„å…³ç³»ï¼Œ"),a("code",[t._v("è€å¸ˆ - å­¦ç”Ÿ")]),t._v(" ä¹‹é—´çš„å…³ç³»ã€‚å…³è”å…³ç³»é»˜è®¤ä¸å¼ºè°ƒæ–¹å‘ï¼Œè¡¨ç¤ºå¯¹è±¡ä¹‹é—´ç›¸äº’çŸ¥é“ã€‚å¦‚æœéœ€è¦å¼ºè°ƒå…³ç³»ï¼Œæ¯”å¦‚AçŸ¥é“Bï¼ŒBä¸çŸ¥é“Aï¼Œé‚£ä¹ˆç”¨ A -> Bæ¥è¡¨ç¤ºã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ä¾èµ–å…³ç³»")]),t._v("æè¿°çš„æ˜¯ä¸€ç§==ä¸´æ—¶æ€§==çš„å…³ç³»ï¼Œå®ƒä¼šåœ¨è¿è¡ŒæœŸé—´å‘ç”Ÿï¼Œéšç€è¿è¡Œæ—¶çš„å˜åŒ–ï¼Œå¯èƒ½ä¹Ÿå‘ç”Ÿå˜åŒ–ã€‚æ¯”å¦‚ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚LoginServiceå°±æ˜¯ä¾èµ–Userå¯¹è±¡ï¼Œä½†è¿™ç§å…³ç³»æ˜¯ä¸éœ€è¦ä¿å­˜çš„ã€‚")]),t._v(" "),a("p",[t._v("åˆ¤æ–­åˆ°åº•æ˜¯å…³è”å…³ç³»è¿˜æ˜¯ä¾èµ–å…³ç³»ï¼Œä¸€èˆ¬å°±æ˜¯å…ˆçœ‹çœ‹æ˜¯ä¸æ˜¯å­˜åœ¨å…³è”å…³ç³»ï¼Œä¸æ˜¯çš„è¯å°±æ˜¯ä¾èµ–å…³ç³»ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ä»£ç é‡Œï¼Œä¾èµ–å…³ç³»ä½“ç°ä¸º"),a("strong",[t._v("ç±»æ„é€ æ–¹æ³•")]),t._v("åŠ"),a("strong",[t._v("ç±»æ–¹æ³•çš„å…¥å‚")]),t._v("ï¼Œç®­å¤´çš„æ–¹å‘è¡¨ç¤ºäº†è°ƒç”¨å…³ç³»ã€‚ æ¯”å¦‚ A --\x3e B ï¼Œè¡¨ç¤ºäº†Aè°ƒç”¨çš„Bçš„æ–¹æ³•æˆ–è€…å±æ€§ã€‚ é€šå¸¸æˆ‘ä»¬è¦"),a("strong",[t._v("é¿å…åŒå‘ä¾èµ–å…³ç³»")]),t._v("çš„å‡ºç°ã€‚")]),t._v(" "),a("h1",{attrs:{id:"æ’®åˆç³»ç»Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ’®åˆç³»ç»Ÿ"}},[t._v("#")]),t._v(" æ’®åˆç³»ç»Ÿ")]),t._v(" "),a("h2",{attrs:{id:"è®¢å•æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¢å•æ¨¡å—"}},[t._v("#")]),t._v(" è®¢å•æ¨¡å—")]),t._v(" "),a("p",[t._v("ç”¨æˆ·è®¢å•é€šè¿‡ç½‘å…³è¿›å…¥åˆ°ç³»ç»Ÿï¼›")]),t._v(" "),a("p",[t._v("ç³»ç»Ÿæ¥æ”¶åˆ°è®¢å•åï¼Œç”Ÿæˆè®¢å•ç¼–å·ï¼ŒåŠ å…¥åˆ°å‘é€é˜Ÿåˆ—ä¸­ï¼›")]),t._v(" "),a("p",[t._v("å‘é€è€…å•ç‹¬å¯åŠ¨çº¿ç¨‹ï¼Œå‘mqé˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼›")]),t._v(" "),a("p",[t._v("mqæ¶ˆè´¹è€…ç›‘å¬é˜Ÿåˆ—æ¶ˆæ¯ï¼Œä¸€éƒ¨åˆ†æ¶ˆè´¹è€…å°†è®¢å•è½åº“ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†æ¶ˆè´¹è€…æŒ‰symbolæ¥è®¢é˜…è®¢å•ï¼›")]),t._v(" "),a("p",[t._v("è®¢å•ç³»ç»Ÿä¸»è¦å·¥ä½œå®Œæˆï¼›")]),t._v(" "),a("h2",{attrs:{id:"æ’®åˆæ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ’®åˆæ¨¡å—"}},[t._v("#")]),t._v(" æ’®åˆæ¨¡å—")]),t._v(" "),a("p",[t._v("æ’®åˆæ¨¡å—é‡Œæœ‰2å—æœåŠ¡ï¼Œ1ä¸ªæœåŠ¡ç›‘å¬mqçš„é˜Ÿåˆ—ï¼Œç”¨æ’®åˆç®—æ³•è¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—å®Œä»¥åï¼ŒæŒ‰å¸å¯¹ã€æ’åºåä¿å­˜åˆ°å†…å­˜ä¸­ï¼›")]),t._v(" "),a("p",[t._v("å¦‚æœ")]),t._v(" "),a("p",[t._v("æ’®åˆé€»è¾‘ï¼š")]),t._v(" "),a("p",[t._v("æœ‰ä¸€ç¬”æ–°çš„è®¢å•è¿›å…¥ç³»ç»Ÿï¼Œåˆ¤æ–­è®¢å•æ˜¯å¦æ˜¯æ’¤å•ï¼Ÿå¦‚æœæ˜¯æ’¤å•ï¼Œå°†è®¢å•ä»å†…å­˜ä¸­åˆ é™¤ã€‚")]),t._v(" "),a("p",[t._v("å¦åˆ™çš„è¯å…ˆåˆ¤æ–­ä¹°å–æ–¹å‘")]),t._v(" "),a("p",[t._v("å†åˆ¤æ–­è®¢å•ç±»å‹")]),t._v(" "),a("p",[t._v("å¦‚æœæ˜¯ä¹°å•ï¼Œå…ˆå–å–å•çš„ç¬¬ä¸€ä¸ªè®¢å•ï¼Œæ¯”è¾ƒä»·æ ¼ï¼Œå¦‚æœä¹°å•ä»·æ ¼å¤§äºç­‰äºå–å•ä»·æ ¼ï¼Œæˆäº¤ä¸¤ä¸ªè®¢å•ä¸­è¾ƒå°çš„ä¸€ä¸ªã€‚")]),t._v(" "),a("p",[t._v("ç”Ÿæˆå¹¶æ¨é€æˆäº¤ä¿¡æ¯åˆ°mqé‡Œã€‚")]),t._v(" "),a("p",[t._v("åˆ é™¤å†…å­˜é˜Ÿåˆ—é‡Œçš„è®¢å•")]),t._v(" "),a("p",[t._v("ç„¶ååˆ¤æ–­è¿™æ¯”ä¹°å•æ˜¯å¦å®Œæˆï¼Œå¦‚æœæ²¡æœ‰å®Œæˆï¼Œç»§ç»­å–ä¸‹ä¸€ä¸ªè®¢å•ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("é˜Ÿåˆ—è‚¯å®šè¦åŠ é”ï¼Œé˜²æ­¢åˆ é™¤é”™è¯¯ï¼Œæˆ–è€…è¯»å–è„æ•°æ®")])]),t._v(" "),a("p",[t._v("å¦‚æœåˆ¤æ–­ä¸æ»¡è¶³æ¡ä»¶ï¼Œå‘ä¹°æ–¹é˜Ÿåˆ—é‡ŒåŠ å…¥è®¢å•ï¼Œå¹¶ä¸”é‡æ–°æ’åºã€‚")]),t._v(" "),a("h2",{attrs:{id:"æ•°æ®è¡¨è®¾è®¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®è¡¨è®¾è®¡"}},[t._v("#")]),t._v(" æ•°æ®è¡¨è®¾è®¡")]),t._v(" "),a("h3",{attrs:{id:"è®¢å•ç±»å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¢å•ç±»å‹"}},[t._v("#")]),t._v(" è®¢å•ç±»å‹")]),t._v(" "),a("p",[t._v("é™ä»·å•")]),t._v(" "),a("p",[t._v("å¸‚ä»·å•")]),t._v(" "),a("p",[t._v("æ­¢ç›ˆæ­¢æŸ")]),t._v(" "),a("h3",{attrs:{id:"è®¢å•é˜Ÿåˆ—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¢å•é˜Ÿåˆ—"}},[t._v("#")]),t._v(" è®¢å•é˜Ÿåˆ—")]),t._v(" "),a("p",[t._v("è®¢å•é˜Ÿåˆ—æ’åº")]),t._v(" "),a("p",[t._v("ä»·æ ¼ä¼˜å…ˆ: ä¹°å•ä»é«˜å¾€ä½ï¼Œå–å•ä»ä½å¾€é«˜")]),t._v(" "),a("p",[t._v("åŒç­‰ä»·æ ¼æ—¶é—´ä¼˜å…ˆ")]),t._v(" "),a("p",[t._v("æ’®åˆé¡ºåºï¼š")]),t._v(" "),a("h3",{attrs:{id:"è‡ªåŠ¨æˆäº¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªåŠ¨æˆäº¤"}},[t._v("#")]),t._v(" è‡ªåŠ¨æˆäº¤")]),t._v(" "),a("p",[t._v("æ’®åˆè®¢å•")]),t._v(" "),a("p",[t._v("ç”Ÿæˆäº¤æ˜“è®°å½•")]),t._v(" "),a("h3",{attrs:{id:"æ’®åˆç®—æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ’®åˆç®—æ³•"}},[t._v("#")]),t._v(" æ’®åˆç®—æ³•")]),t._v(" "),a("p",[t._v("å…¬å¹³æ€§ã€")]),t._v(" "),a("p",[t._v("é«˜æ•ˆæ€§")]),t._v(" "),a("p",[t._v("æ‰©å±•æ€§")]),t._v(" "),a("p",[t._v("éš¾ç‚¹:")]),t._v(" "),a("ol",[a("li",[t._v("åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€idã€‚æ¯ä¸ªè®¢å•åº”è¯¥æœ‰ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å®šåºçš„idï¼Œä¸èƒ½ç”¨æ—¶é—´æˆ³ï¼Œä¸æ–¹ä¾¿é˜…è¯»ï¼Œè€Œä¸”å¯èƒ½å­˜åœ¨å¤šä¸ªç›¸åŒçš„ã€‚")])])])}),[],!1,null,null,null);s.default=e.exports}}]);