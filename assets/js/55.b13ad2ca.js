(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{433:function(t,n,e){"use strict";e.r(n);var a=e(25),r=Object(a.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"监控的内容："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#监控的内容："}},[t._v("#")]),t._v(" 监控的内容：")]),t._v(" "),e("ul",[e("li",[t._v("业务数据")]),t._v(" "),e("li",[t._v("稳定性")]),t._v(" "),e("li",[t._v("性能")]),t._v(" "),e("li",[t._v("错误")]),t._v(" "),e("li",[t._v("用户操作路径")])]),t._v(" "),e("h2",{attrs:{id:"怎么监控："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#怎么监控："}},[t._v("#")]),t._v(" 怎么监控：")]),t._v(" "),e("ul",[e("li",[t._v("PV/UV、业务操作上报")]),t._v(" "),e("li",[t._v("根据上报寻找异常")]),t._v(" "),e("li",[t._v("将页面性能数据上报")]),t._v(" "),e("li",[t._v("将页面产生错误上报")]),t._v(" "),e("li",[t._v("跟踪用户操作路径")])]),t._v(" "),e("p",[t._v("网易埋点代码")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('if (window.ntm.ready) {\n    pluginPerformance()\n} else {\n    window.addEventListener("NTMReady", pluginPerformance)\n}\nfunction pluginPerformance() {\n    var performance = window.performance || window.msPerformance || window.webkitPerformance;\n    if (!performance) {\n        return\n    }\n    var send = function() {\n        var t = performance.timing;\n        var pobj = {};\n        var times = {};\n        var loadTime = t.loadEventEnd - t.connectStart;\n        times["version"] = "1.1.0";\n        times["redirect"] = t.redirectEnd - t.redirectStart;\n        times["TTP"] = t.fetchStart - t.navigationStart;\n        times["appcache"] = t.domainLookupStart - t.fetchStart;\n        times["DNS"] = t.domainLookupEnd - t.domainLookupStart;\n        times["TCP"] = t.connectEnd - t.connectStart;\n        times["HTTPSconnect"] = t.secureConnectionStart != 0 ? t.connectEnd - t.secureConnectionStart : 0;\n        times["request"] = t.responseStart - t.requestStart;\n        times["unload"] = t.unloadEventEnd - t.unloadEventStart;\n        times["response"] = t.responseEnd - t.responseStart;\n        times["processing"] = t.domComplete - t.domLoading;\n        times["DOMrender"] = t.domInteractive - t.domLoading;\n        times["beforeContentLoad"] = t.domContentLoadedEventStart - t.domLoading;\n        times["DOMContentLoaded"] = t.domContentLoadedEventEnd - t.domContentLoadedEventStart;\n        times["onloadEvent"] = t.loadEventEnd - t.loadEventStart;\n        times["TTFB"] = t.responseStart - t.fetchStart;\n        times["interactive"] = t.domInteractive - t.fetchStart;\n        times["DOMcontentFinish"] = t.domContentLoadedEventEnd - t.fetchStart;\n        times["pageLoad"] = t.loadEventEnd - t.fetchStart;\n        if (performance.getEntriesByType) {\n            performance.getEntriesByType("paint").forEach(function(e) {\n                pobj[e.name] = e.startTime\n            });\n            times.firstpaint = pobj["first-paint"];\n            times.firstcontentpaint = pobj["first-contentful-paint"]\n        }\n        if (loadTime <= 0) {\n            setTimeout(function() {\n                send()\n            }, 200);\n            return\n        } else if (times["appcache"] < 0 || times["response"] <= 0 || times["TTFB"] < 0 || times["interactive"] <= 0 || times["pageLoad"] <= 0 || t.fetchStart <= 0 || times["DOMcontentFinish"] <= 0) {\n            console.log("异常值");\n            return\n        }\n        NTESAntAnalysis.sendData({\n            host: "vmonitor.ws.netease.com/web/performance?param=",\n            projectid: window.ntm.projectId,\n            val_nm: "performance",\n            val_act: "performance",\n            info: {\n                timing: times\n            }\n        })\n    };\n    send()\n}\nfunction roll100() {\n    return Math.floor(Math.random() * 100)\n}\n')])])])])}),[],!1,null,null,null);n.default=r.exports}}]);