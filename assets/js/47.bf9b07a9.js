(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{406:function(t,s,n){"use strict";n.r(s);var a=n(25),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"常用plugins"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常用plugins"}},[t._v("#")]),t._v(" 常用Plugins")]),t._v(" "),n("blockquote",[n("h3",{attrs:{id:"commonschunkplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commonschunkplugin"}},[t._v("#")]),t._v(" CommonsChunkPlugin")])]),t._v(" "),n("p",[t._v("有些类库如utils, bootstrap之类的可能被==多个页面==共享，最好是可以合并成一个js，而非每个js单独去引用。这样能够节省一些空间。")]),t._v(" "),n("p",[t._v("这种场景就需要用到CommonsChunkPlugin，我们指定好生成文件的名字，以及想抽取哪些入口js文件的公共代码，webpack就会自动帮我们合并好。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CommonsChunkPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"common"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \tfilename"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"js/common.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \tchunks"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 'detail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以指定需要哪些库")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("blockquote",[n("h3",{attrs:{id:"extracttextplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#extracttextplugin"}},[t._v("#")]),t._v(" "),n("s",[t._v("ExtractTextPlugin")])])]),t._v(" "),n("p",[t._v("它会将所有的入口 chunk(entry chunks)中引用的 "),n("code",[t._v("*.css")]),t._v("，移动到独立分离的 CSS 文件。因此，你的样式将不再内嵌到 JS bundle 中，而是会放到一个单独的 CSS 文件（即 "),n("code",[t._v("styles.css")]),t._v("）当中。 如果你的样式文件大小较大，这会做更快提前加载，因为 CSS bundle 会跟 JS bundle 并行加载。")]),t._v(" "),n("p",[t._v("已过期，替换成mini-css-extract-plugin。作用相同")]),t._v(" "),n("blockquote",[n("h3",{attrs:{id:"minicssextractplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#minicssextractplugin"}},[t._v("#")]),t._v(" MiniCssExtractPlugin")])]),t._v(" "),n("p",[t._v("==一般生产环境使用==")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MiniCssExtractPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.css$/i")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("MiniCssExtractPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loader"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("blockquote",[n("h3",{attrs:{id:"optimize-css-assets-webpack-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#optimize-css-assets-webpack-plugin"}},[t._v("#")]),t._v(" optimize-css-assets-webpack-plugin")])]),t._v(" "),n("p",[t._v("在miniCssExtract的基础上有做了一层压缩去重的功能，配合cssnano（css优化处理）一起。")]),t._v(" "),n("p",[t._v("==一般生产环境使用==")]),t._v(" "),n("h4",{attrs:{id:"安装依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("npm install --save-dev optimize-css-assets-webpack-plugin cssnano\n")])])]),n("h4",{attrs:{id:"引入插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#引入插件"}},[t._v("#")]),t._v(" 引入插件")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const MiniCssExtractPlugin = require('mini-css-extract-plugin')\nconst OptimizeCSSAssetsPlugin = require('optimize-css-assets-webpack-plugin')\n")])])]),n("h4",{attrs:{id:"配置loader"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置loader"}},[t._v("#")]),t._v(" 配置loader")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("module: {\n        rules: [\n            {\n                test: /\\.css$/,\n                use: [\n                    MiniCssExtractPlugin.loader,\n                    'css-loader',\n                    {\n                        loader: 'postcss-loader',\n                        options: {\n                            plugins: [\n                                require('postcss-import')(),\n                                require('autoprefixer')({\n                                    browsers: ['last 30 versions', \"> 2%\", \"Firefox >= 10\", \"ie 6-11\"]\n                                })\n                            ]\n                        }\n                    }\n                ]\n            }\n     ]\n}\n")])])]),n("h4",{attrs:{id:"将多个css文件合并成单一css文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#将多个css文件合并成单一css文件"}},[t._v("#")]),t._v(" 将多个css文件合并成单一css文件")]),t._v(" "),n("blockquote",[n("p",[t._v("主要是针对多入口，会产生多分样式文件，合并成一个样式文件，减少加载次数 配置如下")])]),t._v(" "),n("p",[t._v("1、配置splitChunks")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("optimization:{\n\tsplitChunks: {\n            chunks: 'all',\n            minSize: 30000,\n            minChunks: 1,\n            maxAsyncRequests: 5,\n            maxInitialRequests: 3,\n            name: true,\n            cacheGroups: {\n                styles: {\n                    name: 'style',\n                    test: /\\.css$/,\n                    chunks: 'all',\n                    enforce: true\n                }\n            }\n        }\n}\n")])])]),n("p",[t._v("2、配置插件")]),t._v(" "),n("blockquote",[n("ol",[n("li",[n("code",[t._v("filename")]),t._v(" 与"),n("code",[t._v("output")]),t._v("中的"),n("code",[t._v("filename")]),t._v(" 命名方式一样")]),t._v(" "),n("li",[t._v("这里是将多个"),n("code",[t._v("css")]),t._v("合并成单一"),n("code",[t._v("css")]),t._v("文件, 所以"),n("code",[t._v("chunkFilename")]),t._v(" 不用处理")]),t._v(" "),n("li",[t._v("最后产生的样式文件名大概张这样 "),n("code",[t._v("style.550f4.css")]),t._v(" ； "),n("em",[n("strong",[t._v("style")])]),t._v(" 是 "),n("code",[t._v("splitChunks")]),t._v("-> "),n("code",[t._v("cacheGroups")]),t._v("-> "),n("code",[t._v("name")])])])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("new MiniCssExtractPlugin({\n\tfilename: 'assets/css/[name].[hash:5].css',\n\t// chunkFilename: \"assets/css/[name].[hash:5].css\",\n}),\n")])])]),n("h4",{attrs:{id:"优化样式文件，去重、压缩等处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#优化样式文件，去重、压缩等处理"}},[t._v("#")]),t._v(" 优化样式文件，去重、压缩等处理")]),t._v(" "),n("blockquote",[n("ol",[n("li",[t._v("主要使用 "),n("code",[t._v("optimize-css-assets-webpack-plugin")]),t._v(" 插件和 "),n("code",[t._v("cssnano")]),t._v(" 优化器")]),t._v(" "),n("li",[n("code",[t._v("cssnano")]),t._v(" 优化器具体做了哪些优化 可参考 "),n("a",{attrs:{href:"https://cssnano.co/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("code",[t._v("cssnano")]),t._v(" 优化器也可以在"),n("code",[t._v("loader")]),t._v("中配置，除了 "),n("code",[t._v("不能去重")]),t._v(" 之外，其他效果等同，所以小编这里就只在"),n("code",[t._v("plugin")]),t._v("中配置了，免得在配置一遍")])])]),t._v(" "),n("p",[t._v("有两种配置方式，效果等同")]),t._v(" "),n("p",[t._v("第一种方式")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("optimization:{\n\t minimizer: [\n\t\tnew OptimizeCSSAssetsPlugin({\n\t\t\tassetNameRegExp: /\\.css$/g,\n\t\t\tcssProcessor: require('cssnano'),\n\t\t\t// cssProcessorOptions: cssnanoOptions,\n\t\t\tcssProcessorPluginOptions: {\n\t\t\tpreset: ['default', {\n\t\t\t\tdiscardComments: {\n\t\t\t\t\tremoveAll: true,\n\t\t\t\t},\n\t\t\t\tnormalizeUnicode: false\n\t\t\t}]\n\t\t},\n\t\tcanPrint: true\n\t})\n\t]\n}\n")])])]),n("blockquote",[n("p",[t._v("配置说明：")]),t._v(" "),n("ol",[n("li",[n("code",[t._v("cssProcessor")]),t._v(" 处理器：默认就是"),n("code",[t._v("cssnano")])]),t._v(" "),n("li",[n("code",[t._v("cssProcessorOptions")]),t._v("和"),n("code",[t._v("cssProcessorPluginOptions")]),t._v(" 都是指定 "),n("code",[t._v("cssProcessor")]),t._v(" 所需的参数，经本人实验"),n("code",[t._v("cssProcessorOptions")]),t._v(" 没起作用，所以只需要指定 "),n("code",[t._v("cssProcessorPluginOptions")]),t._v(" 即可")]),t._v(" "),n("li",[n("code",[t._v("canPrint")]),t._v(": 是否打印处理过程中的日志")])]),t._v(" "),n("p",[n("code",[t._v("cssnano")]),t._v(" 配置说明")]),t._v(" "),n("ol",[n("li",[n("code",[t._v("discardComments")]),t._v(": 对注释的处理")]),t._v(" "),n("li",[n("code",[t._v("normalizeUnicode")]),t._v(": 建议设置为"),n("code",[t._v("false")]),t._v(",否则在使用 "),n("code",[t._v("unicode-range")]),t._v(" 的时候会产生乱码 详情参考 "),n("a",{attrs:{href:"https://cssnano.co/optimisations/normalizeunicode",target:"_blank",rel:"noopener noreferrer"}},[t._v("normalizeUnicode"),n("OutboundLink")],1)])])]),t._v(" "),n("p",[t._v("第二种方式")]),t._v(" "),n("p",[t._v("就是直接在"),n("code",[t._v("webpack")]),t._v("的"),n("code",[t._v("plugins")]),t._v("中配置即可")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("plugins:[\n        new OptimizeCSSAssetsPlugin({\n        assetNameRegExp: /\\.css$/g,\n        cssProcessor: require('cssnano'),\n\t\t// cssProcessorOptions: cssnanoOptions,\n\t\tcssProcessorPluginOptions: {\n\t\t\tpreset: ['default', {\n\t\t\t\tdiscardComments: {\n\t\t\t\t\tremoveAll: true,\n\t\t\t\t},\n\t\t\t\tnormalizeUnicode: false\n\t\t\t}]\n\t\t},\n\t\tcanPrint: true\n\t})\n]\n")])])]),n("blockquote",[n("h3",{attrs:{id:"webpack-provideplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack-provideplugin"}},[t._v("#")]),t._v(" webpack.ProvidePlugin")])]),t._v(" "),n("p",[t._v("好在webpack提供了一个插件: "),n("code",[t._v("webpack.ProvidePlugin")]),t._v("，可以进行自动引入模块。")]),t._v(" "),n("p",[n("strong",[t._v("使用介绍")])]),t._v(" "),n("div",{staticClass:"language-diff extra-class"},[n("pre",{pre:!0,attrs:{class:"language-diff"}},[n("code",[n("span",{pre:!0,attrs:{class:"token unchanged"}},[t._v("  const path = require('path');\n")]),n("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t._v("+ const webpack = require('webpack');\n")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token unchanged"}},[t._v("  module.exports = {\n    entry: './src/index.js',\n    output: {\n      filename: 'bundle.js',\n      path: path.resolve(__dirname, 'dist')\n")]),n("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[t._v("-   }\n")]),n("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t._v("+   },\n+   plugins: [\n+     new webpack.ProvidePlugin({\n+       _: 'lodash'\n+     })\n+   ]\n")]),n("span",{pre:!0,attrs:{class:"token unchanged"}},[t._v("  };\n")])])])]),n("p",[t._v("上面配置的意思是：==如果你遇到了至少一处用到 "),n("code",[t._v("_")]),t._v(" 变量的模块实例，那请你将 "),n("code",[t._v("lodash")]),t._v(" package 引入进来，并将其提供给需要用到它的模块。==")]),t._v(" "),n("p",[t._v("有了这个配置，在代码里就不需要引入"),n("code",[t._v("lodash")]),t._v("这个模块就能使用"),n("code",[t._v("lodash")]),t._v("的方法了。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面代码，不需要import _ from 'lodash';")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" element "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\telement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("CopyWebpackPlugin")])]),t._v(" "),n("p",[t._v("它可以将代码里面的资源原封不动copy到dist指定的目录里。")]),t._v(" "),n("p",[t._v("一般用来copy一些static的静态资源，比如我们项目里面的"),n("code",[t._v("tradingview")]),t._v("插件。")]),t._v(" "),n("blockquote",[n("p",[t._v("HtmlWebpackPlugin + AddAssetHtmlPlugin + "),n("a",{attrs:{href:"https://github.com/zanettin/react-dev-utils",target:"_blank",rel:"noopener noreferrer"}},[t._v("InterpolateHtmlPlugin"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("这几个插件配合使用：")]),t._v(" "),n("p",[t._v("HtmlWebpackPlugin自动生成html文件")]),t._v(" "),n("p",[t._v("AddAssetHtmlPlugin可以向html里面增加js引用")]),t._v(" "),n("p",[t._v("interpolateHtmlPlugin可以在index.html里面使用变量。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('  <link rel="manifest" href="%PUBLIC_URL%/manifest.json">\n  <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">\n')])])]),n("p",[t._v("实际例子")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"webpack"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^3.6.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"add-asset-html-webpack-plugin"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.1.3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"html-webpack-plugin"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.30.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"interpolate-html-plugin"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0.0"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("在webpack是3版本的时候，依赖如上。")]),t._v(" "),n("p",[t._v("在配置文件里配置：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUBLIC_URL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUBLIC_URL")]),t._v("  \nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      template"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      inject"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AddAssetHtmlPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      filepath"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../static/image-config.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      includeSourcemap"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      publicPath"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("assetsPublicPath\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterpolateHtmlPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      publicUrl"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUBLIC_URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("在页面里使用：htmlplugin自带支持lodash的plugin")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v("window.__login= {\n\tuser: JSON.parse(sessionStorage.getItem('user'))\n}\nwindow.__config = {\n  publicUrl: '%publicUrl%', // 变量\n  thirdType: 'firstbi',\n  title: 'firstbi',\n  loginMode: '3', // 1: \"Company\", 2: \"Cust\", 3: \"External\n}\n")])])]),n("blockquote",[n("h3",{attrs:{id:"defineplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#defineplugin"}},[t._v("#")]),t._v(" DefinePlugin")])]),t._v(" "),n("p",[t._v("DefinePlugin可以配置一个全局的变量。在webpack打包的时候，帮助开发者进行一个字符串的替换。这样在业务代码里面，就可以忽略开发环境和生产环境的打包规则限制，避免出错。比如：在开发构建中，而不在发布构建中执行日志记录。")]),t._v(" "),n("p",[n("strong",[t._v("基本用法")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefinePlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PRODUCTION")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VERSION")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5fa3b9'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BROWSER_SUPPORTS_HTML5")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TWO")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1+1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'typeof window'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'process.env.NODE_ENV'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PRODUCTION")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Debug info'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PRODUCTION")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Production log'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("code",[t._v("DLLPlugin")]),t._v(" 和 "),n("code",[t._v("DLLReferencePlugin")]),t._v(" 用某种方法实现了拆分 bundles，同时还大大提升了构建的速度。")]),t._v(" "),n("p",[t._v("它只是提升打包速度，如果要提取公共类，还是需要通过"),n("strong",[t._v("CommonsChunkPlugin")]),t._v("或者"),n("code",[t._v("SplitChunkPlugin.")])]),t._v(" "),n("blockquote",[n("h4",{attrs:{id:"dllplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dllplugin"}},[t._v("#")]),t._v(" DllPlugin")])]),t._v(" "),n("p",[t._v("ddlplugin会生成一个"),n("code",[t._v("manifest.json")]),t._v(" 的文件，这个文件是用来给 "),n("a",{attrs:{href:"#dllreferenceplugin"}},[n("code",[t._v("DLLReferencePlugin")])]),t._v(" 映射到相关的依赖上去的。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpack "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vendors "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-dom"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"moment"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...其它库")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("webpack")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    vendor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vendors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../dll"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[name].js"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DllPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dll"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[name]-manifest.json"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[name]"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      context"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" __dirname\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("上面的config文件时用来生成dll.js文件和json文件的。")]),t._v(" "),n("blockquote",[n("h4",{attrs:{id:"dllreferenceplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dllreferenceplugin"}},[t._v("#")]),t._v(" DllReferencePlugin")])]),t._v(" "),n("div",{staticClass:"language-diff extra-class"},[n("pre",{pre:!0,attrs:{class:"language-diff"}},[n("code",[t._v("module.exports = {\n\tplugins: [\n"),n("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t._v("+   new AddAssetHtmlPlugin({\n+      filepath: path.resolve(__dirname, '../dll/vendors.dll.js'),\n+    }),\n+ \tnew webpack.DllReferencePlugin({\n+      manifest: path.resolve(__dirname, '../dll/vendors-manifest.json'),\n+    }),\n")]),t._v("\t]\n}\n")])])]),n("p",[t._v("dllReferencePlugin会根据上面生成的mainfest.json文件，知道已经有哪些依赖项在里面，这样webpack就不会将这些依赖打包到bundle里，从而减少包的体积。")]),t._v(" "),n("p",[t._v("==AddAssetHtmlPlugin==将dll文件加到html里去")]),t._v(" "),n("p",[t._v("低版本webpack用2.1.3的")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("yarn add add-asset-html-webpack-plugin@^2.1.3 --dev\n")])])]),n("blockquote",[n("p",[t._v("###ManifestPlugin")])])])}),[],!1,null,null,null);s.default=e.exports}}]);